!function(e){function t(n){if(a[n])return a[n].exports;var o=a[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a={};return t.m=e,t.c=a,t.p="/",t(0)}([function(e,t,a){a(34),a(33),e.exports=a(10)},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.getPage=o.getPage.bind(o),o}return o(t,e),r(t,[{key:"getPage",value:function(){this.props.clickEv(this.props.num)}},{key:"render",value:function(){var e="";return e="active"==this.props.classN?"active":"",React.createElement("li",{className:e,onClick:this.getPage},React.createElement("a",null,this.props.num))}}]),t}(React.Component),l=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={pageNum:1,_maxPage:18,numArr:[]},o.setPageData=o.setPageData.bind(o),o.calculatePage=o.calculatePage.bind(o),o}return o(t,e),r(t,[{key:"calculatePage",value:function(e){var t=this;if(e!=this.state.pageNum)return e<1?void(e=1):e>this.state._maxPage?void(e=this.state._maxPage):void this.setPageData(e,this.state._maxPage,function(e){t.props.clickCallback&&t.props.clickCallback({page:e})})}},{key:"setPageData",value:function(e,t,a){var t=t||1,n=[];if(t>=9){if(e<=5)n=[1,2,3,4,5,6,7,8,9];else if(e>5&&e<t-4)for(var o=e-4;o<=e+4;o++)n.push(o);else if(e>=t-4)for(var o=t-8;o<=t;o++)n.push(o)}else for(var o=1;o<=t;o++)n.push(o);this.setState({pageNum:e,_maxPage:t,numArr:n},function(){a&&a(e)})}},{key:"componentWillMount",value:function(){this.setPageData(this.state.pageNum,this.props.maxPage)}},{key:"componentWillReceiveProps",value:function(e){var t=1;t=this.props.pageNum?this.props.pageNum:this.state.pageNum,this.setPageData(t,e.maxPage)}},{key:"render",value:function(){var e="",t="",a=[],n=this.state.pageNum,o=this.calculatePage;return 1==this.state.pageNum&&(e="disabled"),this.state.pageNum==this.state._maxPage&&(t="disabled"),this.state.numArr.forEach(function(e,t){n==e?a.push(React.createElement(i,{key:t,num:e,clickEv:o,classN:"active"})):a.push(React.createElement(i,{key:t,num:e,clickEv:o}))}),React.createElement("nav",null,React.createElement("ul",{className:"pagination"},React.createElement("li",{className:e,onClick:this.calculatePage.bind(this,1)},React.createElement("a",{"aria-label":"Previous"},"首页")),React.createElement("li",{className:e,onClick:this.calculatePage.bind(this,this.state.pageNum-1)},React.createElement("a",{"aria-label":"Previous"},React.createElement("span",{"aria-hidden":"true"},"«"))),a,React.createElement("li",{className:t,onClick:this.calculatePage.bind(this,this.state.pageNum+1)},React.createElement("a",{"aria-label":"Next"},React.createElement("span",{"aria-hidden":"true"},"»"))),React.createElement("li",{className:t,onClick:this.calculatePage.bind(this,this.state._maxPage)},React.createElement("a",{"aria-label":"Next"},React.createElement("span",{"aria-hidden":"true"},"尾页")))))}}]),t}(React.Component);t.default=l},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(3),c=n(s),d=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.bodyOperate,t=this.props.id.split("_").join("-");for(var a in e)$("#"+this.props.id+"_table").delegate("."+t+"-operate"+a,"click",e[a])}},{key:"createHead",value:function(){for(var e=this.props.headlines,t=this.props.headOperate,a=this.props.headStyle,n=e.length,o=new Array(n),r=0;r<n;r++)o[r]=void 0===t[r]?React.createElement("th",{key:r},e[r]):React.createElement("th",{key:r},React.createElement("a",{href:"javascript:;","data-index":r,onClick:t[r]},e[r],React.createElement("span",{className:a},null)));return React.createElement("tr",null,o)}},{key:"createBody",value:function(){for(var e=this.props.values,t=this.props.values.length,a=this.props.headlines.length,n=this.props.order,o=this.props.bodyOperate,r=this.props.status,i=this.props.style,l=this.props.statusOperate,s=new Array(t),d="",u="",p="",m=this.props.operate,f=this.props.id.split("_").join("-"),h=this.props.cellStyle,v=0;v<t;v++){for(var g=e[v],_=new Array(a),b=0;b<a;b++){var y=null;h&&h[b]&&g[h[b].condition[0]]==h[b].condition[1]&&(y=h[b].style),p=l[g[n[b]]],d=void 0===r[b]?g[n[b]]:r[b][g[n[b]]],u=void 0===p?React.createElement("a",{href:"javascript:;",className:f+"-operate"+b+" "+i,"data-index":v},d):React.createElement(c.default,{style:i,btnNames:p,identification:f+"-operate"+b,index:v}),void 0!==m[b]&&(u=React.createElement(c.default,{style:i,btnNames:m[b],identification:f+"-operate"+b,index:v})),_[b]=void 0===o[b]?React.createElement("td",{style:y,key:b},d):React.createElement("td",{style:y,key:b},u)}s[v]=React.createElement("tr",{key:v},_)}return s}},{key:"render",value:function(){return React.createElement("table",{className:"table table-bordered table-hover table-responsive"},React.createElement("thead",null,this.createHead()),React.createElement("tbody",{id:this.props.id+"_table"},this.createBody()))}}]),t}(React.Component);d.defaultProps={status:{},statusOperate:{},headOperate:{},bodyOperate:{},style:"",headStyle:"",operate:{}},t.default=d},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),r(t,[{key:"createButtons",value:function(){var e=this.props.bindData,t=this.props.style,a=this.props.status,n=this.props.activeStyle,o=this.props.operate,r=[];return this.props.btnNames.map(function(i,l){r.push(React.createElement("a",{"data-operate":o?o[l]:null,className:a!=e[l]?t:n,key:l,"data-index":e[l],href:"javascript:;"},i))}),r}},{key:"render",value:function(){return React.createElement("div",{style:{display:"inline-block"},onClick:this.props.clickCallback||null,className:this.props.identification,"data-index":this.props.index},this.createButtons())}}]),t}(React.Component);i.defaultProps={style:"",bindData:[1,2,3,4,5,6,7,8],status:0},t.default=i},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),r(t,[{key:"render",value:function(){return React.createElement("button",{className:"btn "+this.props.otherClass,onClick:this.props.btnEvent.bind(this)},this.props.name)}}]),t}(React.Component);t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(4),c=n(s),d=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){$.datepicker.regional["zh-CN"]={closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"};var e=this,t=(this.props.prefix?this.props.prefix:"")+"startTime",a=(this.props.prefix?this.props.prefix:"")+"endTime",n=$("#"+t),o=$("#"+a);$.datepicker.setDefaults($.datepicker.regional["zh-CN"]),n.datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,onClose:function(t){o.datepicker("option","minDate",t),e.props.changeCallback&&e.props.changeCallback()}}),o.datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,onClose:function(t){n.datepicker("option","maxDate",t),e.props.changeCallback&&e.props.changeCallback()}}),o.val(this.props.end),n.val(this.props.start)}},{key:"searchHandler",value:function(e){e.preventDefault(),this.props.searchEvt()}},{key:"render",value:function(){return React.createElement("div",{className:"time-search-w"},React.createElement("input",{type:"text",className:"form-control "+this.props.otherClass,id:(this.props.prefix?this.props.prefix:"")+"startTime",placeholder:"起始日期"}),"一  ",React.createElement("input",{type:"text",className:"form-control "+this.props.otherClass,id:(this.props.prefix?this.props.prefix:"")+"endTime",placeholder:"结束日期"}),this.props.btn?React.createElement(c.default,{name:this.props.btn,otherClass:"btn-xs btn-orange",btnEvent:this.searchHandler.bind(this)}):"")}}]),t}(React.Component);t.default=d},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={optionArr:[],val:0},o.selChange=o.selChange.bind(o),o}return o(t,e),r(t,[{key:"selChange",value:function(){this.props.changeEv&&this.props.changeEv(this.refs.selectNode.value),this.setState({val:this.refs.selectNode.value})}},{key:"componentWillMount",value:function(){this.setState({optionArr:this.props.dropdownData}),this.setState({val:this.props.selectVal})}},{key:"render",value:function(){var e="",t=this.state.optionArr,a="";return this.props.checkData&&(a=this.props.checkData),e=t.map(function(e,t){var n="";return n=a[t]?a[t]:t,React.createElement("option",{value:n,key:t},e)}),React.createElement("select",{value:this.state.val,className:"form-control",onChange:this.selChange,ref:"selectNode"},e)}}]),t}(React.Component);t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(6),c=n(s),d=a(4),u=n(d),p=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selVal:0},a.backSelVal=a.backSelVal.bind(a),a.searchSub=a.searchSub.bind(a),a}return i(t,e),l(t,[{key:"searchSub",value:function(e){e.preventDefault();var t=this.refs.key.value.split(" ").join("");if(null==t||void 0==t||""==t)return void H.Modal("搜索的关键词不能为空！");var a=this.state.selVal;this.props.emit&&this.props.emit(a,t)}},{key:"backSelVal",value:function(e){this.props.onChange(e),this.setState({selVal:e}),this.refs.key.value=""}},{key:"render",value:function(){return React.createElement("div",{className:"search-w"},React.createElement(c.default,{dropdownData:this.props.dropdownMenus,changeEv:this.backSelVal,selectVal:this.state.selVal}),React.createElement("input",{id:"component_search_input",className:"form-control input-key",type:"text",ref:"key"}),React.createElement(u.default,{name:"搜 索",btnEvent:this.searchSub,otherClass:"btn-sm"}))}}]),t}(React.Component);t.default=p},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={menu:null},o}return o(t,e),r(t,[{key:"componentWillMount",value:function(){if(this.props.menu){var e=[],t=this.props.menu.navigates[1];for(var a in t)e.push(t[a]);this.setState({menu:e})}}},{key:"componentWillReceiveProps",value:function(e){if(e.menu){var t=[],a=e.menu.navigates[1];for(var n in a)t.push(a[n]);this.setState({menu:t})}}},{key:"render",value:function(){return React.createElement("div",{className:"section-top-navbar navbar navbar-default"},React.createElement("a",{className:"toggle-left-sidebar",href:"#"},React.createElement("img",{src:"/images/logo.png",alt:"logo"})),React.createElement("div",{className:"navbar-header",style:{width:"auto"}},React.createElement("a",{className:"nav-brand"},"大鱼物流系统")))}}]),t}(React.Component);t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(16),c=n(s),d=a(14),u=n(d),p=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={menuId:null,tab:[{id:0,parentId:0,name:"home",url:"home",selected:!0,isOpen:!0,isRequest:!1}],userInfo:{name:"",department_id:1,login_name:""},menu:[]},a.stateUpdate=a.stateUpdate.bind(a),a.closeTabHandler=a.closeTabHandler.bind(a),a}return i(t,e),l(t,[{key:"stateUpdate",value:function(e,t){for(var a=t?t:this.state.tab,n=-1,o=0;o<a.length;o++)a[o].id==e.id&&a[o].parentId==e.parentId?(a[o].selected=!0,n=o,$("#nid_"+a[o].parentId+"_"+a[o].id)[0]?$("#nid_"+a[o].parentId+"_"+a[o].id)[0].click():$(".nav.nav-list li").removeClass("active")):a[o].selected=!1;n==-1&&a.push(e),this.setState({tab:a})}},{key:"componentDidMount",value:function(){var e=this;H.server.user_info({},function(t){0==t.code?e.setState({userInfo:t.data.user_infos}):10106==t.code?H.overdue():H.Modal(t.message)})}},{key:"componentWillMount",value:function(){if(this.props.menu){for(var e=this.props.menu.navigates[1],t=null,a=0;a<e.length;a++)"logistics"==e[a].privilege_tag&&(t=e[a].id);var n=[],o=this.props.menu.navigates[2][t];for(var r in o)n.push(o[r]);this.setState({menu:n,menuId:t})}}},{key:"componentWillReceiveProps",value:function(e){if(e.menu&&e.menu.navigates[2]){for(var t=e.menu.navigates[1],a=null,n=0;n<t.length;n++)"logistics"==t[n].privilege_tag&&(a=t[n].id);var o=[],r=e.menu.navigates[2][a];for(var i in r)o.push(r[i]);this.setState({menu:o,menuId:a})}}},{key:"closeTabHandler",value:function(e){for(var t=this.state.tab,a=0;a<t.length;a++)if(t[a].id==e.id&&t[a].parentId==e.parentId){t[a-1].selected=!0,t.splice(a,1),this.stateUpdate(t[a-1],t);break}}},{key:"render",value:function(){var e=this,t=this.state.menu.map(function(t,a){return React.createElement(c.default,{key:a,data:t,parentId:e.state.menuId,updateTabMenu:e.stateUpdate})});return React.createElement("div",{className:"section-main-holder"},React.createElement("div",{className:"section-left-nav left-sidebar"},React.createElement("div",{className:"user-menu"},React.createElement("img",{src:"/images/avatar.png",alt:""}),React.createElement("div",{className:"user-info"},React.createElement("div",{className:"welcome"},"welcome"),React.createElement("div",{className:"username"},this.state.userInfo.name))),React.createElement("ul",{className:"nav nav-list"},t)),React.createElement(u.default,{userInfo:this.state.userInfo,stateUpdate:this.stateUpdate,closeTabHandler:this.closeTabHandler,tabMenuArr:this.state.tab,userNavigate:this.props.menu}))}}]),t}(React.Component);t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=a(15),r=n(o);ReactDOM.render(React.createElement(r.default,null),document.getElementById("main-holder"))},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(e){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),r(t,[{key:"render",value:function(){return React.createElement("a",{id:this.props.id,href:this.props.url,title:this.props.name,onClick:this.props.clickEvent},this.props.children)}}]),t}(React.Component);t.default=i},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.closeTab=o.closeTab.bind(o),o}return o(t,e),r(t,[{key:"closeTab",value:function(e){e.stopPropagation(),this.props.closeTabHandler&&this.props.closeTabHandler(this.props.data)}},{key:"render",value:function(){return React.createElement("i",{className:"glyphicon tab-del-btn",onClick:this.closeTab})}}]),t}(React.Component);t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(18),c=n(s),d=a(26),u=n(d),p=a(19),m=n(p),f=a(21),h=n(f),v=a(30),g=n(v),_=a(31),b=n(_),y=a(20),E=n(y),T=a(25),R=n(T),P=a(32),N=n(P),O=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"tab-content",id:"tab-content"},this.props.tabMenuArr.map(function(t,a){var n="tid_"+t.parentId+"_"+t.id,o=t.selected?"tab-pane active":"tab-pane",r=t.url,i=null;return 0==t.id&&0==t.parentId?i=React.createElement(c.default,{userInfo:e.props.userInfo}):r.indexOf("logistic-area")!=-1?i=React.createElement(u.default,null):r.indexOf("logistic-capacity-info")!=-1?i=React.createElement(m.default,null):r.indexOf("logistic-driver-info")!=-1?i=React.createElement(h.default,null):r.indexOf("logistic-waybill-info")!=-1?i=React.createElement(g.default,null):r.indexOf("logistic-waybill-real-time")!=-1?i=React.createElement(b.default,null):r.indexOf("logistic-customer-management")!=-1?i=React.createElement(E.default,null):r.indexOf("logistic-freight-management")!=-1?i=React.createElement(R.default,null):r.indexOf("logistic-printer-config")!=-1&&(i=React.createElement(N.default,null)),React.createElement("div",{key:a,className:o,id:n},i)}))}}]),t}(React.Component);t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(12),c=n(s),d=a(13),u=n(d),p=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"navClick",value:function(e,t){t.preventDefault();var a=e;a.selected=!1,this.props.stateUpdate&&this.props.stateUpdate(a)}},{key:"render",value:function(){var e=this;return React.createElement("div",{className:"section-main-panel",id:"section-main"},React.createElement("div",{className:"section-main-w"},React.createElement("div",{className:"tabs-w"},React.createElement("ul",{className:"nav nav-tabs",role:"tablist",id:"tab-list"},this.props.tabMenuArr.map(function(t,a){var n="",o=t.selected?"active":"";if(0!=t.id&&(n=React.createElement(c.default,{data:t,closeTabHandler:e.props.closeTabHandler})),t.isOpen)return React.createElement("li",{role:"presentation",key:a,className:o},React.createElement("a",{onClick:e.navClick.bind(e,t)},t.name,React.createElement("span",null," "),n))})),React.createElement(u.default,{userInfo:this.props.userInfo,tabMenuArr:this.props.tabMenuArr,userNavigate:this.props.userNavigate}))))}}]),t}(React.Component);t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(9),c=n(s),d=a(8),u=n(d),p=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={res:null},a}return i(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this,t=H.server;t.user_navigate({},function(t){0==t.code?e.setState({res:t.data}):10106==t.code?H.overdue():H.Modal(t.message)})}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(u.default,{menu:this.state.res}),React.createElement(c.default,{menu:this.state.res}))}}]),t}(React.Component);t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(11),c=n(s),d=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"createTab",value:function(e){var t={id:this.props.data.id,parentId:this.props.parentId,name:this.props.data.name,url:this.props.data.url,selected:!0,isOpen:!0,isRequest:!1};this.props.updateTabMenu&&this.props.updateTabMenu(t),$("#"+e).parent().siblings().removeClass("active"),$("#"+e).parent().addClass("active")}},{key:"hasNoSub",value:function(){return React.createElement("li",null,React.createElement(c.default,{
id:"nid_"+this.props.parentId+"_"+this.props.data.id,name:this.props.data.name,clickEvent:this.createTab.bind(this,"nid_"+this.props.parentId+"_"+this.props.data.id)},React.createElement("i",{className:"glyphicon "+this.props.data.url}),React.createElement("span",null,this.props.data.name)))}},{key:"render",value:function(){return this.hasNoSub()}}]),t}(React.Component);t.default=d},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(e){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),r(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("p",{style:{marginTop:"10px"}},"大鱼物流系统"))}}]),t}(React.Component);t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),r=n(o);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(2),c=n(s),d=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={capacityList:[]},a.getData=a.getData.bind(a),a.operate=a.operate.bind(a),a}return i(t,e),l(t,[{key:"componentWillMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;H.server.get_capacity_info({display:"all"},function(t){0==t.code?e.setState({capacityList:t.data}):10106==t.code?H.overdue():H.Modal(t.message)})}},{key:"createTable",value:function(){var e=["ID","运力名称","准载户数","户数上限","准载件数","件数上限","操作"],t=["id","name","bill_no","bill_max","pack_no","pack_max","operate"],a={},n={6:this.operate};return this.state.capacityList.map(function(e,t){e.operate=t,a[t]=["修改","删除"]}),React.createElement(c.default,{values:this.state.capacityList,headlines:e,order:t,bodyOperate:n,id:"capacityInfo",statusOperate:a,status:status})}},{key:"operate",value:function(e){var t=this,a=a=e.target.dataset.reactid.split("$")[2].split(".")[0],n=$(e.target).html(),o=this.state.capacityList[a].id,r=this.state.capacityList[a].name,i=this.state.capacityList[a].bill_no,l=this.state.capacityList[a].bill_max,s=this.state.capacityList[a].pack_no,c=this.state.capacityList[a].pack_max;switch(n){case"修改":H.Modal({title:"修改运力信息",width:"400",content:'<div class="form-horizontal" role="form"><div class="form-group"><label class="col-lg-4 control-label">运力名称：</label><div class="col-lg-8"><input id="capacityName" type="text" class="form-control" value='+r+'></div></div><div class="form-group"><label class="col-lg-4 control-label">准载户数：</label><div class="col-lg-8"><input id="billNo" min="0" type="number" class="form-control" value='+i+'></div></div><div class="form-group"><label class="col-lg-4 control-label">户数上限：</label><div class="col-lg-8"><input id="billMax" min="0" type="number" class="form-control" value='+l+'></div></div><div class="form-group"><label class="col-lg-4 control-label">准载件数：</label><div class="col-lg-8"><input id="packNo" min="0" type="number" class="form-control" value='+s+'></div></div><div class="form-group"><label class="col-lg-4 control-label">件数上限：</label><div class="col-lg-8"><input id="packMax" min="0" type="number" class="form-control" value='+c+"></div></div></div>",okText:"确认修改",cancel:!0,okCallback:function(){r=$("#capacityName").val(),i=$("#billNo").val(),l=$("#billMax").val(),s=$("#packNo").val(),c=$("#packMax").val(),H.server.modify_capacity({id:o,name:r,bill_no:i,bill_max:l,pack_no:s,pack_max:c},function(e){0==e.code?(H.Modal("修改成功！"),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})}});break;case"删除":H.Modal({content:"<p>确认要删除这条运力？</p>",okText:"确认删除",cancel:!0,okCallback:function(){H.server.delete_capacity({id:o},function(e){0==e.code?(H.Modal("删除成功！"),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})}})}}},{key:"addCapacity",value:function(){var e=this,t=H.Modal({title:"添加新运力",width:"400",autoClose:!1,content:'<div id="capacityFrom" class="form-horizontal" role="form"><div class="form-group"><label class="col-lg-4 control-label">运力名称：</label><div class="col-lg-8"><input id="caName" type="text" class="form-control" placeholder="请输入运力名称"></div></div><div class="form-group"><label class="col-lg-4 control-label">准载户数：</label><div class="col-lg-8"><input id="alNo" type="number" min="0" class="form-control" placeholder="请设置准载户数"></div></div><div class="form-group"><label class="col-lg-4 control-label">户数上限：</label><div class="col-lg-8"><input id="mNo" type="number" min="0" class="form-control" placeholder="请设置户数上限"></div></div><div class="form-group"><label class="col-lg-4 control-label">准载件数：</label><div class="col-lg-8"><input id="alNum" type="number" min="0" class="form-control" placeholder="请设置准载件数"></div></div><div class="form-group"><label class="col-lg-4 control-label">件数上限：</label><div class="col-lg-8"><input id="mNum" type="number" min="0" class="form-control" placeholder="请设置件数上限"></div></div></div>',okText:"确认添加",cancel:!0,okCallback:function(){$("#capacityFrom").find(".form-group").removeClass("has-error");var a=$("#caName").val(),n=$("#alNo").val(),o=$("#mNo").val(),r=$("#alNum").val(),i=$("#mNum").val();""==a&&$("#caName").focus().parent().parent().addClass("has-error"),(""==n||n<0)&&$("#alNo").focus().parent().parent().addClass("has-error"),(""==o||o<0)&&$("#mNo").focus().parent().parent().addClass("has-error"),(""==r||r<0)&&$("#alNum").focus().parent().parent().addClass("has-error"),(""==i||i<0)&&$("#mNum").focus().parent().parent().addClass("has-error"),""!=a&&""!=o&&""!=o&&""!=r&&""!=i&&t.destroy(),H.server.add_capacity({name:a,bill_no:n,bill_max:o,pack_no:r,pack_max:i},function(t){0==t.code?(H.Modal("添加成功！"),e.getData()):10106==t.code?H.overdue():H.Modal(t.message)})},cancelCallback:function(){t.destroy()}})}},{key:"render",value:function(){return React.createElement("div",{className:"section-warp"},React.createElement("div",{className:"section-table"},React.createElement("div",{className:"section-filter"},React.createElement("form",{className:"form-inline"},React.createElement("div",{className:"filter-row"},React.createElement("a",{href:"javascript:;",className:"col-lg-6",onClick:this.getData.bind(this)},"刷新"),React.createElement("a",{href:"javascript:;",onClick:this.addCapacity.bind(this),className:"btn btn-lg btn-default pull-right col-lg-6"},"添加新运力")))),React.createElement("div",{className:"col-lg-12",style:{marginTop:"30px"}},this.createTable())))}}]),t}(React.Component);t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(2),c=n(s),d=a(1),u=n(d),p=a(3),m=n(p),f=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={customerList:[],areaList:[],locations:[],currentCode:0,currentArea:0,points:[],status:"-1, 0, 1, 2",searchContext:"",custom:null,map:null,changeAddress:!1,page:1,lastPage:1,size:30,total:100},a.getData=a.getData.bind(a),a.operate=a.operate.bind(a),a.createMap=a.createMap.bind(a),a.refreshByKeywords=a.refreshByKeywords.bind(a),a.movePoints=a.movePoints.bind(a),a}return i(t,e),l(t,[{key:"componentWillMount",value:function(){if($("#mapScript").length<=0){var e='<script id="mapScript" type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=56e401b127998ede0364e18d6877f0f1&plugin=AMap.Geocoder,AMap.MouseTool,AMap.PolyEditor"></script>';$("body").append(e)}this.getData()}},{key:"componentDidMount",value:function(){$("#searchBox").keypress(function(e){var t=window.event?e.keyCode:e.which;if("13"==t.toString())return!1})}},{key:"getData",value:function(){var e=this,t={};t.area_id=this.getAreaId(),t.page=this.state.page,t.size=this.state.size,this.state.status&&(t.status=this.state.status),""!=this.state.searchContext&&(t.search=this.state.searchContext),new Promise(function(t){H.server.get_all_area({id:510100},function(a){0==a.code?e.setState({areaList:a.data.children},function(){t(a)}):10106==a.code?H.overdue():H.Modal(a.message)})}).then(function(){H.server.get_all_customer(t,function(t){0==t.code?e.setState({customerList:t.data.customs,total:t.data.total,page:t.data.page,lastPage:t.data.last_page}):10106==t.code?H.overdue():H.Modal(t.message)})})}},{key:"createSelectArea",value:function(){var e=["成都"],t=[0],a=[],n=[],o=["全部","未确认","已确认","已更正","已作废"],r=[0,1,2,3,4];return a.push("全部"),n.push(0),this.state.areaList.map(function(e,t){a.push(e.name),n.push(t+1)}),React.createElement("div",{className:"section-filter",style:{paddingTop:0}},React.createElement("form",{className:"form-inline"},React.createElement("div",{className:"filter-row"},this.createSearchBar())),React.createElement("div",{className:"row"},React.createElement("form",{className:"form-inline col-lg-12"},React.createElement("div",{className:"filter-row"},React.createElement("label",{style:{display:"inline-block",width:"6em"}},"城市"),React.createElement(m.default,{btnNames:e,bindData:t,status:this.state.currentCity,style:"btn btn-xs",activeStyle:"btn btn-xs btn-default"}))),React.createElement("form",{className:"form-inline col-lg-12"},React.createElement("div",{className:"filter-row"},React.createElement("label",{style:{display:"inline-block",width:"6em"}},"区县"),React.createElement(m.default,{btnNames:a,bindData:n,status:this.state.currentArea,style:"btn btn-xs",activeStyle:"btn btn-xs btn-default",clickCallback:this.toggleArea.bind(this)}))),React.createElement("form",{className:"form-inline col-lg-12"},React.createElement("div",{className:"filter-row"},React.createElement("label",{style:{display:"inline-block",width:"6em"}},"提货码状态"),React.createElement(m.default,{btnNames:o,bindData:r,status:this.state.currentCode,style:"btn btn-xs",activeStyle:"btn btn-xs btn-default",clickCallback:this.toggleCodeStatus.bind(this)}))),React.createElement("div",{className:"form-inline col-lg-6"},React.createElement("label",{style:{display:"inline-block",width:"6em"}}),React.createElement("a",{className:"btn btn-lg btn-orange",onClick:this.select.bind(this)},"筛选"))))}},{key:"select",value:function(){""==$("#searchBox").val()&&this.setState({searchContext:""}),this.setState({page:1},this.getData)}},{key:"createSearchBar",value:function(){return React.createElement("div",{className:"search-bar"},React.createElement("input",{id:"searchBox",type:"search",style:{width:"400px"},className:"form-control",placeholder:"搜索提货码、手机号、地址、收货人姓名、街道、区县"}),React.createElement("a",{href:"javascript:;",className:"btn btn-lg",onClick:this.search.bind(this)},"搜索"))}},{key:"search",value:function e(){var e=$("#searchBox").val();this.setState({searchContext:e,currentArea:0,currentCode:0,page:1},this.getData)}},{key:"toggleArea",value:function(e){var t=e.target.dataset.index;t!=this.state.currentArea&&this.setState({page:1,currentArea:t})}},{key:"toggleCodeStatus",value:function(e){var t=e.target.dataset.index,a=[0,1,2,"-1"],n="";t!=this.state.currentCode&&(n=0==t?a.toString():a[t-1],this.setState({page:1,currentCode:t,status:n}))}},{key:"createTable",value:function(){var e=["ID","提货码","店铺名","收货人","收货电话","区县","街道/乡镇","地址","配送状态","账号状态","操作"],t=["id","code","address_title","name","mobile","district","street","address_full","available","status","operate"],a={8:{0:"未开通",1:"可送"},9:{"-1":"已作废",0:"未确认",1:"已确认",2:"已更正"}},n={},o={10:this.operate};return this.state.customerList.map(function(e,t){e.operate=t,"-1"!=e.status?n[t]=["修改"]:e.operate=""}),React.createElement(c.default,{values:this.state.customerList,headlines:e,order:t,bodyOperate:o,id:"customerManagement",statusOperate:n,status:a})}},{key:"operate",value:function(e){var t=this,a=null,n=[],o=o=e.target.dataset.reactid.split("$")[2].split(".")[0],r=this.state.customerList[o].id;new Promise(function(e){H.server.get_custom_by_id({id:r},function(o){0==o.code?(n.push([o.data.lng,o.data.lat]),a=o.data,t.setState({custom:a,points:n},function(){e(o)})):10106==o.code?H.overdue():H.Modal(o.message)})}).then(function(){t.setState({changeAddress:!1});var e=H.Modal({title:"修改客户信息",width:"800",autoClose:!1,content:'<div class="row"><div class="col-lg-5 form-horizontal"><div class="form-group"><label class="col-lg-4 control-label">提货码：</label><p class="col-lg-8 form-control-static">'+a.code+'</p></div><div class="form-group"><label class="col-lg-4 control-label">区域：</label><p id="district" class="col-lg-8 form-control-static">'+a.district+'</p></div><div class="form-group"><label class="col-lg-4 control-label">收货人：</label><div class="col-lg-8"><input id="name" class="form-control" type="text" value="'+a.name+'"/></div></div><div class="form-group"><label class="col-lg-4 control-label">店铺名：</label><div class="col-lg-8"><input id="title" class="form-control" type="text" value="'+a.address_title+'"/></div></div></div><div class="col-lg-7 form-horizontal"><div class="form-group"><label class="col-lg-3 control-label">地址：</label><div class="col-lg-9"><input id="fullAddress" class="form-control" type="text" value="'+a.address_full+'"/></div></div><div class="form-group"><label class="col-lg-3 control-label">坐标：</label><div class="col-lg-6"><input id="pointsInfo" class="form-control" type="text" readonly value="'+a.lng+","+a.lat+'"/></div><a href="javascript:;" id="refreshMapBtn" class="col-lg-3 form-control-static">刷新坐标</a></div><div class="form-group"><label class="col-lg-3 control-label">收货电话：</label><div class="col-lg-9"><input id="phone" class="form-control" type="tel" value="'+a.mobile+'"/></div></div><div class="map-content pull-right" id="map" style="height:250px; width: 400px"></div></div></div>',okText:"确认修改",cancel:!0,okCallback:function(){var n={};n.id=a.id,n.name=$("#name").val(),n.mobile=$("#phone").val(),t.state.changeAddress===!0&&(n.address={id:a.tid,title:$("#title").val(),address:$("#fullAddress").val(),type:0,location:{lat:$("#pointsInfo").val().split(",")[1],lng:$("#pointsInfo").val().split(",")[0]},adcode:a.adcode,province:a.province,district:a.district,city:a.city}),""!=n.mobile&&/^1[3|4|5|7|8][0-9]\d{8}$/.test(n.mobile)?(e.destroy(),H.server.update_custom(n,function(e){0==e.code?(H.Modal("修改成功！"),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})):$("#phone").parent().parent().addClass("has-error")},cancelCallback:function(){e.destroy()}});$("#refreshMapBtn").click(t.refreshByKeywords),t.createMap()})}},{key:"createMap",value:function(){var e=this,t=new AMap.Map("map",{resizeEnable:!0,zoom:16});t.setFitView();for(var a=function(a){var n=new AMap.Marker({position:e.state.points[a],draggable:!0,map:t});n.on("click",function(t){var n=[t.target.getPosition().lng,t.target.getPosition().lat];e.refreshAddress(a,n)}),n.on("dragend",function(t){var a=[t.target.getPosition().lng,t.target.getPosition().lat];e.movePoints(a)})},n=0;n<this.state.points.length;n++)a(n);this.setState({map:t},function(){t.setFitView()})}},{key:"refreshByKeywords",value:function(){var e=this,t=$("#fullAddress").val(),a=[];H.server.get_all_address({keyword:t,policy:1,region:"成都"},function(t){0==t.code?(t.data.tips.map(function(e){a.push([e.location.lng,e.location.lat])}),e.setState({locations:t.data.tips,points:a,changeAddress:!0},function(){e.createMap(),$("#modal-ok").attr("disabled","true"),$("#pointsInfo").val("必须选择唯一的地址")})):10106==t.code?H.overdue():H.Modal("刷新失败")})}},{key:"refreshAddress",value:function(e,t){var a=this,n=this.state.custom,o=this.state.locations[e];$("#modal-ok").removeAttr("disabled"),$("#fullAddress").val(o.address),$("#pointsInfo").val(t),$("#district").html(o.district),n.tid=o.id,n.adcode=o.adcode,n.province=o.province,n.city=o.city,n.title=o.title,n.district=o.district,this.setState({custom:n,changeAddress:!0},function(){a.state.map.setZoomAndCenter(18,t)})}},{key:"movePoints",value:function(e){var t=this;this.setState({changeAddress:!0},function(){H.server.gecode_address({lng:e[0],lat:e[1],get_poi:1},function(a){if(0==a.code){var n=t.state.custom,o=a.data.pois,r=null;console.log(o);var i=o[0]._distance;o.map(function(e){(0==e._distance||e._distance<=i)&&(i=e._distance,r=e)}),n.tid=r.id,n.adcode=r.ad_info.adcode,n.province=r.ad_info.province,n.city=r.ad_info.city,n.title=r.title,n.district=r.ad_info.district,$("#modal-ok").removeAttr("disabled"),$("#fullAddress").val(r.address),$("#pointsInfo").val(r.location.lng+","+r.location.lat),$("#district").html(r.ad_info.district),t.setState({custom:n},function(){t.state.map.setZoomAndCenter(18,e)})}else 10106==a.code?H.overdue():H.Modal("刷新失败")})})}},{key:"setPageNum",value:function(e){this.setState({page:e.page},this.getData)}},{key:"getAreaId",value:function(){return 0==this.state.currentArea?510100:this.state.areaList[this.state.currentArea-1].id}},{key:"refresh",value:function(){this.setState({currentCode:0,currentArea:0,status:"-1, 0, 1, 2",searchContext:"",page:1},this.getData)}},{key:"render",value:function(){return React.createElement("div",{className:"section-warp"},React.createElement("div",{className:"section-table"},this.createSelectArea(),React.createElement("div",{className:"col-lg-12",style:{marginTop:"30px"}},React.createElement("div",{className:"row"},React.createElement("p",{className:"col-lg-6 pull-left"},"当前结果：",this.state.total,"个客户"),React.createElement("a",{href:"javascript:;",onClick:this.refresh.bind(this),className:"col-lg-6 text-right"},"刷新")),this.createTable(),React.createElement(u.default,{maxPage:this.state.lastPage,clickCallback:this.setPageNum.bind(this)}))))}}]),t}(React.Component);t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(2),c=n(s),d=a(1),u=n(d),p=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={driverList:[],capacityList:[],status:!1,page:1,size:30,total:50},a.getData=a.getData.bind(a),a.operate=a.operate.bind(a),a}return i(t,e),l(t,[{key:"componentWillMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;new Promise(function(t){H.server.get_driver_info({page:e.state.page,size:e.state.size},function(a){0==a.code?e.setState({driverList:a.data.drivers,total:a.data.total,page:a.data.page},function(){t(a)}):10106==a.code?H.overdue():H.Modal(a.message)})}).then(function(){H.server.get_capacity_info({display:"simple"},function(t){0==t.code?e.setState({capacityList:t.data}):10106==t.code?H.overdue():H.Modal(t.message)})})}},{key:"addDriver",value:function(){var e=this;H.Modal({title:"添加司机",width:400,content:'<div class="row"><img src="/images/driverCode.png" class="img-responsive" style="display: block; margin: 0 auto"></div>',okText:"已经添加",okCallback:function(){e.getData()}})}},{key:"createTable",value:function(){var e=["ID","司机姓名","微信名","所属公司","常用电话号码","车牌号","运力名称","状态","操作"],t=["uid","name","wx_name","firm","mobile","car_no","capacity","status","operate"],a={7:{0:"已停用",1:"正常"}},n={},o={8:this.operate};return this.state.driverList.map(function(e,t){e.operate=t,1==e.status?n[t]=["停止配送"]:0==e.status&&(n[t]=["开放配送"]),n[t].push("修改"),n[t].push("删除")}),React.createElement(c.default,{values:this.state.driverList,headlines:e,order:t,bodyOperate:o,id:"driverInfo",statusOperate:n,status:a})}},{key:"operate",value:function(e){var t=this,a=$(e.target).html(),n=n=e.target.dataset.reactid.split("$")[2].split(".")[0],o=this.state.driverList[n].name,r=this.state.driverList[n].uid,i=this.state.driverList[n].wx_name,l=this.state.driverList[n].firm,s=this.state.driverList[n].mobile,c=this.state.driverList[n].car_no;switch(a){case"开放配送":H.Modal({content:"<p>是否开放司机【"+o+"】进行配送？</p>",okText:"开放配送",cancel:!0,okCallback:function(){H.server.modify_driver_state({uid:r,status:1},function(e){0==e.code?(H.Modal("您已成功开放司机【"+o+"】进行配送"),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})}});break;case"停止配送":H.Modal({content:"<p>是否停止司机【"+o+"】的配送？</p>",okText:"停止配送",cancel:!0,okCallback:function(){H.server.modify_driver_state({uid:r,status:0},function(e){0==e.code?(H.Modal("您已成功停止司机【"+o+"】的配送"),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})}});break;case"修改":var d="";this.state.capacityList.map(function(e){d+=e.name===o?'<option selected="selected" value='+e.id+">"+e.name+"</option>":"<option value="+e.id+">"+e.name+"</option>"}),H.Modal({title:"修改司机信息",width:400,content:'<div class="form-horizontal" role="form"><div class="form-group"><label class="col-lg-4 control-label">微信昵称：</label><div class="col-lg-8"><p id="wechatName" class="form-control-static">'+i+'</p></div></div><div class="form-group"><label class="col-lg-4 control-label">司机名字：</label><div class="col-lg-8"><input id="driverName" type="text" class="form-control" value='+o+'></div></div><div class="form-group"><label class="col-lg-4 control-label">所属公司：</label><div class="col-lg-8"><input id="companyName" type="text" class="form-control" value='+l+'></div></div><div class="form-group"><label class="col-lg-4 control-label">常用号码：</label><div class="col-lg-8"><input id="phoneNum" type="tel" class="form-control" value='+s+'></div></div><div class="form-group"><label class="col-lg-4 control-label">车牌号：</label><div class="col-lg-8"><input id="carNumber" type="text" class="form-control" value='+c+'></div></div><div class="form-group"><label class="col-lg-4 control-label">运力名称：</label><div class="col-lg-8"><select id="capacityName" class="form-control">'+d+"</select></div></div></div>",okText:"确认修改",cancel:!0,okCallback:function(){o=$("#driverName").val(),l=$("#companyName").val(),s=$("#phoneNum").val(),c=$("#carNumber").val();var e=$("#capacityName option:selected").val();H.server.modify_driver({uid:r,name:o,firm:l,mobile:s,car_no:c,vid:e},function(e){0==e.code?(H.Modal("修改成功！"),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})}});break;case"删除":H.Modal({content:"确认删除司机【"+o+"】的信息？",okText:"确认删除",cancel:!0,okCallback:function(){H.server.delete_driver({uid:r},function(e){0==e.code?(H.Modal("删除成功！"),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})}})}}},{key:"setPageNum",value:function(e){this.setState({page:e.page},this.getData)}},{key:"render",value:function(){return React.createElement("div",{className:"section-warp"},React.createElement("div",{className:"section-table"},React.createElement("div",{className:"section-filter"},React.createElement("form",{className:"form-inline"},React.createElement("div",{className:"filter-row"},React.createElement("a",{href:"javascript:;",onClick:this.addDriver.bind(this),className:"btn btn-lg btn-default pull-right"},"添加")))),React.createElement("div",{className:"col-lg-12",style:{marginTop:"30px"}},React.createElement("div",{className:"row"},React.createElement("p",{className:"col-lg-6"},"当前结果：",this.state.total,"个司机"),React.createElement("a",{href:"javascript:;",className:"col-lg-6 text-right",onClick:this.getData.bind(this)},"刷新")),this.createTable(),React.createElement(u.default,{maxPage:Math.ceil(this.state.total/this.state.size),clickCallback:this.setPageNum.bind(this)}))))}}]),t}(React.Component);t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(2),c=n(s),d=a(1),u=n(d),p=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={cancelList:[],senderTotal:0,waybillTotal:0,page:1,lastPage:1,size:30},a.getCancelData=a.getCancelData.bind(a),a.showWaybill=a.showWaybill.bind(a),a}return i(t,e),l(t,[{key:"componentWillMount",value:function(){this.getCancelData()}},{key:"getCancelData",value:function(){var e=this;H.server.get_canceled_waybill({status:0,start:"2010-01-01",end:H.getSouroundDate(-1),page:this.state.page,size:this.state.size},function(t){0==t.code?e.setState({cancelList:t.data.charges,senderTotal:t.data.total_shop,waybillTotal:t.data.total_delivery,page:t.data.current,lastPage:t.data.last_page}):10106==t.code?H.overdue():H.Modal(t.message)})}},{key:"createTable",value:function(){var e=["收款号","发货方","运单量","货物量","收款时间","金额/元","撤销人","撤销时间","撤销原因"],t=["id","sender","num","volume","created_at","amount","handlerName","handlerDate","handlerReason"],a={2:this.showWaybill};return this.state.cancelList.map(function(e){e.sender=e.shop.name+" ["+e.shop.mobile+"]",e.handlerName=e.cancel_info.name,e.num=e.delivery_num+"单",e.handlerReason=e.cancel_info.reason,e.handlerDate=e.cancel_info.time}),React.createElement(c.default,{values:this.state.cancelList,headlines:e,order:t,id:"cancelInfo",bodyOperate:a})}},{key:"showWaybill",value:function(e){var t=e.target.dataset.index,a=this.state.cancelList[t].deliveries,n="";a.map(function(e){n+='<div class="row col-lg-12 form-control-static"><div class="col-lg-8">'+e.day_no+'</div><div class="col-lg-4">'+e.volume+"件</div></div>"}),H.Modal({title:"运单详情",content:n,okText:"我知道了"})}},{key:"setPageNum",value:function(e){this.setState({page:e.page},this.getCancelData)}},{key:"render",value:function(){return React.createElement("div",{className:"col-lg-12 row"},React.createElement("div",{className:"row"},React.createElement("p",{className:"col-lg-6"},"当前结果：",this.state.senderTotal,"个发货人，共",this.state.waybillTotal,"个运单"),React.createElement("a",{href:"javascript:;",onClick:this.getCancelData.bind(this),className:"col-lg-6 text-right"},"刷新")),this.createTable(),React.createElement(u.default,{maxPage:this.state.lastPage,clickCallback:this.setPageNum.bind(this)}))}}]),t}(React.Component);t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(3),c=n(s),d=a(5),u=n(d),p=a(2),m=n(p),f=a(1),h=n(f),v=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={payList:[],currentUser:null,currentDate:0,start:"",end:"",senderTotal:0,waybillTotal:0,volumeTotal:0,chargeTotal:0,page:1,lastPage:1,size:30},a.getPayData=a.getPayData.bind(a),a.operate=a.operate.bind(a),a.showWaybill=a.showWaybill.bind(a),a.createSelectArea=a.createSelectArea.bind(a),a}return i(t,e),l(t,[{key:"componentWillMount",value:function(){var e=(new Date).getDay(),t=H.getSouroundDate(e),a=H.getSouroundDate(e-6);if($("#printScript").length<=0){var n='<script id="printScript" type="text/javascript" src="/js/LodopFuncs.js">';$("body").append(n)}this.setState({start:t,end:a},this.getPayData)}},{key:"getPayData",value:function(){var e=this;H.server.get_paid_waybill({status:1,start:this.state.start,end:this.state.end,page:this.state.page,size:this.state.size},function(t){0==t.code?e.setState({payList:t.data.charges,senderTotal:t.data.shop_num,waybillTotal:t.data.delivery_num,volumeTotal:t.data.volume_num,chargeTotal:t.data.amount,page:t.data.current,lastPage:t.data.last_page}):10106==t.code?H.overdue():H.Modal(t.message)})}},{key:"createSelectArea",value:function(){var e=["本周","上周","本月","上月"],t=[0,1,2,3];return React.createElement("div",{className:"section-filter",style:{paddingTop:0}},React.createElement("div",{className:"row"},React.createElement("form",{className:"form-inline col-lg-12"},React.createElement("div",{className:"filter-row"},React.createElement("label",{
style:{display:"inline-block",width:"6em"}},"配送日期"),React.createElement(c.default,{btnNames:e,bindData:t,clickCallback:this.toggleDate.bind(this),style:"btn btn-xs",activeStyle:"btn btn-xs btn-default",status:this.state.currentDate}),React.createElement("label",{style:{display:"inline-block",width:"4em",marginLeft:"50px"}},"日期"),React.createElement(u.default,{start:this.state.start,end:this.state.end,prefix:"pay_date_",otherClass:"input-sm",changeCallback:this.dateRange.bind(this)}))),React.createElement("div",{className:"form-inline col-lg-6"},React.createElement("label",{style:{display:"inline-block",width:"6em"}}),React.createElement("a",{className:"btn btn-lg btn-orange",onClick:this.select.bind(this)},"筛选"))))}},{key:"toggleDate",value:function(e){var t=e.target.dataset.index,a=this.state.start,n=this.state.end,o=(new Date).getDay();if(t!==this.state.currentDate){if(0==t)a=H.getSouroundDate(o),n=H.getSouroundDate(o-6);else if(1==t)a=H.getSouroundDate(o+7),n=H.getSouroundDate(o-6+7);else if(2==t)a=this.formatDate(new Date((new Date).getFullYear(),(new Date).getMonth(),1)),n=this.formatDate(new Date((new Date).getFullYear(),(new Date).getMonth(),this.getMonthDays((new Date).getMonth())));else if(3==t){var r=new Date;r.setDate(1),r.setMonth(r.getMonth()-1),a=this.formatDate(new Date(r.getFullYear(),r.getMonth(),1)),n=this.formatDate(new Date(r.getFullYear(),r.getMonth(),this.getMonthDays(r.getMonth())))}$("#pay_date_startTime").val(a),$("#pay_date_endTime").val(n),this.setState({currentDate:t,start:a,end:n})}}},{key:"dateRange",value:function(){var e=$("#pay_date_startTime").val(),t=$("#pay_date_endTime").val();this.setState({currentDate:4,start:e,end:t})}},{key:"getMonthDays",value:function(e){var t=new Date((new Date).getFullYear(),e,1),a=new Date((new Date).getFullYear(),e+1,1);return(a-t)/864e5}},{key:"formatDate",value:function(e){var t=e.getFullYear(),a=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();return t+"-"+a+"-"+n}},{key:"select",value:function(){this.setState({page:1},this.getPayData)}},{key:"createTable",value:function(){var e=this,t=["收款号","发货方","运单量","货物量","收款时间","金额/元","操作"],a=["id","sender","num","volume","created_at","amount","operate"],n={},o={2:this.showWaybill,6:this.operate};return this.state.payList.map(function(t,a){t.operate=a,t.sender=t.shop.name+" ["+t.shop.mobile+"]",e.state.payList.map(function(e,t){e.operate=t,e.sender=e.shop.name+" ["+e.shop.mobile+"]",e.num=e.delivery_num+"单",n[t]=["打印单据","撤销"]}),n[a]=["打印单据","撤销"]}),React.createElement(m.default,{values:this.state.payList,headlines:t,order:a,bodyOperate:o,id:"payInfo",statusOperate:n})}},{key:"operate",value:function(e){var t=this,a=$(e.target).html(),n=e.target.parentNode.dataset.index;switch(a){case"打印单据":var o="";localStorage.getItem("print")&&(o=JSON.parse(localStorage.getItem("print")).billPrinter),H.Modal({title:"打印收据",content:'<p>确认打印收据？</p><p id="notice" class="text-warning"></p><p id="print" class="text-success"></p>',cancel:!0,cancelText:"不打印了",okText:"开始打印",okCallback:function(){var e=getLodop();t.createPrintModal(t.state.payList[n]),e.SET_PRINT_PAGESIZE(0,570,1100,"note"),e.SET_PRINTER_INDEX(t.confirmPrinter(o)),e.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","note"),e.PRINT()}}),setTimeout(function(){$("#notice").html("请先在打印机配置页面配置打印机"),$("#print").html(""),$("#modal-ok").attr("disabled","true"),localStorage.getItem("print")&&($("#print").html("当前打印机："+o),$("#notice").html(""),$("#modal-ok").removeAttr("disabled"))},100);break;case"撤销":new Promise(function(e){H.server.user_info({},function(a){0==a.code?t.setState({currentUser:a.data.user_infos},function(){e(a)}):10106==a.code?H.overdue():H.Modal(a.message)})}).then(function(){var e=void 0;H.Modal({title:"撤销收款",width:500,content:'<div class="row"><div class="row col-lg-12"><div class="col-lg-8">操作员：'+t.state.currentUser.name+"["+t.state.currentUser.login_name+']</div><a href="javascript:;" class="col-lg-4 text-right btn btn-lg pull-right" id="getCode">获取验证码</a></div><div class="col-lg-12" style="margin-top: 20px"><input id="code" type="text" class="form-control" placeholder="填写验证码"></div><div class="col-lg-12" style="margin: 20px 0 20px 0"><textarea id="reason" class="form-control" placeholder="撤销原因" style="resize: none"></textarea></div></div>',okText:"确认撤销",cancel:"true",okCallback:function(){$("#getCode").html("获取验证码").removeAttr("disabled"),clearInterval(e),H.server.cancel_charge({id:t.state.payList[n].id,verify:$("#code").val(),reason:$("#reason").val()},function(e){0==e.code?(H.Modal("撤销成功!"),t.getPayData()):10106==e.code?H.overdue():H.Modal(e.message)})},cancelCallback:function(){$("#getCode").html("获取验证码").removeAttr("disabled"),clearInterval(e)}}),$("#getCode").click(function(){console.log("aaa");var a=t.state.currentUser.login_name,n=60;$("#mobile").parent().removeClass("has-error"),H.server.send_code({mobile:a},function(t){0==t.code?e=setInterval(function(){$("#getCode").html(n+"秒后重新发送").attr("disabled","true"),n--,0==n&&($("#getCode").html("获取验证码").removeAttr("disabled"),clearInterval(e))},1e3):10106==t.code?H.overdue():H.Modal(t.message)})})})}}},{key:"createPrintModal",value:function(e){LODOP=getLodop(),console.log(e),LODOP.PRINT_INITA(0,0,214,600,""),LODOP.ADD_PRINT_TEXT(17,39,100,35,"冰河物流"),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",15),LODOP.SET_PRINT_STYLEA(0,"Alignment",2),LODOP.ADD_PRINT_TEXT(39,39,100,25,"收据"),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑 Light"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.SET_PRINT_STYLEA(0,"Alignment",2),LODOP.ADD_PRINT_TEXT(71,4,100,20,"收款号:"+e.id),LODOP.ADD_PRINT_TEXT(87,4,201,20,"付款人:"+e.shop.name),LODOP.ADD_PRINT_TEXT(103,4,201,20,"电话:["+e.shop.mobile+"]"),LODOP.ADD_PRINT_TEXT(135,4,100,20,"运单:"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_LINE(125,2,126,182,4,1);var t=158;e.deliveries.map(function(e){LODOP.ADD_PRINT_TEXT(t,12,100,20,e.day_no),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_TEXT(t,145,50,20,e.volume+"件"),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),t+=20}),LODOP.ADD_PRINT_LINE(t+5,4,t+5,184,4,0),LODOP.ADD_PRINT_TEXT(t+15,5,100,20,"合计数量："+e.volume),LODOP.ADD_PRINT_TEXT(t+30,5,121,20,"实收金额："+e.amount+"元"),LODOP.ADD_PRINT_TEXT(t+45,5,198,20,"收款日期："+e.created_at),LODOP.ADD_PRINT_TEXT(t+60,5,143,20,"服务电话：028-85171136"),LODOP.ADD_PRINT_TEXT(t+75,5,195,20,"服务地址：成都市海霸王C3库外"),LODOP.ADD_PRINT_IMAGE(t+130,61,75,72,'<img src="http://'+location.host+'/images/ddayu.png" />'),LODOP.SET_PRINT_STYLEA(0,"Stretch",2),LODOP.ADD_PRINT_TEXT(t+90,5,195,38,"请妥善保管小票。如需办理退款、退货，请出示小票。"),LODOP.SET_PRINT_STYLEA(0,"FontSize",8)}},{key:"confirmPrinter",value:function(e){for(var t=getLodop(),a=t.GET_PRINTER_COUNT(),n=0;n<a;n++)if(t.GET_PRINTER_NAME(n)===e)return n}},{key:"showWaybill",value:function(e){var t=e.target.dataset.index,a=this.state.payList[t].deliveries,n="";a.map(function(e){n+='<div class="row col-lg-12 form-control-static"><div class="col-lg-8">'+e.day_no+'</div><div class="col-lg-4">'+e.volume+"件</div></div>"}),H.Modal({title:"运单详情",content:n,okText:"我知道了"})}},{key:"setPageNum",value:function(e){this.setState({page:e.page},this.getPayData)}},{key:"refresh",value:function(){var e=(new Date).getDay(),t=H.getSouroundDate(e),a=H.getSouroundDate(e-6);this.setState({currentDate:0,start:t,end:a,page:1},this.getPayData)}},{key:"render",value:function(){var e="/logistics/charge/paid/export?start="+this.state.start+"&end="+this.state.end;return React.createElement("div",{className:"section-warp"},React.createElement("div",{className:"section-table"},this.createSelectArea(),React.createElement("div",{className:"col-lg-12",style:{marginTop:"30px"}},React.createElement("div",{className:"row col-lg-12"},React.createElement("p",{className:"col-lg-6 pull-left"},"当前结果：",this.state.senderTotal,"个发货人，共",this.state.waybillTotal,"个运单，共",this.state.volumeTotal,"件，合计收款",this.state.chargeTotal,"元"),React.createElement("a",{href:e,className:"btn btn-lg btn-default pull-right",target:"_black"},"导出"),React.createElement("a",{href:"javascript:;",className:"col-lg-4 text-right pull-right",onClick:this.refresh.bind(this)},"刷新")),React.createElement("div",{className:"row col-lg-12",style:{marginTop:"30px"}},this.createTable()),React.createElement(h.default,{maxPage:this.state.lastPage,clickCallback:this.setPageNum.bind(this)}))))}}]),t}(React.Component);t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),c=n(s),d=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={unPayList:[],senderTotal:0,waybillTotal:0,page:1,lastPage:1,size:10},a.getUnPayData=a.getUnPayData.bind(a),a}return i(t,e),l(t,[{key:"componentWillMount",value:function(){if($("#printScript").length<=0){var e='<script id="printScript" type="text/javascript" src="/js/LodopFuncs.js">';$("body").append(e)}this.getUnPayData()}},{key:"getUnPayData",value:function(){var e=this;H.server.get_unpaid_waybill({page:this.state.page,size:this.state.size},function(t){0==t.code?e.setState({unPayList:t.data.shops,page:t.data.page,lastPage:t.data.last_page,senderTotal:t.data.total,waybillTotal:t.data.delivery_num}):10106==t.code?H.overdue():H.Modal(t.message)})}},{key:"createTable",value:function(){var e=void 0,t=["运单号","货物量/件","金额/元","运单日","操作"],a=[],n=[],o=[],r=null;return t.map(function(e,t){a.push(React.createElement("th",{key:"head_"+t,"data-index":t},e))}),this.state.unPayList.map(function(e,t){var a=[],o=React.createElement("tr",{key:t,className:"active","data-index":t},React.createElement("td",{colSpan:"5",className:"form-group"},React.createElement("div",{className:"col-lg-10"},"发货方：",e.name," [",e.mobile,"]"),React.createElement("div",{className:"col-lg-2"},"合计：15元",React.createElement("span",{style:{marginLeft:"15px",color:"red"}},"未收款"))));e.deliveries.map(function(t,n){a.push(React.createElement("tr",{key:"delivery_"+n,"data-index":n},React.createElement("td",null,t.day_no),React.createElement("td",null,t.volume),React.createElement("td",null,"金额/元"),React.createElement("td",null,t.day),0==n?React.createElement("td",{className:"text-center col-lg-2",rowSpan:e.deliveries.length},React.createElement("div",{className:"form-group"},React.createElement("btn",{className:"btn btn-sm"},"推送账单")),React.createElement("div",{className:"form-group"},React.createElement("btn",{className:"btn btn-sm"},"人工收款")),React.createElement("div",{className:"form-group"},React.createElement("btn",{className:"btn btn-sm"},"修改账单"))):null))}),n.push({sender:o,billList:a})}),n.map(function(e){o.push([e.sender,e.billList])}),r=React.createElement("tbody",{id:"unPay_table"},o),e=React.createElement("table",{className:"table table-bordered table-hover table-responsive"},React.createElement("thead",null,React.createElement("tr",null,a)),r)}},{key:"operate",value:function(e){var t=this,a=$(e.target).html(),n=this.state.unPayList[e.target.parentNode.parentNode.parentNode.dataset.index];switch(a){case"人工收款":for(var o=n.mobile,r=$("#unPay_table input[name=delivery_"+o+"]:checked"),i=[],l=[],s={},c=0,d=0;d<r.length;d++)i.push(n.deliveries[parseInt(r.parent().parent().parent()[d].dataset.index)].id),l.push(n.deliveries[parseInt(r.parent().parent().parent()[d].dataset.index)]);if(i.length<=0)return void H.Modal("请先选中要收款的运单。");s.deliveries=l,s.name=n.name,s.mobile=n.mobile,s.deliveries.map(function(e){c+=e.volume}),H.Modal({title:"请确认实收费用",width:400,content:'<div class="row"><div class="row col-lg-12 form-control-static"><div class="col-lg-4">运单数：</div><div class="col-lg-7">'+s.deliveries.length+'单</div></div><div class="row col-lg-12 form-control-static"><div class="col-lg-4">总数量：</div><div class="col-lg-7">'+c+'（件/袋/箱）</div></div><div class="row col-lg-12 form-control-static"><div class="col-lg-4 form-control-static">实收金额：</div><div class="col-lg-6"><input id="chargeValue" type="number" step="0.01" class="form-control" min="0"></div><p class="col-lg-1 form-control-static">元</p></div><p class="row col-lg-12 text-warning text-center" style="margin-top: 30px">保存后不允许修改。</p></div>',cancel:!0,okText:"保存",okCallback:function(){s.charge=$("#chargeValue").val(),H.server.create_charge({delivery_ids:i,charge:s.charge},function(e){if(0==e.code){var a="";localStorage.getItem("print")&&(a=JSON.parse(localStorage.getItem("print")).billPrinter),H.Modal({title:"请确认实收费用",content:'<p>确认打印收据？</p><p id="notice" class="text-warning"></p><p id="print" class="text-success"></p>',okText:"开始打印",cancelText:"不打印了",okCallback:function(){var e=getLodop();t.createPrintModal(s),e.SET_PRINT_PAGESIZE(0,570,1350,"note"),e.SET_PRINTER_INDEX(t.confirmPrinter(a)),e.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","note"),e.PRINT(),t.getUnPayData()},cancel:!0,cancelCallback:function(){t.getUnPayData()}}),setTimeout(function(){$("#notice").html("请先在打印机配置页面配置打印机"),$("#print").html(""),$("#modal-ok").attr("disabled","true"),localStorage.getItem("print")&&($("#print").html("当前打印机："+a),$("#notice").html(""),$("#modal-ok").removeAttr("disabled"))},100)}else 10106==e.code?H.overdue():H.Modal(e.message)})}});break;case"推送账单":var u=e.target.parentNode.dataset.reactid.split(".")[16].split(":")[0],p=this.state.unPayList[u].deliveries[e.target.parentNode.parentNode.dataset.index].id,m=[p];console.log(p),H.Modal({content:"确认对该条运单免单？",okText:"确认免单",cancel:!0,okCallback:function(){H.server.unpay_waybill({delivery_ids:m},function(e){0==e.code?(H.Modal("运单已免单！"),t.getUnPayData()):10106==e.code?H.overdue():H.Modal(e.message)})}});break;case"修改账单":}}},{key:"choice",value:function(e){var t=e.target.id.split("_")[1];1==e.target.checked?$('#unPay_table input[name="delivery_'+t+'"]').prop("checked","true"):$('#unPay_table input[name="delivery_'+t+'"]').removeAttr("checked")}},{key:"createPrintModal",value:function(e){var t=new Date,a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();LODOP=getLodop(),console.log(e),LODOP.PRINT_INITA(0,0,214,600,""),LODOP.ADD_PRINT_TEXT(17,39,100,35,"冰河物流"),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",15),LODOP.SET_PRINT_STYLEA(0,"Alignment",2),LODOP.ADD_PRINT_TEXT(39,39,100,25,"收据"),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑 Light"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.SET_PRINT_STYLEA(0,"Alignment",2),LODOP.ADD_PRINT_TEXT(71,4,100,20,"收款号:"),LODOP.ADD_PRINT_TEXT(87,4,201,20,"付款人:"+e.name),LODOP.ADD_PRINT_TEXT(103,4,201,20,"电话:["+e.mobile+"]"),LODOP.ADD_PRINT_TEXT(135,4,100,20,"运单:"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_LINE(125,2,126,182,4,1);var n=158;e.deliveries.map(function(e){LODOP.ADD_PRINT_TEXT(n,12,100,20,e.day_no),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_TEXT(n,145,50,20,e.volume+"件"),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),n+=20}),LODOP.ADD_PRINT_LINE(n+5,4,n+5,184,4,0),LODOP.ADD_PRINT_TEXT(n+15,5,100,20,"合计数量："+e.deliveries.length),LODOP.ADD_PRINT_TEXT(n+30,5,121,20,"实收金额："+e.charge+"元"),LODOP.ADD_PRINT_TEXT(n+45,5,198,20,"收款日期："+a),LODOP.ADD_PRINT_TEXT(n+60,5,143,20,"服务电话：028-85171136"),LODOP.ADD_PRINT_TEXT(n+75,5,195,20,"服务地址：成都市海霸王C3库外"),LODOP.ADD_PRINT_IMAGE(n+130,61,75,72,'<img src="http://'+location.host+'/images/ddayu.png" />'),LODOP.SET_PRINT_STYLEA(0,"Stretch",2),LODOP.ADD_PRINT_TEXT(n+90,5,195,38,"请妥善保管小票。如需办理退款、退货，请出示小票。"),LODOP.SET_PRINT_STYLEA(0,"FontSize",8)}},{key:"confirmPrinter",value:function(e){for(var t=getLodop(),a=t.GET_PRINTER_COUNT(),n=0;n<a;n++)if(t.GET_PRINTER_NAME(n)===e)return n}},{key:"setPageNum",value:function(e){this.setState({page:e.page},this.getUnPayData)}},{key:"render",value:function(){return React.createElement("div",{className:"section-warp"},React.createElement("div",{className:"section-table"},React.createElement("div",{className:"col-lg-12",style:{marginTop:"15px"}},React.createElement("div",{className:"row"},React.createElement("p",{className:"col-lg-9 pull-left"},"当前结果：",this.state.senderTotal,"个发货人，共",this.state.waybillTotal,"个运单"),React.createElement("div",{className:"col-lg-2 text-right"},React.createElement("btn",{className:"btn btn-lg default"},"一键推送账单")),React.createElement("a",{href:"javascript:;",className:"col-lg-1 text-right",onClick:this.getUnPayData.bind(this)},"刷新")),this.createTable(),React.createElement(c.default,{maxPage:this.state.lastPage,clickCallback:this.setPageNum.bind(this)}))))}}]),t}(React.Component);t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(3),c=n(s),d=a(22),u=n(d),p=a(23),m=n(p),f=a(24),h=n(f),v=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currentState:0,freightPanel:null},a.createSelect=a.createSelect.bind(a),a}return i(t,e),l(t,[{key:"createSelect",value:function(){var e=["未付","已付","已撤销"],t=[0,1,2];return React.createElement(c.default,{btnNames:e,bindData:t,clickCallback:this.toggle.bind(this),style:"btn btn-lg",activeStyle:"btn btn-lg btn-default",status:this.state.currentState})}},{key:"toggle",value:function(e){var t=e.target.dataset.index;t!==this.state.currentState&&this.setState({currentState:t})}},{key:"createPanel",value:function(){var e=this.state.currentState,t=null;return 0==e?t=React.createElement(h.default,null):1==e?t=React.createElement(m.default,null):2==e&&(t=React.createElement(u.default,null)),t}},{key:"render",value:function(){return React.createElement("div",{className:"section-warp"},React.createElement("div",{className:"section-table"},React.createElement("div",{className:"section-filter"},React.createElement("form",{className:"form-inline"},React.createElement("div",{className:"filter-row"},this.createSelect()))),React.createElement("div",{className:"col-lg-12"},this.createPanel())))}}]),t}(React.Component);t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(3),c=n(s),d=a(2),u=n(d),p=a(1),m=n(p),f=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currentArea:0,areaList:[],streetList:[],total:0,page:1,lastPage:1,size:30,count:0},a.getData=a.getData.bind(a),a.operate=a.operate.bind(a),a}return i(t,e),l(t,[{key:"componentWillMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;new Promise(function(t){H.server.get_all_area({id:510100},function(a){0==a.code?e.setState({areaList:a.data.children},function(){t(a)}):10106==a.code?H.overdue():H.Modal(a.message)})}).then(function(){var t=e.getAreaId();H.server.get_logistic_street({id:t,page:e.state.page,size:e.state.size},function(t){0==t.code?e.setState({streetList:t.data.streets,total:t.data.total,page:t.data.page,lastPage:t.data.last_page}):10106==t.code?H.overdue():H.Modal(t.message)})})}},{key:"createArea",value:function(){var e=[],t=[];return e.push("全部"),t.push(0),this.state.areaList.map(function(a,n){e.push(a.name+"("+(n+1<10?"0"+(n+1):n+1)+")"),t.push(n+1)}),React.createElement("form",{className:"form-inline col-lg-12"},React.createElement("div",{className:"filter-row"},React.createElement(c.default,{btnNames:e,bindData:t,clickCallback:this.toggleArea.bind(this),style:"btn btn-xs",activeStyle:"btn btn-xs btn-default",status:this.state.currentArea})))}},{key:"toggleArea",value:function(e){var t=e.target.dataset.index;t!==this.state.currentArea&&this.setState({page:1,currentArea:t},this.getData)}},{key:"createTable",value:function(){var e=["提货码前缀","街道名/乡镇","区县","用户数","状态","操作"],t=["code","name","district","user_num","status","operate"],a={4:{0:"未开通",1:"已开通"}},n={},o={5:this.operate};return this.state.streetList.map(function(e,t){e.code=H.getLadingCode(e.code,[2,3]),e.operate=t,1==e.status?n[t]=["暂停"]:n[t]=["开通"]}),React.createElement(u.default,{values:this.state.streetList,headlines:e,order:t,bodyOperate:o,id:"logisticArea",statusOperate:n,status:a})}},{key:"operate",value:function(e){var t=this,a=$(e.target).html(),n=e.target.dataset.reactid.split("$")[2].split(".")[0],o=this.state.streetList[n].name,r=this.state.streetList[n].district,i=this.state.streetList[n].id,l=this.state.streetList[n].status,s="",c="",d="";switch(a){case"暂停":l=0,s="确认暂停"+r+o+"的配送？",c="确认暂停",d="已暂停"+r+o+"的配送";break;case"开通":l=1,s="确认开通"+r+o+"的配送？",c="确认开通",d="已开通"+r+o+"的配送了"}H.Modal({content:s,okText:c,cancel:!0,okCallback:function(){H.server.change_street_state({id:i,status:l},function(e){0==e.code?(H.Modal(d),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})}})}},{key:"setPageNum",value:function(e){this.setState({page:e.page},this.getData)}},{key:"getAreaId",value:function(){return 0==this.state.currentArea?510100:this.state.areaList[this.state.currentArea-1]?this.state.areaList[this.state.currentArea-1].id:510100}},{key:"render",value:function(){return React.createElement("div",{className:"section-warp"},React.createElement("div",{className:"section-table"},React.createElement("div",{className:"section-filter"},this.createArea()),React.createElement("div",{className:"col-lg-12"},React.createElement("div",{className:"row"},React.createElement("p",{className:"col-lg-6"},"当前结果：",this.state.total,"个街道"),React.createElement("a",{href:"javascript:;",className:"col-lg-6 text-right",onClick:this.getData.bind(this)},"刷新")),this.createTable(),React.createElement(m.default,{maxPage:this.state.lastPage,clickCallback:this.setPageNum.bind(this)}))))}}]),t}(React.Component);t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(1),d=n(c),u=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currentStep:1,shopList:void 0,addressList:[],saveAddress:[],printAddress:[],currentAddress:null,changeAddress:!1,volumes:[],locations:[],points:[],custom:{},currentPoint:null,currentShop:null,newAddress:null,leftStatus:!1,map:null,panel:null,page:1,lastPage:1,size:9999999,total:0},a.createLeft=a.createLeft.bind(a),a.createRight=a.createRight.bind(a),a.refreshPoints=a.refreshPoints.bind(a),a.refreshAddress=a.refreshAddress.bind(a),a.createMap=a.createMap.bind(a),a.addCustom=a.addCustom.bind(a),a.movePoint=a.movePoint.bind(a),a}return l(t,e),s(t,[{key:"componentWillMount",value:function(){if($("#mapScript").length<=0){var e='<script id="mapScript" type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=56e401b127998ede0364e18d6877f0f1&plugin=AMap.Geocoder,AMap.MouseTool,AMap.PolyEditor"></script>';$("body").append(e)}if($("#printScript").length<=0){var t='<script id="printScript" type="text/javascript" src="/js/LodopFuncs.js">';$("body").append(t)}}},{key:"createLeft",value:function(){var e=this,t=void 0,a=this.state.leftStatus,n=[];if(this.state.shopList){var o=[];this.state.shopList instanceof Array?o=this.state.shopList:o.push(this.state.shopList),o.map(function(t,a){n.push(React.createElement("label",{key:a,htmlFor:"shop_"+a,className:"row form-group","data-index":a,style:{display:"block"}},React.createElement("div",{className:"col-lg-1"},React.createElement("input",{name:"shop",id:"shop_"+a,type:"radio",value:a,className:"form-control",onChange:e.changeRadio.bind(e)})),React.createElement("div",{className:"col-lg-1 form-control-static"},t.uid),React.createElement("div",{className:"col-lg-3 form-control-static"},t.name),React.createElement("div",{className:"col-lg-3 form-control-static"},t.mobile),React.createElement("div",{className:"col-lg-4 form-control-static"},t.address)))})}return t=React.createElement("div",{className:"col-lg-4"},React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},"选择（填写）发货人"),React.createElement("div",{className:"panel-body"},React.createElement("div",{id:"searchBox",className:"row form-group"},React.createElement("div",{className:"col-lg-2 form-control-static"},"店铺名"),React.createElement("div",{className:"col-lg-6"},React.createElement("input",{id:"search",type:"search",className:"form-control",placeholder:"搜索店铺名"})),React.createElement("div",{className:"col-lg-4"},React.createElement("a",{href:"javascript:;",className:"btn btn-default btn-lg",onClick:this.search.bind(this)},"搜索"))),this.state.shopList&&!a?React.createElement("div",{id:"shopList",className:"new-shop",style:{overflow:"auto",height:"500px"}},React.createElement("h4",{className:"text-success"},"请选择一个店铺，查看提货地址"),React.createElement("label",{className:"row form-group",style:{display:"block"}},React.createElement("div",{className:"col-lg-1"}),React.createElement("div",{className:"col-lg-1 form-control-static"},"ID"),React.createElement("div",{className:"col-lg-3 form-control-static"},"店铺名"),React.createElement("div",{className:"col-lg-3 form-control-static"},"联系电话"),React.createElement("div",{className:"colnp-lg-4 form-control-static"},"详细地址")),n,React.createElement("a",{href:"javascript:;",className:"btn btn-lg btn-default",onClick:this.toggleLeft.bind(this)},"手动添加发货人")):React.createElement("div",{className:"new-shop"},React.createElement("h4",{id:"notice",className:"text-danger"},"请先搜索店铺"),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-lg-2 form-control-static"},"店铺名："),React.createElement("div",{className:"col-lg-10"},React.createElement("input",{id:"shop",type:"text",className:"form-control",disabled:"disabled"}))),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-lg-2 form-control-static"},"手机号："),React.createElement("div",{className:"col-lg-10"},React.createElement("input",{id:"mobile",type:"tel",className:"form-control",disabled:"disabled"}))),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-lg-2 form-control-static"},"地址："),React.createElement("div",{className:"col-lg-10"},React.createElement("input",{id:"address",type:"text",className:"form-control",disabled:"disabled"}))),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-lg-4 col-lg-push-2"},React.createElement("a",{id:"register",href:"javascript:;",className:"btn btn-lg",onClick:this.register.bind(this),disabled:"disabled"},"注册商家")))))))}},{key:"toggleLeft",value:function(){this.setState({leftStatus:!0},function(){$("#notice").removeClass("text-danger").addClass("text-success").html("未查询到该商家，请创建一个新的商家。"),$(".new-shop").find("input").removeAttr("disabled"),$("#register").addClass("btn-default").removeAttr("disabled")})}},{key:"search",value:function(){var e=this;""==$("#search").val()?$("#searchBox").addClass("has-error"):($("#searchBox").removeClass("has-error"),H.server.shop_search({search:$("#search").val()},function(t){0==t.code?e.setState({shopList:t.data,leftStatus:!1},function(){$("#notice").removeClass("text-danger").addClass("text-success").html("未查询到该商家，请创建一个新的商家。"),$(".new-shop").find("input").removeAttr("disabled"),$("#register").addClass("btn-default").removeAttr("disabled")}):10106==t.code?H.overdue():H.Modal(t.message)}))}},{key:"register",value:function(){var e=this,t=$("#shop").val(),a=$("#mobile").val(),n=$("#address").val(),o=[];$(".new-shop").find("input").parent().removeClass("has-error"),""==t&&($("#shop").parent().addClass("has-error"),o.push(1)),""==a&&($("#mobile").parent().addClass("has-error"),o.push(2)),""==n&&($("#address").parent().addClass("has-error"),o.push(3)),0==o.length&&H.server.sign_shop({name:t,mobile:a,address:n},function(t){0==t.code?e.setState({currentShop:t.data,shopList:t.data,leftStatus:!1},function(){e.createLeft(),e.createRight()}):10106==t.code?H.overdue():H.Modal(t.message)})}},{key:"changeRadio",value:function(){var e=this,t=$('#shopList input[type="radio"]:checked').val(),a=0,n=void 0;this.state.shopList instanceof Array?(a=this.state.shopList[t].uid,n=this.state.shopList[t]):(a=this.state.shopList.uid,n=this.state.shopList),$(".volume").val(0),this.setState({currentShop:n,currentStep:1},function(){e.getAddress(a)})}},{key:"getAddress",value:function(e){var t=this;H.server.get_address({id:e,page:this.state.page,size:this.state.size},function(e){0==e.code?t.setState({addressList:e.data.customs,page:e.data.current_page,lastPage:e.data.last_page,total:e.data.total}):10106==e.code?H.overdue():H.Modal(e.message)})}},{key:"createRight",value:function(){var e=this,t=void 0,a=[],n=[],o=this.state.addressList;return this.state.currentShop?(this.state.saveAddress.map(function(e,t){var a=H.getLadingCode(e.code,[2,3,4]);n.push(React.createElement("li",{
key:"list_"+t,className:"list-group-item",style:{overflow:"hidden"},"data-index":t},React.createElement("label",{htmlFor:"addr_"+t,className:"control-label col-lg-12"},React.createElement("p",{className:"form-control-static"},"运单号：",e.day_no),React.createElement("p",{className:"form-control-static"},e.custom.name,"，",e.custom.mobile),React.createElement("p",{className:"form-control-static"},"提货码：",a),React.createElement("p",{className:"form-control-static"},"件数：",e.volume))))}),this.state.addressList.map(function(t,n){var o=H.getLadingCode(t.code,[2,3,4]);a.push(React.createElement("li",{key:"address_"+n,className:"list-group-item",style:{overflow:"hidden"},"data-index":n},React.createElement("label",{htmlFor:"addr_"+n,className:"control-label col-lg-12"},React.createElement("div",{className:"col-lg-10"},React.createElement("p",{className:"form-control-static"},t.name,"，",t.mobile),React.createElement("p",{className:"form-control-static"},"提货码：",o),React.createElement("p",{className:"form-control-static"},"提货地址：",t.address.full),0==t.available?React.createElement("p",{className:"form-control-static text-danger"},"此地址不可送"):React.createElement("div",{className:"form-group col-lg-5"},React.createElement("p",{className:"col-lg-4 form-control-static"},"件数"),React.createElement("div",{className:"col-lg-8"},React.createElement("input",{type:"number",className:"volume form-control",defaultValue:0,min:0,step:1,onKeyUp:e.checkNumber.bind(e)})))),React.createElement("div",{className:"col-lg-1"},React.createElement("p",{className:"form-control-static text-center"},React.createElement("a",{href:"javascript:;","data-uid":t.uid,"data-index":n,onClick:e.updateCustom.bind(e),style:{textDecoration:"underline"}},"修改")),React.createElement("p",{className:"form-control-static text-center"},0==t.available?null:React.createElement("input",{id:"addr_"+n,className:"checked",type:"checkbox",style:{visibility:"hidden"},"data-uid":t.uid,"data-index":n,defaultChecked:"defaultChecked"}))))))}),1==this.state.currentStep?t=React.createElement("div",{className:"col-lg-8"},React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},"批量选择提货地址",React.createElement("a",{href:"javascript:;",className:"btn btn-default pull-right",onClick:this.addCustom.bind(this)},"添加收货人")),o.length>0?React.createElement("div",{className:"panel-body",style:{overflow:"auto",height:"640px"}},React.createElement("ul",{id:"addressList",className:"list-group"},a),React.createElement(d.default,{maxPage:Math.ceil(this.state.lastPage),clickCallback:this.setPageNum.bind(this)})):React.createElement("div",{className:"panel-body",style:{overflow:"auto",height:"640px"}},React.createElement("h1",null,"暂无收货人")),React.createElement("div",{className:"panel-footer"},o.length>0?React.createElement("a",{href:"javascript:;",className:"btn btn-default btn-lg",onClick:this.saveCustom.bind(this)},"生成运单"):React.createElement("a",{href:"javascript:;",className:"btn btn-lg",disabled:"disabled"},"生成运单")))):2==this.state.currentStep&&(t=React.createElement("div",{className:"col-lg-8"},React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},"保存成功"),React.createElement("div",{className:"panel-body"},React.createElement("ul",{id:"addressList",className:"list-group"},n))))),t):null}},{key:"checkNumber",value:function(e){return/^\d+$/.test($(e.target).val())||$(e.target).val(/^\d+/.exec($(e.target).val())),!1}},{key:"setPageNum",value:function(e){this.setState({page:e.page},this.changeRadio)}},{key:"addCustom",value:function(){var e=this,t=[];t.push(0);for(var a=0;a<$(".volume").length;a++)t.push($(".volume").get(a).value);this.setState({points:[],volumes:t,currentAddress:null,changeAddress:!1,locations:[],custom:{}});var n=H.Modal({title:"添加收货人",width:600,autoClose:!1,content:'<div class="row"><div class="col-lg-12 form-horizontal"><div class="form-group"><label class="col-lg-3 control-label">收货人：</label><div class="col-lg-8"><input id="customName" class="form-control" type="text" value=""/></div></div><div class="form-group"><label class="col-lg-3 control-label">收货电话：</label><div class="col-lg-8"><input id="customMobile" class="form-control" type="text" value=""/></div></div><div class="form-group"><label class="col-lg-3 control-label">收货地址：</label><div class="col-lg-8"><input id="customAddress" class="form-control" type="text" value=""/></div></div><div class="form-group"><label class="col-lg-3 control-label">坐标：</label><div class="col-lg-6"><input id="pointsInfo" class="form-control" type="text" value="" readonly /></div><a href="javascript:;" id="refreshMapBtn" class="col-lg-2 form-control-static">刷新坐标</a></div><div id="map" class="map-content col-lg-10 col-lg-push-1" style="width:470px;height:200px"></div></div></div>',okText:"确认添加收货人",cancel:!0,okCallback:function(){var a=$("#customMobile").val();if(""==a)$("#customMobile").parent().addClass("has-error");else{var o=$('#shopList input[type="radio"]:checked').val(),r=$("#customMobile").val(),i={},l={};if(l.id=e.state.shopList[o].uid,l.name=$("#customName").val(),l.mobile=$("#customMobile").val(),e.state.changeAddress===!0&&(i={id:e.state.custom.tid,title:e.state.custom.title,address:$("#customAddress").val(),type:0,location:{lat:$("#pointsInfo").val().split(",")[1],lng:$("#pointsInfo").val().split(",")[0]},adcode:e.state.custom.adcode},l.address=i),""==r)return void $("#customMobile").parent().addClass("has-error");if(e.state.changeAddress===!1)return $("#customAddress").parent().addClass("has-error"),void $("#pointsInfo").val("请先刷新坐标").parent().addClass("has-error");H.server.add_custom_address(l,function(a){if(0==a.code){H.Modal("新增成功"),e.changeRadio("current"),console.log(t);for(var n=0;n<$(".volume").length;n++)$(".volume").get(n).value=t[n]}else 10106==a.code?H.overdue():H.Modal(a.message)}),n.destroy()}},cancelCallback:function(){n.destroy()}});$("#refreshMapBtn").click(this.refreshPoints)}},{key:"updateCustom",value:function(e){var t,a=this,n=$(e.target).data("index"),r=this.state.addressList[n],i=[[r.address.lng,r.address.lat]];this.setState((t={points:[r[n]],currentAddress:null,changeAddress:!1,locations:[]},o(t,"points",i),o(t,"custom",{}),t),function(){var e=H.Modal({title:"修改收货人",width:600,autoClose:!1,content:'<div class="row"><div class="col-lg-12 form-horizontal"><div class="form-group"><label class="col-lg-3 control-label">收货人：</label><div class="col-lg-8"><input id="customName" class="form-control" type="text" value="'+r.name+'"/></div></div><div class="form-group"><label class="col-lg-3 control-label">收货电话：</label><div class="col-lg-8"><input id="customMobile" class="form-control" type="text" value="'+r.mobile+'"/></div></div><div class="form-group"><label class="col-lg-3 control-label">收货地址：</label><div class="col-lg-8"><input id="customAddress" class="form-control" type="text" value="'+r.address.full+'"/></div></div><div class="form-group"><label class="col-lg-3 control-label">坐标：</label><div class="col-lg-6"><input id="pointsInfo" class="form-control" type="text" readonly value="'+r.address.lng+","+r.address.lat+'"/></div><a href="javascript:;" id="refreshMapBtn" class="col-lg-2 form-control-static">刷新坐标</a></div><div id="map" class="map-content col-lg-10 col-lg-push-1" style="width:470px;height:200px"></div></div></div>',okText:"确认修改收货人",cancel:!0,okCallback:function(){var t=$("#customMobile").val();if(""==t)$("#customMobile").parent().addClass("has-error");else{var n=$('#shopList input[type="radio"]:checked').val(),o=$("#customMobile").val(),i={};if(i.id=a.state.shopList[n].uid,i.uid=r.uid,i.name=$("#customName").val(),i.mobile=$("#customMobile").val(),a.state.changeAddress===!0){var l={id:a.state.custom.tid,title:a.state.custom.title,address:$("#customAddress").val(),type:0,location:{lat:$("#pointsInfo").val().split(",")[1],lng:$("#pointsInfo").val().split(",")[0]},adcode:a.state.custom.adcode};i.address=l}if(""==o)return void $("#customMobile").parent().addClass("has-danger");H.server.update_custom_address(i,function(e){0==e.code?(H.Modal("修改成功"),a.changeRadio()):10106==e.code?H.overdue():H.Modal(e.message)}),e.destroy()}},cancelCallback:function(){e.destroy()}});$("#refreshMapBtn").click(a.refreshPoints),a.createMap()})}},{key:"refreshPoints",value:function(){var e=this,t=$("#customAddress").val();""!=t&&($("#customMobile").parent().removeClass("has-error"),$("#customAddress").parent().removeClass("has-error"),$("#pointsInfo").parent().removeClass("has-error"),H.server.get_all_address({keyword:t,region:"成都",policy:1},function(t){if(0==t.code){var a=t.data.tips,n=[];t.data.tips.map(function(e){n.push([e.location.lng,e.location.lat])}),e.setState({points:n,locations:a},function(){e.createMap(),$("#tId").val(t.data.tips[0].id),$("#adcode").val(t.data.tips[0].adcode),$("#typecode").val(t.data.tips[0].typecode),$("#pointsInfo").val("必须选择唯一的地址")})}else 10106==t.code?H.overdue():H.Modal(t.message)}))}},{key:"refreshAddress",value:function(e,t){var a=this,n=this.state.custom,o=this.state.locations[e];$("#modal-ok").removeAttr("disabled"),$("#customAddress").val(o.address),$("#pointsInfo").val(t),n.tid=o.id,n.adcode=o.adcode,n.province=o.province,n.city=o.city,n.title=o.title,n.district=o.district,this.setState({custom:n,changeAddress:!0},function(){a.state.map.setZoomAndCenter(18,t)})}},{key:"movePoint",value:function(e){var t=this;this.setState({changeAddress:!0},function(){H.server.gecode_address({lng:e[0],lat:e[1],get_poi:1},function(a){if(0==a.code){var n=t.state.custom,o=a.data.pois,r=null,i=o[0]._distance;o.map(function(e){(0==e._distance||e._distance<=i)&&(i=e._distance,r=e)}),n.tid=r.id,n.adcode=r.ad_info.adcode,n.province=r.ad_info.province,n.city=r.ad_info.city,n.title=r.title,n.district=r.ad_info.district,$("#modal-ok").removeAttr("disabled"),$("#customAddress").val(r.address),$("#pointsInfo").val(r.location.lng+","+r.location.lat),t.setState({custom:n},function(){t.state.map.setZoomAndCenter(18,e)})}else 10106==a.code?H.overdue():H.Modal("刷新失败")})})}},{key:"createMap",value:function(){var e=this,t=new AMap.Map("map",{resizeEnable:!0,zoom:16});t.setFitView();for(var a=function(a){var n=new AMap.Marker({position:e.state.points[a],draggable:!0});n.on("click",function(t){var n=[t.target.getPosition().lng,t.target.getPosition().lat];e.refreshAddress(a,n)}),n.on("dragend",function(t){var a=[t.target.getPosition().lng,t.target.getPosition().lat];e.movePoint(a)}),n.setMap(t)},n=0;n<this.state.points.length;n++)a(n);this.setState({map:t},function(){t.setFitView()})}},{key:"saveCustom",value:function(){var e=this;H.Modal({content:"确认保存今日收货人？",okText:"保存收货人",cancel:!0,okCallback:function(){for(var t=$('#shopList input[type="radio"]:checked').val(),a=[],n={},o=document.getElementsByClassName("checked"),r=document.getElementsByClassName("volume"),i=0;i<o.length;i++)r[i].value>0&&a.push({uid:o[i].dataset.uid,volume:r[i].value});console.log(a),n.id=e.state.shopList[t].uid,n.customs=a,H.server.send_order(n,function(t){0==t.code?e.setState({currentStep:2,saveAddress:t.data}):10106==t.code?H.overdue():H.Modal(t.message)})}})}},{key:"print",value:function(e){var t=this,a=$(e.target).html(),n=e.target.dataset.index,o="",r=void 0,i="";switch(a){case"打印运单":if(localStorage.getItem("print")){var l=this.state.saveAddress[n].id;H.server.get_current_waybill({id:l},function(e){0==e.code?(i="运单",r=e.data,o=JSON.parse(localStorage.getItem("print")).waybillPrinter):10106==e.code?H.overdue():H.Modal(e.message)})}break;case"打印标签":if(localStorage.getItem("print")){var s=this.state.saveAddress[n].id;H.server.get_current_waybill({id:s},function(e){0==e.code?(i="标签",r=e.data,o=JSON.parse(localStorage.getItem("print")).tagPrinter):10106==e.code?H.overdue():H.Modal(e.message)})}break;case"打印全部运单":localStorage.getItem("print")&&this.setState({printAddress:[]},function(){t.state.saveAddress.map(function(e){var a=e.id;H.server.get_current_waybill({id:a},function(e){0==e.code?(r.push(e.data),t.setState({printAddress:r})):10106==e.code?H.overdue():H.Modal(e.message)})}),r=t.state.printAddress,i="运单",o=JSON.parse(localStorage.getItem("print")).waybillPrinter});break;case"打印全部标签":localStorage.getItem("print")&&this.setState({printAddress:[]},function(){t.state.saveAddress.map(function(e){var a=e.id;H.server.get_current_waybill({id:a},function(e){0==e.code?(r.push(e.data),t.setState({printAddress:r})):10106==e.code?H.overdue():H.Modal(e.message)})}),i="标签",r=t.state.printAddress,o=JSON.parse(localStorage.getItem("print")).tagPrinter})}H.Modal({title:a,content:"<p>确认"+a+'</p><p id="notice" class="text-warning"></p><p id="print" class="text-success"></p>',cancel:!0,cancelText:"不打印了",okText:"开始打印",okCallback:function(){var e=getLodop();"运单"==i?(t.createWaybillModal(r),e.SET_PRINT_PAGESIZE(0,2200,1405,"bills"),e.SET_PRINTER_INDEX(t.confirmPrinter(o)),e.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","bills")):"标签"==i&&(t.createTagModal(r),e.SET_PRINT_PAGESIZE(0,400,300,"tags"),e.SET_PRINTER_INDEX(t.confirmPrinter(o)),e.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","tags")),e.PRINT()}});var c=setInterval(function(){""!=o&&($("#notice").html("请先在打印机配置页面配置打印机"),$("#print").html(""),$("#modal-ok").attr("disabled","true"),localStorage.getItem("print")&&($("#print").html("当前打印机："+o),$("#notice").html(""),$("#modal-ok").removeAttr("disabled")),clearInterval(c))},200)}},{key:"createWaybillModal",value:function(e){var t=[];LODOP=getLodop(),e instanceof Array?t=e:t.push(e),t.map(function(e){var t=e.info?e.info.note:"";LODOP.NewPage(),LODOP.SET_PRINT_STYLEA(0,"FontName","楷体"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.SET_PRINT_STYLEA(0,"FontColor","#0080FF"),LODOP.SET_PRINT_STYLEA(0,"Alignment",2),LODOP.ADD_PRINT_TEXT(32,218,179,40,"大鱼物流配送单"),LODOP.SET_PRINT_STYLEA(0,"FontSize",18),LODOP.ADD_PRINT_TEXT(47,44,151,22,"服务、投诉电话：130 5864 1397"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.ADD_PRINT_TEXT(64,42,155,20,"网点：成都海霸王冻品区16栋外"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.ADD_PRINT_RECT(97,46,330,160,0,1),LODOP.ADD_PRINT_RECT(97,419,330,160,0,1),LODOP.ADD_PRINT_TEXT(18,540,90,25,"运 单 号："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(37,540,90,26,"配送日期："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(55,540,90,30,"货 架 号："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(19,628,136,30,e.day_no),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.SET_PRINT_STYLEA(0,"FontColor","#FF0000"),LODOP.ADD_PRINT_TEXT(38,628,100,30,e.day),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(58,628,100,31,H.getLadingCode(e.code,[2,3],"-")),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(136,64,305,25,"发货人："+e.shop.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(160,64,305,25,"发货人电话："+e.shop.mobile),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(113,228,141,25,"发货地：海霸王"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(109,572,168,30,"提货码："+H.getLadingCode(e.code,[2,3,4])),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(162,436,305,25,"物流区域："+e.address.area.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(211,436,305,45,"提货地址："+e.address.full),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(137,436,305,25,"提货人："+e.custom.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(186,436,305,25,"提货电话："+e.custom.mobile),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_RECT(277,47,330,135,0,1),LODOP.ADD_PRINT_RECT(278,419,330,135,0,1),LODOP.ADD_PRINT_TEXT(292,65,40,25,"货物"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(317,65,305,25,"货物件数（袋、箱）："+e.volume),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(342,65,305,25,"备注："+t),LODOP.ADD_PRINT_RECT(370,226,142,37,0,1),LODOP.ADD_PRINT_TEXT(383,233,43,24,"签字"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(292,437,61,24,"代收货款"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(317,438,305,25,"货款："+e.amount),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(380,438,100,25,"客户签字："),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(447,59,38,21,"说明："),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.SET_PRINT_STYLEA(0,"FontColor","#C0C0C0"),LODOP.ADD_PRINT_TEXT(459,84,529,31,"1、第一联（白单）公司存档，第二联（红单）发货方存档，第三联（蓝单）司机存档，第四联（黄单）提货方存档；\r\n2、本物流公司对货品质量概不负责，退货请双方沟通后联系司机取货，退货费10元起（小件8元，大件10元，泡沫箱20元）；"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.SET_PRINT_STYLEA(0,"FontColor","#C0C0C0")})}},{key:"createTagModal",value:function(e){var t=[];LODOP=getLodop(),e instanceof Array?t=e:t.push(e),t.map(function(e){for(var t=0;t<e.volume;t++)LODOP.NewPage(),LODOP.ADD_PRINT_RECT(2,0,70,25,0,1),LODOP.ADD_PRINT_TEXT(9,2,86,20,"提货:"+H.getLadingCode(e.code,[2,3,4])),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_RECT(2,73,70,25,0,1),LODOP.ADD_PRINT_TEXT(9,78,74,20,"货架:"+H.getLadingCode(e.code,[2,3],"-")),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_TEXT(35,-1,153,20,"物流线:"+e.address.area.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_TEXT(55,-1,123,20,"发货方:"+e.shop.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_TEXT(75,-1,123,20,"收货方:"+e.custom.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_TEXT(94,-1,122,20,"货品：合计"+e.volume+"件")})}},{key:"confirmPrinter",value:function(e){for(var t=getLodop(),a=t.GET_PRINTER_COUNT(),n=0;n<a;n++)if(t.GET_PRINTER_NAME(n)===e)return n}},{key:"render",value:function(){return React.createElement("div",{className:"waybill-info-container"},React.createElement("div",{className:"waybill-info-head container-fluid"},React.createElement("h3",{className:"title"},"录单",React.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:this.props.closePanel,style:{fontSize:"40px"}},"×")),React.createElement("hr",null),React.createElement("div",{className:"waybill-info-content"},this.createLeft(),this.createRight())))}}]),t}(React.Component);t.default=u},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={merchant:[],points:[],markers:[],unMarkers:[],distributedArea:{},disCount:{},listPanelInfo:[],driverList:[],checkedDriverList:[],checkedColor:{},capacityInfo:{},waybillStatics:{},map:null,dbEvent:null,totalCustoms:0,currentPage:1,size:50,currentStep:1},o.getData=o.getData.bind(o),o.initData=o.initData.bind(o),o.initDriver=o.initDriver.bind(o),o.buildTodayDriver=o.buildTodayDriver.bind(o),o.operate=o.operate.bind(o),o.drawDistribution=o.drawDistribution.bind(o),o.updateDistribution=o.updateDistribution.bind(o),o.createTask=o.createTask.bind(o),o}return o(t,e),r(t,[{key:"componentWillMount",value:function(){if($("#mapScript").length<=0){var e='<script id="mapScript" type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=56e401b127998ede0364e18d6877f0f1&plugin=AMap.Geocoder,AMap.MouseTool,AMap.PolyEditor"></script>';$("body").append(e)}if($("#printScript").length<=0){var t='<script id="printScript" type="text/javascript" src="/js/LodopFuncs.js">';$("body").append(t)}this.getData()}},{key:"initData",value:function(){var e=this,t=this.state.merchant;this.state.points&&this.state.points.map(function(e){t.push({points:[e.address.lng,e.address.lat],title:e.address.title,address:e.address.full,driver:e.driver,area:e.address.area.name,code:e.code,id:e.id,dayNo:e.day_no,volume:e.volume})}),this.setState({merchant:t},function(){$("#mapScript").length>0&&e.initMap()})}},{key:"initMap",value:function(){var e=new AMap.Map("map",{resizeEnable:!0,zoom:12,doubleClickZoom:!1}),t=[],a=this.state.points,n={},o=this.state.waybillStatics.customs;AMap.plugin(["AMap.ToolBar","AMap.Scale"],function(){e.addControl(new AMap.ToolBar),e.addControl(new AMap.Scale)}),a.map(function(a){if(a.lng&&a.lat){var o=new AMap.Marker({extData:{point:a},position:[a.lng,a.lat],draggable:!1,icon:"http://webapi.amap.com/theme/v1.3/markers/n/mark_r.png",cursor:"pointer"}),r=new AMap.InfoWindow({offset:new AMap.Pixel(0,-30)}),i="";o.setMap(e),o.emit("click",{target:o}),o.on("click",function(t){r.setContent(i),r.open(e,t.target.getPosition())});var l=!1;a.customs.map(function(e){e.deliveries.map(function(e){i+="运单号："+e.day_no+"<br/>"+e.custom.name+"<br/>"+a.full+"<br/>共"+e.volume+"件货<hr/>",e.driver?(n[e.driver.uid]||(n[e.driver.uid]={markers:[],polygon:null},n[e.driver.uid].markers.push(o)),o.setIcon("")):l=!0})}),l&&t.push(o)}}),this.setState({map:e,markers:t,unMarkers:t,merchant:a,totalCustoms:o,distributedArea:n}),$("#driver-panel").fadeIn("slow"),$("#task").fadeIn("slow")}},{key:"initDriver",value:function(){var e=this,t=[];this.state.driverList.map(function(a,n){var o=!1;e.state.checkedDriverList.map(function(e){e.uid==a.uid&&(o=!0)}),e.state.capacityInfo[a.capacity]&&1==a.status&&t.push(React.createElement("li",{key:n,className:"list-group-item","data-index":n},React.createElement("label",{htmlFor:"driver-info-"+n,className:"col-lg-11"},React.createElement("div",{className:"row",style:{marginBottom:"10px"}},React.createElement("div",{className:"col-lg-5"},a.name),React.createElement("div",{className:"col-lg-6"},a.mobile)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-5"},a.capacity),React.createElement("div",{className:"col-lg-6"},"[",a.car_no,"]")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12",style:{marginTop:"10px"}},"上限数：",e.state.capacityInfo[a.capacity][0]+"户，"+e.state.capacityInfo[a.capacity][1]+"件"))),o?React.createElement("input",{id:"driver-info-"+n,"data-index":n,className:"col-lg-1 check",type:"checkbox",defaultChecked:o}):React.createElement("input",{id:"driver-info-"+n,"data-index":n,className:"col-lg-1 check",type:"checkbox"})))}),this.setState({listPanelInfo:t})}},{key:"getData",value:function(){var e=this;new Promise(function(t){console.log(e.state.currentPage),console.log(e.state.size),H.server.get_driver_info({page:e.state.currentPage,size:e.state.size},function(a){0==a.code?e.setState({driverList:a.data.drivers},function(){t(a)}):10106==a.code?H.overdue():H.Modal(a.message)})}).then(function(){var t={};H.server.get_capacity_info({display:"all"},function(a){0==a.code?(a.data.map(function(e){t[e.name]=[e.bill_max,e.pack_max]}),e.setState({capacityInfo:t})):10106==a.code?H.overdue():H.Modal(a.message)})}).then(function(){H.server.get_today_waybill({},function(t){0==t.code?e.setState({waybillStatics:t.data}):10106==t.code?H.overdue():H.Modal(t.message)})}).then(function(){H.server.get_all_points({},function(t){0==t.code?e.setState({points:t.data},function(){setTimeout(function(){e.initDriver(),$("#mapScript").length>0&&e.initMap()},500)}):10106==t.code?H.overdue():H.Modal(t.message)})})}},{key:"createDriver",value:function(){var e=[],t=null,a=null;return 1==this.state.currentStep?(t="请勾选今日出勤的司机",a="下一步"):2==this.state.currentStep?(t="今日出勤的司机",a="保存"):3==this.state.currentStep&&(t="今日出勤的司机",a="全部打印"),e=React.createElement("div",{id:"driver-panel",className:"driver-panel"},React.createElement("div",{className:"driver-head"},2==this.state.currentStep?React.createElement("span",{className:"back",onClick:this.backTo.bind(this)}):"",React.createElement("h5",{id:"driverHead"},t)),React.createElement("div",{className:"driver-list list-group"},this.state.listPanelInfo),React.createElement("div",{id:"btnOperate",className:"driver-footer",onClick:this.operate.bind(this)},React.createElement("h5",null,a)))}},{key:"operate",value:function(e){var t=this,a=$(e.target).html(),n=[];switch(a){case"下一步":this.setState({checkedDriverList:[]}),H.Modal({content:"选好司机，准备开始分配配送区域咯？",okText:"开始分配",cancel:!0,okCallback:function(){var e=[];$('input[type="checkbox"]:checked').each(function(a,n){e.push(t.state.driverList[n.dataset.index])}),e.length>0?(setTimeout(function(){t.setState({checkedDriverList:e,currentStep:2}),n=t.buildTodayDriver(),t.setState({listPanelInfo:n})},200),t.createDriver()):H.Modal("至少勾选一名司机才能进行调度分配！")}});break;case"保存":var o=0,r=this.state.distributedArea,i=!1;for(var l in r)o+=r[l].markers.length;if(this.state.checkedDriverList.map(function(e){(!t.state.distributedArea[e.uid]||t.state.distributedArea[e.uid].markers.length<=0)&&(i=!0)}),i)return void H.Modal("还有未分配运力的司机。");H.Modal({content:"检查所有的区域已经被分配了吗？保存后，不可再修改司机分配区域了，请谨慎操作。",okText:"确认保存",cancel:!0,okCallback:function(){var e={},a=function(a){t.state.distributedArea[a].markers.map(function(t){t.getExtData().point.customs.map(function(t){t.deliveries.map(function(t){e[t.id]=a})})})};for(var o in t.state.distributedArea)a(o);H.server.assign_delivery(e,function(e){0==e.code?(setTimeout(function(){t.setState({currentStep:3}),n=t.buildTodayDriver(),t.setState({listPanelInfo:n})},200),t.createDriver()):10106==e.code?H.overdue():H.Modal(e.message)})}});break;case"全部打印":var s=[],c="";this.state.checkedDriverList.map(function(e,a){var n=[];e.goods=[],s.push(e),H.server.get_all_points({},function(o){0==o.code?t.setState({points:o.data},function(){t.state.points.map(function(o){o.customs.map(function(r){r.deliveries.map(function(r){r.driver&&(r.area=o.area.name,r.area=o.area.parent+"-"+o.area.name,e.uid==r.driver.uid&&(n.push(r),s[a].allHouse=t.state.disCount[r.driver.uid][0],s[a].allVolume=t.state.disCount[r.driver.uid][1]))})})}),s[a].goods=n}):10106==o.code?H.overdue():H.Modal(o.message)})}),H.Modal({title:"确认打印",content:"确认打印司机清火单",cancel:!0,okText:"开始打印",cancelText:"我不打印",okCallback:function(){localStorage.getItem("print")&&(c=JSON.parse(localStorage.getItem("print")).driverPrinter),t.createPrintTable(s);var e=getLodop();e.SET_PRINT_PAGESIZE(0,2100,2970,"driver"),e.SET_PRINTER_INDEX(t.confirmPrinter(c)),e.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","driver"),e.PRINT()}})}}},{key:"buildTodayDriver",value:function(e){var t=this,a=[],n=this.state.disCount,o=this.state.checkedColor;return 1==this.state.currentStep?(this.initMap(),this.setState({distributedArea:{},disCount:{},checkedColor:{}},function(){t.initDriver(),a=t.state.listPanelInfo})):2==this.state.currentStep?this.state.checkedDriverList.map(function(r,i){var l=!1;if(e)for(var s=0;s<e.length;s++)e[s]==i&&(l=!0);a.push(React.createElement("li",{key:i,className:"list-group-item driver-list",style:{height:"135px"},"data-index":i,onMouseEnter:t.driverMoveEnter.bind(t),onMouseLeave:t.driverMoveLeave.bind(t)},React.createElement("div",{className:"col-lg-12"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6"},r.name),React.createElement("div",{className:"col-lg-6"},r.mobile)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6"},r.capacity),React.createElement("div",{className:"col-lg-6"},"[",r.car_no,"]")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12"},"运力上限：",t.state.capacityInfo[r.capacity][0]+"户，"+t.state.capacityInfo[r.capacity][1]+"件")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12"},"已分配：",React.createElement("span",{className:"households"},n[i]?n[i][0]:0),"户，",React.createElement("span",{className:"cases"},"0"),"件")),React.createElement("div",{className:"row",style:{marginTop:"10px"}},React.createElement("div",{className:"col-lg-2 badge",style:{background:o[i]}}),l?React.createElement("button",{className:"col-lg-10 btn distribute",type:"button",disabled:"true",onClick:t.distributeArea.bind(t)},"双击区块修改配送区域"):React.createElement("button",{className:"col-lg-10 btn distribute",type:"button",onClick:t.distributeArea.bind(t)},"分配配送区域")))))}):3==this.state.currentStep&&this.state.checkedDriverList.map(function(e,r){var i=t.state.capacityInfo[e.capacity][0],l=t.state.capacityInfo[e.capacity][1];a.push(React.createElement("li",{key:r,className:"list-group-item driver-list",style:{height:"120px"},"data-index":r,onMouseEnter:t.driverMoveEnter.bind(t),onMouseLeave:t.driverMoveLeave.bind(t)},React.createElement("div",{className:"col-lg-12"},React.createElement("div",{className:"row",style:{marginBottom:"10px"}},React.createElement("div",{className:"col-lg-6"},e.name),React.createElement("div",{className:"col-lg-6"},e.mobile)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6"},e.capacity),React.createElement("div",{className:"col-lg-6"},"[",e.car_no,"]")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12"},"运力上限：",i,"户，",l,"件")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6"},"已分配：",n[e.uid]?n[e.uid][0]:0,"户，",n[e.uid]?n[e.uid][1]:0,"件"),React.createElement("div",{className:"col-lg-2 badge",style:{background:o[r]}}),React.createElement("button",{className:"col-lg-4 btn",type:"button",onClick:t.print.bind(t)},"打印")))))}),a}},{key:"driverMoveEnter",value:function(e){var t=e.target.dataset.index,a=this.state.checkedDriverList[t],n={};a&&(n=this.state.distributedArea[a.uid]),n&&n.markers&&n.polygon&&n.polygon&&n.polygon.setOptions({fillOpacity:.8})}},{key:"driverMoveLeave",value:function(e){var t=e.target.dataset.index,a=this.state.checkedDriverList[t],n={};a&&(n=this.state.distributedArea[a.uid]),n&&n.polygon&&n.polygon.setOptions({fillOpacity:.35})}},{key:"distributeArea",value:function(e){var t=new AMap.MouseTool(this.state.map),a=e.target,n=parseInt(e.target.dataset.reactid.split("$")[2].split(".")[0]);return $(a).hasClass("btn-default")?($(a).removeClass("btn-default").html("分配配送区域"),void t.close()):($(a).addClass("btn-default").html("右键单击结束配送区域的绘制"),t.polygon(),void this.drawDistribution(t,n,a))}},{key:"drawDistribution",value:function(e,t,a){var n=this;AMap.event.addListener(e,"draw",function(o){var r=n.color(),i=n.state.unMarkers,l=n.state.distributedArea,s=n.state.checkedColor,c=n.state.checkedDriverList[t],d=o.obj,u=new AMap.PolyEditor(n.state.map,o.obj),p=n.state.disCount,m=n.state.totalCustoms,f=0,h=0;u.close(),$(a.parentNode.children[0]).css({background:r}),s[t]=r,o.obj.setOptions({fillColor:r,strokeColor:r}),l[c.uid]||(l[c.uid]={markers:[],polygon:null});for(var v=0;v<i.length;v++)f+=i[v].getExtData().point.customs.length,d.contains([i[v].getPosition().lng,i[v].getPosition().lat])&&(l[c.uid].markers.push(i[v]),i[v].setIcon(""),f-=i[v].getExtData().point.customs.length,i[v].getExtData().point.customs.map(function(e){e.deliveries.map(function(e){h+=e.volume})}),i.splice(v,1),v--);l[c.uid].polygon=d,$(a).removeClass("btn-default").html("双击区块修改配送区域").attr("disabled","true"),e.close(),p[c.uid]=[l[c.uid].markers.length,h],$(".households")[t].innerHTML=p[c.uid][0],$(".cases")[t].innerHTML=p[c.uid][1],$("#disHouse").html(m-f),$("#unDisHouse").html(f),n.state.points.map(function(e){e.driver&&e.driver.uid==c.uid&&n.state.distributedArea[c.uid].markers.map(function(e){l[c.uid].markers.push(e)})}),$.extend(l,n.state.distributedArea),n.setState({disCount:p,
totalCustoms:m,distributedArea:l,unMarkers:i,checkedColor:s},function(){n.buildTodayDriver(),n.updateDistribution(o.obj,u,t,d)})})}},{key:"updateDistribution",value:function(e,t,a,n){var o=this,r=null;r=AMap.event.addListener(e,"dblclick",function(){var e=o.state.distributedArea,r=o.state.checkedDriverList[a],i=o.state.unMarkers,l=o.state.disCount,s=0,c=o.state.totalCustoms;if(1==t.edit){i.push.apply(i,e[r.uid].markers),e[r.uid]={markers:[],polygon:null};for(var d=0;d<i.length;d++)n.contains([i[d].getPosition().lng,i[d].getPosition().lat])?(e[r.uid].markers.push(i[d]),i[d].setIcon(""),c-=i[d].getExtData().point.customs.length,i[d].getExtData().point.customs.map(function(e){e.deliveries.map(function(e){s+=e.volume})}),i.splice(d,1),d--):i[d].setIcon("http://webapi.amap.com/theme/v1.3/markers/n/mark_r.png");e[r.uid].polygon=n,l[r.uid]=[e[r.uid].markers.length,s],$(".households")[a].innerHTML=l[r.uid][0],$(".cases")[a].innerHTML=l[r.uid][1],$("#disHouse").html(o.state.totalCustoms-c),$("#unDisHouse").html(c),o.state.points.map(function(t){t.driver&&t.driver.uid==r.uid&&o.state.distributedArea[r.uid].markers.map(function(t){e[r.uid].markers.push(t)})}),$.extend(e,o.state.distributedArea),o.setState({disCount:l,unMarkers:i,distributedArea:e}),t.edit=0,t.close()}else t.edit=1,t.open()}),this.setState({dbEvent:r})}},{key:"createTask",value:function(){return React.createElement("div",{id:"task",className:"task-panel"},React.createElement("div",{className:"panel panel-default"},React.createElement("div",{id:"taskHead",className:"panel-heading"},React.createElement("h3",{className:"panel-title"},"今日总任务量")),React.createElement("div",{className:"panel-body",id:"panelBody"},React.createElement("p",{className:"col-lg-12"},"配送户数：",this.state.waybillStatics.customs,"户"),React.createElement("p",{className:"col-lg-12"},"配送件数：",this.state.waybillStatics.volume,"件"),React.createElement("p",{className:"col-lg-12"},"预计车辆：",this.state.waybillStatics.cars,"个车；平均",this.state.waybillStatics.car_volume,"件货物"),React.createElement("p",{className:"col-lg-12"},"已分配",React.createElement("span",{id:"disHouse"},this.state.waybillStatics.customs_has_driver),"户；未分配",React.createElement("span",{id:"unDisHouse"},this.state.waybillStatics.customs_has_no_driver),"户")),React.createElement("div",{className:"panel-footer",onClick:this.togglePanelBody.bind(this)},"展开")))}},{key:"togglePanelBody",value:function(e){$("#panelBody").slideToggle("slow"),$(e.target).html("展开"==$(e.target).html()?"收起":"展开")}},{key:"backTo",value:function(){var e=this,t=[];if(2==this.state.currentStep)H.Modal({content:"此时返回，会清空地图上所有已分配的区域。确认返回？",okText:"确认返回",cancel:!0,okCallback:function(){e.setState({currentStep:1},function(){t=e.buildTodayDriver(),e.setState({listPanelInfo:t},e.createDriver)})}});else if(3==this.state.currentStep){var a=this.state.distributedArea,n=[];for(var o in a)n.push(parseInt(o));this.setState({currentStep:2},function(){t=e.buildTodayDriver(n),e.setState({listPanelInfo:t},function(){e.createDriver()})})}}},{key:"print",value:function e(t){var a=this,n=t.target.dataset.reactid.split("$")[2].split(".")[0],o=this.state.checkedDriverList[n].uid,e=[],r="";H.server.get_all_points({},function(t){0==t.code?a.setState({points:t.data},function(){a.state.points.map(function(t){t.customs.map(function(n){n.deliveries.map(function(n){n.driver&&(n.area=t.area.parent+"-"+t.area.name,o==n.driver.uid&&(n.allHouse=a.state.disCount[n.driver.uid][0],n.allVolume=a.state.disCount[n.driver.uid][1],e.push(n)))})})})}):10106==t.code?H.overdue():H.Modal(t.message)}),H.Modal({title:"确认打印",content:"确认打印司机清货单",cancel:!0,okText:"开始打印",cancelText:"我不打印",okCallback:function(){localStorage.getItem("print")&&(r=JSON.parse(localStorage.getItem("print")).driverPrinter),a.createPrintTable(e);var t=getLodop();t.SET_PRINT_PAGESIZE(0,2100,2970,"driver"),t.SET_PRINTER_INDEX(a.confirmPrinter(r)),t.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","driver"),t.PRINT()}})}},{key:"createPrintTable",value:function(e){var t=[];if(e[0].goods)t=e,t.map(function(e){e.allBills=e.goods.length,e.deliveries={},e.goods.length<=1&&(e.deliveries[H.getLadingCode(e.goods[0].code,[2,3,4])]=[e.goods[0]]);for(var t=0;t<e.goods.length-1;t++)if(e.goods.length>1){var a=H.getLadingCode(e.goods[t].code,[2,3,4]),n=H.getLadingCode(e.goods[t+1].code,[2,3,4]);e.deliveries[a]||(e.deliveries[a]=[]),e.deliveries[n]||(e.deliveries[n]=[]),a==n?e.deliveries[a].length>0?e.deliveries[a].push(e.goods[t+1]):(e.deliveries[a].push(e.goods[t]),e.deliveries[a].push(e.goods[t+1])):e.deliveries[a].length>0?e.deliveries[n].push(e.goods[t+1]):(e.deliveries[a].push(e.goods[t]),e.deliveries[n].push(e.goods[t+1]))}else e.deliveries[H.getLadingCode(e.goods[t].code,[2,3,4])].push(e.goods[t])});else{var a={};a=e[0].driver,a.allVolume=e[0].allVolume,a.allHouse=e[0].allHouse,a.allBills=e.length,a.deliveries={},e.length<=1&&(a.deliveries[H.getLadingCode(e[0].code,[2,3,4])]=[e[0]]);for(var n=0;n<e.length-1;n++)if(e.length>1){var o=H.getLadingCode(e[n].code,[2,3,4]),r=H.getLadingCode(e[n+1].code,[2,3,4]);a.deliveries[o]||(a.deliveries[o]=[]),a.deliveries[r]||(a.deliveries[r]=[]),o==r?a.deliveries[o].length>0?a.deliveries[o].push(e[n+1]):(a.deliveries[o].push(e[n]),a.deliveries[o].push(e[n+1])):a.deliveries[o].length>0?a.deliveries[r].push(e[n+1]):(a.deliveries[o].push(e[n]),a.deliveries[r].push(e[n+1]))}else a.deliveries[H.getLadingCode(e[n].code,[2,3,4])].push(e[n]);a.goods=e,t.push(a)}var i="",l=new Date,s="",c=[],d=[],u=H.getSouroundDate(0)+" "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds();t.map(function(e){c=Object.keys(e.deliveries).sort(),c.map(function(t){d.push(e.deliveries[t])}),d.map(function(e){for(var t=H.getLadingCode(e[0].code,[2,3,4]),a=H.getLadingCode(e[0].code,[2,3],"-"),n=0,o=e.length;n<o;n++){var r=0==n?'<td rowspan="'+o+'">'+t+"</td>":"",l=0==n?'<td rowspan="'+o+'">'+a+"</td>":"",s=0==n?'<td rowspan="'+o+'">'+e[0].area+"</td>":"",c=0==n?'<td rowspan="'+o+'"></td>':"";i+="<tr>"+r+l+"<td>"+e[n].day_no+"</td><td>"+e[n].volume+"</td><td>"+e[n].custom.name+"</td>"+s+c+"</tr>"}}),s='<style> table,td,th {border: 1px solid black;border-style: solid;border-collapse: collapse;line-height: 20px; text-align: center; font-size: 14px}</style><table border="1" width="705px"><thead><tr> <th wdith="15%">提货码</th><th width="10%">货架号</th><th width="20%">运单号</th><th width="10%">数量</th><th width="20%">收货人</th><th width="20%">物流线</th><th width="10%">排序</th></tr></thead><tbody>'+i+"</tbody></table>",LODOP.NewPage(),LODOP.ADD_PRINT_TABLE(111,27,710,920,s),LODOP.ADD_PRINT_TEXT(35,313,118,31,"司机清货单"),LODOP.SET_PRINT_STYLEA(0,"FontSize",15),LODOP.SET_PRINT_STYLEA(0,"Alignment",2),LODOP.SET_PRINT_STYLEA(0,"Horient",2),LODOP.ADD_PRINT_TEXT(80,30,211,26,"司机："+e.car_no+" "+e.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(79,242,173,25,"合计："+e.allHouse+"户，"+e.allBills+"票，"+e.allVolume+"件"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(81,512,221,25,"打印时间："+u),LODOP.SET_PRINT_STYLEA(0,"FontSize",10)})}},{key:"confirmPrinter",value:function(e){for(var t=getLodop(),a=t.GET_PRINTER_COUNT(),n=0;n<a;n++)if(t.GET_PRINTER_NAME(n)===e)return n}},{key:"color",value:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)}},{key:"render",value:function(){return React.createElement("div",{className:"waybill-info-container"},React.createElement("div",{className:"waybill-info-head container-fluid"},React.createElement("h3",{className:"title"},"调度分配",React.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:this.props.closePanel,style:{fontSize:"40px"}},"×")),React.createElement("hr",null),React.createElement("div",{className:"waybill-info-content"},this.createDriver(),React.createElement("div",{id:"map",className:"map-container"},React.createElement("div",{className:"loader"},React.createElement("div",{className:"loading-1"}),React.createElement("div",{className:"loading-2"},React.createElement("h3",null,"地图加载中...")))),this.createTask())))}}]),t}(React.Component);t.default=i},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={btnNames:["保存"],waybillId:0,waybillInfo:null,driverList:[],address:null,changeAddress:!1,volume:null},o.getData=o.getData.bind(o),o.createDriverSelect=o.createDriverSelect.bind(o),o}return o(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this.props.waybillId;if($("#mapScript").length<=0){var t='<script id="mapScript" type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=56e401b127998ede0364e18d6877f0f1&plugin=AMap.Geocoder,AMap.MouseTool,AMap.PolyEditor"></script>';$("body").append(t)}if($("#printScript").length<=0){var a='<script id="printScript" type="text/javascript" src="/js/LodopFuncs.js">';$("body").append(a)}this.setState({waybillId:e},this.getData)}},{key:"getData",value:function(){var e=this;new Promise(function(t){H.server.get_driver_info({page:1,size:40},function(a){0==a.code?e.setState({driverList:a.data.drivers},function(){t(a)}):10106==a.code?H.overdue():H.Modal(a.message)})}).then(function(){H.server.get_current_waybill({id:e.state.waybillId},function(t){if(0==t.code){var a=t.data;switch(a.status){case"-12":a.statusDes="已取消（后台）";break;case"-11":a.statusDes="已取消（发货人）";break;case"-10":a.statusDes="已取消";break;case 0:a.statusDes="待揽货";break;case 10:a.statusDes="待装车";break;case 20:a.statusDes="已装车";break;case 30:a.statusDes="配送中";break;case 40:a.statusDes="已送达"}e.state.waybillInfo=a;var n=a.address;n.address=a.address.full,n.adcode=a.address.area.id,n.location={lng:a.address.lng,lat:a.address.lat},e.state.old_address=a.address.full,e.setState({address:n})}else 10106==t.code?H.overdue():H.Modal(t.message)})})}},{key:"createWaybillInfoPanel",value:function(){var e=this.state.waybillInfo;return e?React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},"运单信息"),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"row"},React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"运单号："),React.createElement("div",{className:"col-lg-8"},React.createElement("p",{className:"form-control-static"},e.day_no))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"配送日期："),React.createElement("div",{className:"col-lg-8"},React.createElement("input",{id:"waybillDay",type:"date",className:"form-control",min:H.getSouroundDate(0),defaultValue:e.day}))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"合计件数："),React.createElement("div",{className:"col-lg-8"},React.createElement("input",{id:"waybillVolume",type:"number",className:"form-control",defaultValue:e.volume})))),React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"运单状态："),React.createElement("div",{className:"col-lg-8"},React.createElement("p",{className:"form-control-static"},e.statusDes))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"代收货款："),React.createElement("div",{className:"col-lg-8"},React.createElement("input",{id:"waybillAmount",type:"number",defaultValue:e.amount,className:"form-control"}))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"备注："),React.createElement("div",{className:"col-lg-8"},React.createElement("textarea",{id:"waybillNote",rows:"2",className:"form-control",style:{resize:"none"},defaultValue:null!==e.info?e.info.note:null})))))),React.createElement("div",{className:"panel-footer",style:{height:"55px"}},React.createElement("button",{className:"btn btn-lg btn-default pull-right",onClick:this.saveBasic.bind(this)},"保存"))):null}},{key:"addNum",value:function(){}},{key:"createVolumePanel",value:function(){var e=this.state.volume;return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},"货量信息"),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"row volume-wrap"},React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("label",{className:"col-lg-4 control-label"},"小件（0-10kg）",e),React.createElement("div",{className:"col-lg-6"},React.createElement("div",{className:"form-group"},React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},"-"),React.createElement("input",{type:"text",className:"form-control text-center"}),React.createElement("div",{className:"input-group-addon",onClick:this.addNum.bind(this)},"+"))))),React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("label",{className:"col-lg-4 control-label"},"小件（0-10kg）",e),React.createElement("div",{className:"col-lg-6"},React.createElement("div",{className:"form-group"},React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},"-"),React.createElement("input",{type:"text",className:"form-control text-center"}),React.createElement("div",{className:"input-group-addon"},"+"))))),React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("label",{className:"col-lg-4 control-label"},"小件（0-10kg）",e),React.createElement("div",{className:"col-lg-6"},React.createElement("div",{className:"form-group"},React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},"-"),React.createElement("input",{type:"text",className:"form-control text-center"}),React.createElement("div",{className:"input-group-addon"},"+"))))),React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("label",{className:"col-lg-4 control-label"},"小件（0-10kg）",e),React.createElement("div",{className:"col-lg-6"},React.createElement("div",{className:"form-group"},React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},"-"),React.createElement("input",{type:"text",className:"form-control text-center"}),React.createElement("div",{className:"input-group-addon"},"+"))))),React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("label",{className:"col-lg-4 control-label"},"小件（0-10kg）",e),React.createElement("div",{className:"col-lg-6"},React.createElement("div",{className:"form-group"},React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},"-"),React.createElement("input",{type:"text",className:"form-control text-center"}),React.createElement("div",{className:"input-group-addon"},"+"))))),React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("label",{className:"col-lg-4 control-label"},"小件（0-10kg）",e),React.createElement("div",{className:"col-lg-6"},React.createElement("div",{className:"form-group"},React.createElement("div",{className:"input-group"},React.createElement("div",{className:"input-group-addon"},"-"),React.createElement("input",{type:"text",className:"form-control text-center"}),React.createElement("div",{className:"input-group-addon"},"+"))))))),React.createElement("div",{className:"panel-footer",style:{height:"55px"}},React.createElement("button",{className:"btn btn-lg btn-default pull-right",onClick:this.saveBasic.bind(this)},"保存")))}},{key:"createDriverSelect",value:function(){var e=[],t=this.state.waybillInfo,a=this.state.driverList,n=0;if(a){n=-1;for(var o=0;o<a.length;o++)t.driver&&a[o].uid==t.driver.uid?(e.push(React.createElement("option",{key:o,"data-index":o,value:o},a[o].car_no+" "+a[o].name)),n=o):e.push(React.createElement("option",{key:o,"data-index":o,value:o},a[o].car_no+" "+a[o].name))}return React.createElement("select",{id:"waybillDriver",defaultValue:n,className:"form-control",onChange:this.changeDriver.bind(this)},React.createElement("option",{value:-1},"选择司机"),e)}},{key:"createCarInfoPanel",value:function(){var e=this.state.waybillInfo,t=this.state.driverList;return e&&t?React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},"车辆信息"),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"row"},React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"司机："),React.createElement("div",{className:"col-lg-8"},this.createDriverSelect())),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"车辆状态："),React.createElement("div",{className:"col-lg-8"},React.createElement("p",{className:"form-control-static"},e.statusDes?e.statusDes:"")))),React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"运力类型："),React.createElement("div",{className:"col-lg-8"},React.createElement("p",{className:"form-control-static"},e.driver?e.driver.capacity:""))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"今日运力："),React.createElement("div",{className:"col-lg-8"},React.createElement("p",{className:"form-control-static"},"已分配",e.driver&&e.driver.customs?e.driver.customs:0,"户，共",e.driver&&e.driver.volume?e.driver.volume:0,"件")))))),React.createElement("div",{className:"panel-footer",style:{height:"55px"}},React.createElement("button",{className:"btn btn-lg btn-default pull-right",onClick:this.saveDriver.bind(this)},"保存"))):null}},{key:"createSenderPanel",value:function(){var e=this.state.waybillInfo;return e?React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},"发货人信息"),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"row"},React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"发货人："),React.createElement("div",{className:"col-lg-8"},React.createElement("input",{id:"waybillShopName",type:"text",className:"form-control",defaultValue:e.shop.name}))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"电话："),React.createElement("div",{className:"col-lg-8"},React.createElement("input",{id:"waybillShopMobile",type:"tel",className:"form-control",defaultValue:e.shop.mobile})))),React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"地址："),React.createElement("div",{className:"col-lg-8"},React.createElement("input",{id:"waybillShopAddress",type:"text",className:"form-control",defaultValue:e.shop.address})))))),React.createElement("div",{className:"panel-footer",style:{height:"55px"}},React.createElement("button",{className:"btn btn-lg btn-default pull-right",style:{marginLeft:"30px"},onClick:this.saveShop.bind(this)},"永久保存"),React.createElement("button",{className:"btn btn-lg btn-default pull-right",onClick:this.saveShop.bind(this)},"保存本次"))):null}},{key:"createConsigneePanel",value:function(){var e=this.state.waybillInfo,t="";return e?(t=H.getLadingCode(e.code,[2,3,4]),React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},"收货人信息"),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"row"},React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"提货码："),React.createElement("div",{className:"col-lg-8"},React.createElement("p",{className:"form-control-static"},t))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"区域："),React.createElement("div",{className:"col-lg-8"},React.createElement("p",{className:"form-control-static"},e.address.area.name))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"收货人："),React.createElement("div",{className:"col-lg-4"},React.createElement("input",{id:"waybillCustomName",type:"text",className:"form-control",defaultValue:e.custom.name})),React.createElement("div",{className:"col-lg-4",style:{lineHeight:"34px"}},"（",e.address.title,"）"))),React.createElement("form",{className:"col-lg-6 form-horizontal"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"地址："),React.createElement("div",{className:"col-lg-6"},React.createElement("input",{id:"waybillCustomAddress",type:"text",className:"form-control",defaultValue:e.address.full})),React.createElement("a",{href:"javascript:;",className:"col-lg-2 form-control-static",onClick:this.watchMap.bind(this)},"查看地图")),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"坐标："),React.createElement("div",{className:"col-lg-6"},React.createElement("input",{id:"waybillCustomLocation",type:"text",className:"form-control",readOnly:"readOnly",defaultValue:e.address.lng&&e.address.lat?e.address.lng+","+e.address.lat:null})),React.createElement("a",{href:"javascript:;",className:"col-lg-2 form-control-static",onClick:this.refreshMap.bind(this)},"刷新坐标")),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-lg-2 control-label"},"收货电话："),React.createElement("div",{className:"col-lg-8"},React.createElement("input",{id:"waybillCustomMobile",type:"tel",className:"form-control",defaultValue:e.custom.mobile})))))),React.createElement("div",{className:"panel-footer",style:{height:"55px"}},React.createElement("button",{id:"saveCustomL",className:"btn btn-lg pull-right btn-default",style:{marginLeft:"30px"},onClick:this.saveCustom.bind(this)},"永久保存"),React.createElement("button",{id:"saveCustom",className:"btn btn-lg pull-right btn-default",onClick:this.saveCustom.bind(this)},"保存本次")))):null}},{key:"watchMap",value:function(){function e(e){o=new AMap.Marker({position:e,map:n,draggable:!0,cursor:"move"}),o.on("dragend",function(){var t=o.getPosition();n.setCenter([t.lng,t.lat]),n.setZoom(16);var a={lng:t.lng,lat:t.lat,get_poi:1};H.server.gecode_address(a,function(t){if(0==t.code){var a=t.data.pois;a.sort(function(e,t){return e._distance-t._distance}),e=[a[0].location.lng,a[0].location.lat],o.setPosition(e),$("#searchInputAddress").val(a[0].address)}})})}var t=this,a=$("#waybillCustomLocation").val().split(","),n=null,o=null;H.Modal({title:"确认地图",width:640,content:'<div style="position: relative;"><div id="map" style="width:590px; height:300px;"></div><div style="position: absolute;top: 0; left: 10px;"><div class="form-inline"><input id="searchInputAddress" style="width: 300px;" type="text" class="form-control" value="'+$("#waybillCustomAddress").val()+'" /><button id="searchLocation" type="button" class="btn btn-sm btn-default">定位</button></div></div></div>',okText:"保存",cancel:!0,cancelText:"关闭",okCallback:function(){$("#waybillCustomLocation").val(a.join(",")),$("#waybillCustomAddress").val($("#searchInputAddress").val())}}),setTimeout(function(){var t={resizeEnable:!0,zoom:16};2==a.length?(t={resizeEnable:!0,zoom:16,center:a},n=new AMap.Map("map",t),e(a)):(n=new AMap.Map("map",t),$("#searchLocation")[0].click())},100),$("#searchLocation").click(function(){var r=$("#searchInputAddress").val();H.server.get_all_address({keyword:r,policy:1},function(r){if(0==r.code){var i=r.data.tips;t.state.address=i[0],t.state.changeAddress=!0,i[0]&&(a=[i[0].location.lng,i[0].location.lat],o?o.setPosition(a):e(a),n.setCenter(a))}else 10106==r.code?H.overdue():H.Modal(r.message)})})}},{key:"refreshMap",value:function(){var e=this,t=$("#waybillCustomAddress").val(),a=[];H.server.get_all_address({keyword:t,region:"成都",policy:1},function(t){0==t.code?e.setState({address:t.data.tips[0],changeAddress:!0},function(){t.data.tips.map(function(e){a.push([e.location.lng,e.location.lat])}),$("#waybillCustomAddress").val(t.data.tips[0].address),$("#waybillCustomLocation").val(a[0]),$("#saveCustomL").addClass("btn-default").removeAttr("disabled").click(e.saveCustom.bind(e)),$("#saveCustom").addClass("btn-default").removeAttr("disabled").click(e.saveCustom.bind(e))}):10106==t.code?H.overdue():H.Modal("刷新失败")})}},{key:"changeDriver",value:function(e){var t=e.target.selectedIndex-1,a=this.state.waybillInfo;t!=-1&&(a.driver||(a.driver={}),a.driver.capacity=this.state.driverList[t].capacity?this.state.driverList[t].capacity:a.driver.capacity,a.driver.customs=this.state.driverList[t].customs?this.state.driverList[t].customs:a.driver.customs,a.driver.volume=this.state.driverList[t].volume?this.state.driverList[t].volume:a.driver.volume,this.setState({waybillInfo:a}))}},{key:"saveBasic",value:function(){var e=this,t=$("#waybillDay").val(),a=$("#waybillVolume").val(),n=$("#waybillAmount").val(),o=$("#waybillNote").val();H.Modal({title:"保存运单信息",content:"确认保存这条运单信息？",cancel:!0,okText:"确认保存",okCallback:function(){H.server.update_waybill_detail({method:"basic",id:e.props.waybillId,day:t,volume:a,amount:n,note:o},function(t){0==t.code?(H.Modal("保存成功！"),e.getData()):10106==t.code?H.overdue():H.Modal(t.message)})}})}},{key:"saveDriver",value:function(){var e=this,t=$("#waybillDriver").get(0).selectedIndex-1;console.log(t);var a=this.state.driverList[t].uid;H.Modal({title:"保存司机信息",content:"确定选择该司机？",cancel:!0,okText:"确认修改",okCallback:function(){H.server.update_waybill_detail({id:e.props.waybillId,method:"driver",driver_id:a},function(t){0==t.code?(H.Modal("保存成功！"),e.getData()):10106==t.code?H.overdue():H.Modal(t.message)})}})}},{key:"saveShop",value:function(e){var t=this,a=$(e.target).html(),n="",o=$("#waybillShopName").val(),r=$("#waybillShopMobile").val(),i=$("#waybillShopAddress").val();switch(a){case"保存本次":n="shop";break;case"永久保存":n="persist_shop"}""!=r&&/^1[3|4|5|7|8][0-9]\d{8}$/.test(r)?($("#waybillShopMobile").parent().removeClass("has-error"),H.Modal({title:"保存发货人信息",content:"确定保存该发货人信息？",cancel:!0,okText:"确认修改",okCallback:function(){H.server.update_waybill_detail({id:t.props.waybillId,method:n,name:o,mobile:r,address:i},function(e){0==e.code?(H.Modal("保存成功！"),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})}})):$("#waybillShopMobile").parent().addClass("has-error")}},{key:"saveCustom",value:function(e){var t=this,a=$(e.target).html(),n="";switch(a){case"保存本次":n="custom";break;case"永久保存":n="persist_custom"}var o={};o.id=this.props.waybillId,o.name=$("#waybillCustomName").val(),o.mobile=$("#waybillCustomMobile").val(),o.method=n,o.address=this.state.address,o.old_address=this.state.old_address,o.address.address=$("#waybillCustomAddress").val(),""!=o.mobile&&/^1[3|4|5|7|8][0-9]\d{8}$/.test(o.mobile)?($("#waybillCustomMobile").parent().removeClass("has-error"),H.Modal({title:"保存收货人信息",content:"确定保存该收货人信息？",cancel:!0,okText:"确认修改",okCallback:function(){H.server.update_waybill_detail(o,function(e){0==e.code?(H.Modal("保存成功！"),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})}})):$("#waybillCustomMobile").parent().addClass("has-error")}},{key:"buyOver",value:function(){var e=this;H.Modal({content:"确认收揽该条运单？",cancel:!0,okCallback:function(){H.server.waybill_buy_over({id:e.props.waybillId},function(e){0==e.code?H.Modal("成功收揽！"):10106==e.code?H.overdue():H.Modal(e.message)})}})}},{key:"print",value:function(){var e=this;setTimeout(this.changePrinter,100),H.Modal({title:"选择打印的类型",content:'<select class="form-control" id="choice"><option value="0">配送单</option><option value="1">货标</option></select><p class="text-warning" id="notice"></p><p class="text-success" id="printerInfo"></p>',okText:"开始打印",cancelText:"不打印了",cancel:!0,okCallback:function(){var t=$("#choice").val(),a="";if(0==t){localStorage.getItem("print")&&(a=JSON.parse(localStorage.getItem("print")).waybillPrinter),e.createWaybillModal(e.state.waybillInfo);var n=getLodop();n.SET_PRINT_PAGESIZE(0,2200,1405,"bills"),n.SET_PRINTER_INDEX(e.confirmPrinter(a)),n.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","bills"),n.PRINT()}else if(1==t){localStorage.getItem("print")&&(a=JSON.parse(localStorage.getItem("print")).tagPrinter),e.createTag(e.state.waybillInfo);var o=getLodop();o.SET_PRINT_PAGESIZE(0,400,300,"tag"),o.SET_PRINTER_INDEX(e.confirmPrinter(a)),o.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","tag"),o.PRINT()}}}),$("#choice").change(this.changePrinter)}},{key:"changePrinter",value:function(){var e=$("#choice").get(0).selectedIndex,t=localStorage.getItem("print");$("#printerInfo").html(""),t?($("#modal-ok").removeAttr("disabled"),$("#notice").html(""),0==e?$("#printerInfo").html("当前打印机："+JSON.parse(t).waybillPrinter):1==e&&$("#printerInfo").html("当前打印机："+JSON.parse(t).tagPrinter)):($("#modal-ok").attr("disabled","true"),$("#notice").html("请先到打印机配置页面配置打印机"))}},{key:"confirmPrinter",value:function(e){for(var t=getLodop(),a=t.GET_PRINTER_COUNT(),n=0;n<a;n++)if(t.GET_PRINTER_NAME(n)===e)return n}},{key:"createWaybillModal",value:function(e){LODOP=getLodop();var t=null!==e.info?e.info.note:"";LODOP.PRINT_INIT(""),LODOP.ADD_PRINT_TEXT(32,218,179,40,"大鱼物流配送单"),LODOP.SET_PRINT_STYLEA(0,"FontSize",18),LODOP.ADD_PRINT_TEXT(47,44,151,22,"服务、投诉电话：173 1300 6160"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.ADD_PRINT_TEXT(64,42,155,20,"网点：成都海霸王冻品区16栋外"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.ADD_PRINT_RECT(97,46,330,160,0,1),LODOP.ADD_PRINT_RECT(97,419,330,160,0,1),LODOP.ADD_PRINT_TEXT(10,520,90,25,"运 单 号："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(29,520,90,26,"配送日期："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(47,520,90,30,"配送司机："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(65,520,90,30,"运单Ｋ值："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(10,608,156,30,e.day_no),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.SET_PRINT_STYLEA(0,"FontColor","#FF0000"),LODOP.ADD_PRINT_TEXT(29,608,156,30,e.day),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(47,608,156,31,e.driver?e.driver.name+" "+e.driver.car_no:""),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(65,608,156,31,e.kno?"K"+e.kno:"-"),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(136,64,305,25,"发货人："+e.shop.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(160,64,305,25,"发货人电话："+e.shop.mobile),
LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(103,258,141,25,"发货地：海霸王"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(109,602,168,30,"提货码："+H.getLadingCode(e.code,[2,3,4])),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(162,436,305,25,"物流区域："+e.address.area.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(211,436,305,45,"提货地址："+e.address.full),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(137,436,305,25,"提货人："+e.custom.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(186,436,305,25,"提货电话："+e.custom.mobile),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_RECT(277,47,330,135,0,1),LODOP.ADD_PRINT_RECT(278,419,330,135,0,1),LODOP.ADD_PRINT_TEXT(292,65,40,25,"货物"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(317,65,305,25,"货物件数（袋、箱）："+e.volume),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(342,65,305,25,"备注："+t),LODOP.ADD_PRINT_RECT(370,226,142,37,0,1),LODOP.ADD_PRINT_TEXT(383,233,43,24,"签字"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(292,437,61,24,"代收货款"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(317,438,305,25,"货款："+e.amount+"元"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(380,438,100,25,"客户签字："),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(447,59,38,21,"说明："),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.SET_PRINT_STYLEA(0,"FontColor","#C0C0C0"),LODOP.ADD_PRINT_TEXT(459,84,529,31,"1、第一联（白单）公司存档，第二联（红单）发货方存档，第三联（蓝单）司机存档，第四联（黄单）提货方存档；\r\n2、本物流公司对货品质量概不负责，退货请双方沟通后联系司机取货，退货费10元起（小件8元，大件10元，泡沫箱20元）；"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.SET_PRINT_STYLEA(0,"FontColor","#C0C0C0")}},{key:"createTag",value:function(e){LODOP=getLodop();for(var t=0;t<e.volume;t++)LODOP.NewPage(),LODOP.ADD_PRINT_RECT(2,0,70,25,0,1),LODOP.ADD_PRINT_TEXT(9,2,86,20,"提货:"+H.getLadingCode(e.code,[2,3,4])),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_RECT(2,73,70,25,0,1),LODOP.ADD_PRINT_TEXT(9,78,74,20,"货架:"+H.getLadingCode(e.code,[2,3],"-")),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_TEXT(35,-1,153,20,"物流线:"+e.address.area.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_TEXT(55,-1,123,20,"发货方:"+e.shop.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_TEXT(75,-1,123,20,"收货方:"+e.custom.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",8),LODOP.ADD_PRINT_TEXT(94,-1,122,20,"货品：合计"+e.volume+"件"),LODOP.SET_PRINT_STYLEA(0,"FontSize",8)}},{key:"render",value:function(){return React.createElement("div",{className:"goods-info-ctrl"},React.createElement("div",{className:"goods-info container-fluid"},React.createElement("h3",{className:"title"},"运单明细",React.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:this.props.closePanel,style:{fontSize:"40px"}},"×")),React.createElement("hr",null),React.createElement("div",{className:"goods-info-content"},this.createWaybillInfoPanel(),this.createVolumePanel(),this.createCarInfoPanel(),this.createSenderPanel(),this.createConsigneePanel(),React.createElement("button",{className:"btn btn-default btn-lg",style:{marginRight:"30px"},onClick:this.buyOver.bind(this)},"确认收揽"),React.createElement("button",{className:"btn btn-lg",onClick:this.print.bind(this)},"打印"))))}}]),t}(React.Component);t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(2),d=n(c),u=a(3),p=n(u),m=a(7),f=n(m),h=a(1),v=n(h),g=a(5),_=n(g),b=a(29),y=n(b),E=a(28),T=n(E),R=a(27),P=n(R),N=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={areaList:[],waybillList:[],search:"",searchType:[],start:H.getSouroundDate(0),end:H.getSouroundDate(0),status:[],adcode:"",amount:"",date:"",currentDate:0,currentBillStatus:"-1",area:"成都市",currentArea:0,replace:0,currentReplace:0,page:1,size:30,total:50,shopTotal:0,customTotal:0,panel:""},a.getData=a.getData.bind(a),a.operate=a.operate.bind(a),a.srOnlyLadingNumber=a.srOnlyLadingNumber.bind(a),a.srOnlySender=a.srOnlySender.bind(a),a.closePanel=a.closePanel.bind(a),a.getAllArea=a.getAllArea.bind(a),a.urlEncode=a.urlEncode.bind(a),a}return i(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;if($("#printScript").length<=0){var t='<script id="printScript" type="text/javascript" src="/js/LodopFuncs.js">';$("body").append(t)}new Promise(function(t){e.getAllArea(t)}).then(function(){e.getData()})}},{key:"getAllArea",value:function(e){var t=this;H.server.get_all_area({id:510100},function(a){0==a.code?t.setState({areaList:a.data.children},function(){e(a)}):10106==a.code?H.overdue():H.Modal(a.message)})}},{key:"getData",value:function(){var e=this,t={};t.start=this.state.start,t.end=this.state.end,t.status=this.state.status,t.page=this.state.page,t.size=this.state.size,this.state.search&&(t.search=this.state.search,t.search_type=this.state.searchType),this.state.amount!==!1&&this.state.amount!==!0||(t.amout=this.state.amount),this.state.adcode&&(t.adcode=this.state.adcode),H.server.get_all_waybill(t,function(t){0==t.code?e.setState({total:t.data.total,shopTotal:t.data.shop_num,customTotal:t.data.custom_num,waybillList:t.data.deliveries}):10106==t.code?H.overdue():H.Modal(t.message)})}},{key:"createSelectArea",value:function(){var e=["今天","明天"],t=[0,1],a=["全部","待揽货","待装车","已装车","配送中","已送达","已拒单","已取消"],n=["-1",0,10,20,30,40,41,"-10"],o=[],r=[],i=["全部","否","是"],l=[0,1,2];return o.push("全部"),r.push(0),this.state.areaList.map(function(e,t){o.push(e.name),r.push(t+1)}),React.createElement("div",{className:"section-filter",style:{paddingTop:0}},React.createElement("form",{className:"form-inline"},React.createElement("div",{className:"filter-row"},this.createSearchBar())),React.createElement("div",{className:"row"},React.createElement("form",{className:"form-inline col-lg-12"},React.createElement("div",{className:"filter-row"},React.createElement("label",{style:{display:"inline-block",width:"6em"}},"配送日期"),React.createElement(p.default,{btnNames:e,bindData:t,clickCallback:this.toggleDate.bind(this),style:"btn btn-xs",activeStyle:"btn btn-xs btn-default",status:this.state.currentDate}),React.createElement("label",{style:{display:"inline-block",width:"4em",marginLeft:"50px"}},"日期"),React.createElement(_.default,{start:this.state.start,end:this.state.end,prefix:"waybill_date_",otherClass:"input-sm",changeCallback:this.dateRange.bind(this)}))),React.createElement("form",{className:"form-inline col-lg-12"},React.createElement("div",{className:"filter-row"},React.createElement("label",{style:{display:"inline-block",width:"6em"}},"运单状态"),React.createElement(p.default,{btnNames:a,bindData:n,clickCallback:this.toggleBillStatus.bind(this),style:"btn btn-xs",activeStyle:"btn btn-xs btn-default",status:this.state.currentBillStatus}))),React.createElement("form",{className:"form-inline col-lg-12"},React.createElement("div",{className:"filter-row"},React.createElement("label",{style:{display:"inline-block",width:"6em"}},"区县"),React.createElement(p.default,{btnNames:o,bindData:r,clickCallback:this.toggleArea.bind(this),style:"btn btn-xs",activeStyle:"btn btn-xs btn-default",status:this.state.currentArea}))),React.createElement("form",{className:"form-inline col-lg-12"},React.createElement("div",{className:"filter-row"},React.createElement("label",{style:{display:"inline-block",width:"6em"}},"代收货款"),React.createElement(p.default,{btnNames:i,bindData:l,clickCallback:this.toggleReplace.bind(this),style:"btn btn-xs",activeStyle:"btn btn-xs btn-default",status:this.state.currentReplace}))),React.createElement("div",{className:"form-inline col-lg-6"},React.createElement("label",{style:{display:"inline-block",width:"6em"}}),React.createElement("a",{className:"btn btn-lg btn-orange",onClick:this.select.bind(this)},"筛选"))))}},{key:"select",value:function(){""==$("#component_search_input").val()&&this.setState({search:"",searchType:[]}),this.setState({page:1},this.getData)}},{key:"createSearchBar",value:function(){return React.createElement("div",{className:"search-bar"},React.createElement(f.default,{dropdownMenus:["全部","运单号","提货人手机号","提货码","提货人","发货人"],emit:this.search.bind(this),onChange:this.changeSelect.bind(this)}))}},{key:"changeSelect",value:function(e){var t=[],a=["all","no","mobile","code","custom","shop"];"all"==a[e]?t=["no","mobile","code","custom","shop"]:t.push(a[e]),this.setState({searchType:t})}},{key:"search",value:function(){var e=$("#component_search_input").val();this.setState({search:e,page:1},this.getData)}},{key:"toggleDate",value:function(e){var t=e.target.dataset.index,a=null;if(t!==this.state.currentDate){switch(e.target.innerHTML){case"今天":a=H.getSouroundDate(0),$("#waybill_date_startTime").val(a),$("#waybill_date_endTime").val(a);break;case"明天":a=H.getSouroundDate(-1),$("#waybill_date_startTime").val(a),$("#waybill_date_endTime").val(a)}this.setState({page:1,currentDate:t,start:a,end:a})}}},{key:"dateRange",value:function(){var e=$("#waybill_date_startTime").val(),t=$("#waybill_date_endTime").val();this.setState({currentDate:3,start:e,end:t})}},{key:"toggleReplace",value:function(e){var t=e.target.dataset.index,a=null;t!==this.state.currentReplace&&(a=1==t?Boolean(!1):2==t?Boolean(!0):"",this.setState({page:1,currentReplace:t,amount:a}))}},{key:"toggleArea",value:function(e){var t=e.target.dataset.index,a=this.state.adcode;a=this.state.areaList[t-1]?this.state.areaList[t-1].id:"",t!=this.state.currentArea&&this.setState({page:1,currentArea:t,adcode:a})}},{key:"toggleBillStatus",value:function(e){var t=e.target.dataset.index,a=[];t!==this.state.currentBillStatus&&("-1"==t?a=[]:a.push(t),this.setState({page:1,currentBillStatus:t,status:a}))}},{key:"createTable",value:function(){var e=["运单号","提货码","提货人","KNO","件数","发货方","状态","来源","配送日期","代收货款","操作"],t=["day_no","lading_code","fetch","k","volume","sender","status","source","day","amount","operate"],a={6:{0:"待揽货",10:"待装车",20:"已装车",30:"配送中",40:"已送达",41:"已拒单","-10":"已取消","-11":"已取消（发货人）","-12":"已取消（后台）","-13":"已取消（司机发货）"}},n={},o={1:this.srOnlyLadingNumber,5:this.srOnlySender,10:this.operate},r=this.state.waybillList;return r.map(function(e,t){e.operate=t,e.fetch=e.custom.name+" ["+e.custom.mobile+"]",e.lading_code=H.getLadingCode(e.code,[2,3,4]),e.sender=e.shop.name,"-10"==e.status||"-11"==e.status||"-12"==e.status||"-13"==e.status?e.operate="":n[t]=["作废","明细","打印"],e.kno?e.k="K"+e.kno:e.k="-"}),React.createElement(d.default,{values:this.state.waybillList,headlines:e,order:t,bodyOperate:o,id:"waybillInfo",statusOperate:n,status:a,cellStyle:{0:{condition:["location_confirmed",!1],style:{color:"red"}}}})}},{key:"operate",value:function(e){var t=this,a=$(e.target).html(),n=e.target.dataset.reactid.split("$")[2].split(".")[0],o=this.state.waybillList[n].id,r=this.state.waybillList[n];switch(a){case"作废":H.Modal({content:"确认作废该条运单？",okText:"确认作废",cancel:!0,okCallback:function(){H.server.cancel_waybill({id:o},function(e){0==e.code?(H.Modal("运单已作废！"),t.getData()):10106==e.code?H.overdue():H.Modal(e.message)})}});break;case"明细":this.setState({panel:React.createElement(y.default,{closePanel:this.closePanel,waybillId:o})});break;case"打印":this.print(r)}}},{key:"print",value:function(e){var t=this,a=e.kno,n=e.custom.name;setTimeout(this.changePrinter,100),H.Modal({title:"选择打印类型",content:'<div class="waybill-print"><p>即将打印：K'+a+"-"+n+'</p><select class="form-control" id="choice"><option value="0">打印标签（多张）</option><option value="1">打印标签（单张）</option><option value="2">打印运单</option></select><p class="text-warning" id="notice"></p><p class="text-success" id="printerInfo"></p></div>',okText:"开始打印",cancel:!0,okCallback:function(){var a=$("#choice").val(),n="";if(0==a){localStorage.getItem("print")&&(n=JSON.parse(localStorage.getItem("print")).labelPrinter),t.createWaybillLabelModal(e,0);var o=getLodop();o.SET_PRINT_PAGESIZE(0,600,400,"label"),o.SET_PRINTER_INDEX(t.confirmPrinter(n)),o.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","label"),o.PRINT()}else if(1==a){localStorage.getItem("print")&&(n=JSON.parse(localStorage.getItem("print")).labelPrinter),t.createWaybillLabelModal(e,1);var r=getLodop();r.SET_PRINT_PAGESIZE(0,600,400,"label"),r.SET_PRINTER_INDEX(t.confirmPrinter(n)),r.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","label"),r.PRINT()}else 2==a&&(localStorage.getItem("print")&&(n=JSON.parse(localStorage.getItem("print")).waybillPrinter),H.server.get_current_waybill({id:e.id},function(e){if(0==e.code){t.createWaybillModal(e.data);var a=getLodop();a.SET_PRINT_PAGESIZE(0,2200,1405,"bills"),a.SET_PRINTER_INDEX(t.confirmPrinter(n)),a.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","bills"),a.PRINT()}else 10106==e.code?H.overdue():H.Modal(e.message)}))}}),$("#choice").change(this.changePrinter)}},{key:"changePrinter",value:function(){var e=$("#choice").get(0).selectedIndex,t=localStorage.getItem("print");$("#printerInfo").html(""),t?($("#modal-ok").removeAttr("disabled"),$("#notice").html(""),0==e?$("#printerInfo").html("当前打印机："+JSON.parse(t).labelPrinter):1==e?$("#printerInfo").html("当前打印机："+JSON.parse(t).labelPrinter):2==e&&$("#printerInfo").html("当前打印机："+JSON.parse(t).waybillPrinter)):($("#modal-ok").attr("disabled","true"),$("#notice").html("请先到打印机配置页面配置打印机"))}},{key:"confirmPrinter",value:function(e){for(var t=getLodop(),a=t.GET_PRINTER_COUNT(),n=0;n<a;n++)if(t.GET_PRINTER_NAME(n)===e)return n}},{key:"createWaybillLabelModal",value:function(e,t){var a=0==t?e.volume:1,n=H.getSouroundDate(0);LODOP=getLodop();for(var o=0;o<a;o++)LODOP.NewPage(),LODOP.ADD_PRINT_TEXT(20,10,350,60,"K"+e.kno+"-"+e.custom.name),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(80,10,100,20,"合计"+e.volume+"件"),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(120,100,100,20,n),LODOP.SET_PRINT_STYLEA(0,"FontSize",8)}},{key:"createWaybillModal",value:function(e){LODOP=getLodop();var t=null!==e.info?e.info.note:"";LODOP.PRINT_INIT(""),LODOP.ADD_PRINT_TEXT(32,218,179,40,"大鱼物流配送单"),LODOP.SET_PRINT_STYLEA(0,"FontSize",18),LODOP.ADD_PRINT_TEXT(47,44,151,22,"服务、投诉电话：173 1300 6160"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.ADD_PRINT_TEXT(64,42,155,20,"网点：成都海霸王冻品区16栋外"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.ADD_PRINT_RECT(97,46,330,160,0,1),LODOP.ADD_PRINT_RECT(97,419,330,160,0,1),LODOP.ADD_PRINT_TEXT(10,520,90,25,"运 单 号："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(29,520,90,26,"配送日期："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(47,520,90,30,"配送司机："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(65,520,90,30,"运单Ｋ值："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(10,608,156,30,e.day_no),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.SET_PRINT_STYLEA(0,"FontColor","#FF0000"),LODOP.ADD_PRINT_TEXT(29,608,156,30,e.day),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(47,608,156,31,e.driver?e.driver.name+" "+e.driver.car_no:""),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(65,608,156,31,e.kno?"K"+e.kno:"-"),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(136,64,305,25,"发货人："+e.shop.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(160,64,305,25,"发货人电话："+e.shop.mobile),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(103,258,141,25,"发货地：海霸王"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(109,602,168,30,"提货码："+H.getLadingCode(e.code,[2,3,4])),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(162,436,305,25,"物流区域："+e.address.area.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(211,436,305,45,"提货地址："+e.address.full),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(137,436,305,25,"提货人："+e.custom.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(186,436,305,25,"提货电话："+e.custom.mobile),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_RECT(277,47,330,135,0,1),LODOP.ADD_PRINT_RECT(278,419,330,135,0,1),LODOP.ADD_PRINT_TEXT(292,65,40,25,"货物"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(317,65,305,25,"货物件数（袋、箱）："+e.volume),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(342,65,305,25,"备注："+t),LODOP.ADD_PRINT_RECT(370,226,142,37,0,1),LODOP.ADD_PRINT_TEXT(383,233,43,24,"签字"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(292,437,61,24,"代收货款"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(317,438,305,25,"货款："+e.amount+"元"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(380,438,100,25,"客户签字："),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(447,59,38,21,"说明："),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.SET_PRINT_STYLEA(0,"FontColor","#C0C0C0"),LODOP.ADD_PRINT_TEXT(459,84,529,31,"1、第一联（白单）公司存档，第二联（红单）发货方存档，第三联（蓝单）司机存档，第四联（黄单）提货方存档；\r\n2、本物流公司对货品质量概不负责，退货请双方沟通后联系司机取货，退货费10元起（小件8元，大件10元，泡沫箱20元）；"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.SET_PRINT_STYLEA(0,"FontColor","#C0C0C0")}},{key:"srOnlyLadingNumber",value:function(e){var t=["code"],a=$(e.target).html();this.setState({searchType:t,search:a},this.getData)}},{key:"srOnlySender",value:function(e){var t=["shop"],a=$(e.target).html();this.setState({searchType:t,page:1,search:a},this.getData)}},{key:"setPageNum",value:function(e){this.setState({page:e.page},this.getData)}},{key:"closePanel",value:function(){this.setState({panel:""})}},{key:"dispatching",value:function(){this.setState({panel:React.createElement(T.default,{closePanel:this.closePanel})})}},{key:"addFreight",value:function(){this.setState({panel:React.createElement(P.default,{closePanel:this.closePanel})})}},{key:"refresh",value:function(){this.setState({search:"",searchType:[],start:H.getSouroundDate(0),end:H.getSouroundDate(0),status:[],amount:"",currentDate:0,currentBillStatus:"-1",currentArea:0,currentReplace:0,page:1},this.getData)}},{key:"importWaybill",value:function(){$("#importWaybill")[0].click()}},{key:"urlEncode",value:function(e,t,a){if(null==e)return"";var n="",o="undefined"==typeof e?"undefined":l(e);if("string"==o||"number"==o||"boolean"==o)n+="&"+t+"="+(null==a||a?encodeURIComponent(e):e);else for(var r in e){var i=null==t?r:t+(e instanceof Array?"["+r+"]":"."+r);n+=this.urlEncode(e[r],i,a)}return n}},{key:"exportWaybill",value:function(){var e=this.state,t={};t.search=e.search,t.search_type=e.searchType,t.start=e.start,t.end=e.end,t.status=e.status,t.adcode=e.adcode,t.amount=e.amount,window.open("/logistics/delivery/export?"+this.urlEncode(t))}},{key:"importWaybillChange",value:function(){var e=this;$.ajax({url:"/logistics/delivery/import",type:"POST",data:new FormData($("#importWaySubmit")[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(t){$("#importWaybill").val(""),window.open(t),e.refresh()},error:function(){$("#importWaybill").val("")}})}},{key:"render",value:function(){return React.createElement("div",{className:"section-warp container-fluid"},React.createElement("div",{className:"section-table row"},React.createElement("div",{className:"section-filter"},this.createSelectArea(),React.createElement("div",{className:"filter-row pull-right"},React.createElement("a",{href:"javascript:;",className:"btn btn-lg btn-default",onClick:this.exportWaybill.bind(this)},"导出"),React.createElement("a",{href:"javascript:;",className:"btn btn-lg btn-default",onClick:this.importWaybill.bind(this)},"导入"),React.createElement("a",{href:"javascript:;",className:"btn btn-lg btn-default",onClick:this.addFreight.bind(this)},"录单"),React.createElement("a",{href:"javascript:;",className:"btn btn-lg btn-default",onClick:this.dispatching.bind(this)},"调度分配"),React.createElement("form",{id:"importWaySubmit",style:{width:"0",height:"0",overflow:"hidden"}},React.createElement("input",{id:"importWaybill",onChange:this.importWaybillChange.bind(this),name:"file",type:"file"})))),React.createElement("div",{className:"col-lg-12"},React.createElement("div",{className:"row"},React.createElement("div",{className:"row"},React.createElement("p",{className:"col-lg-6 pull-left"},"当前结果：",this.state.total,"个运单，共",this.state.customTotal,"个提货人，共",this.state.shopTotal,"个发货人"),React.createElement("a",{href:"javascript:;",className:"col-lg-6 text-right",onClick:this.refresh.bind(this)},"刷新")),this.createTable(),React.createElement(v.default,{key:this.state.count,maxPage:Math.ceil(this.state.total/this.state.size),clickCallback:this.setPageNum.bind(this)})))),this.state.panel)}}]),t}(React.Component);t.default=N},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(3),c=n(s),d=a(2),u=n(d),p=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currentStatus:"-1",waybillStatus:0,waybillList:[],waybillDetail:[],detailInfo:[],detail:null},a.getRealTimeList=a.getRealTimeList.bind(a),a}return i(t,e),l(t,[{key:"componentWillMount",value:function(){if($("#printScript").length<=0){var e='<script id="printScript" type="text/javascript" src="/js/LodopFuncs.js">';$("body").append(e)}this.getRealTimeList()}},{key:"getRealTimeList",value:function(){var e=this,t=void 0;t="-1"==this.state.currentStatus?null:this.state.currentStatus,H.server.get_real_time_waybill({status:t},function(t){0==t.code?e.setState({detailInfo:t.data.driver}):10106==t.code?H.overdue():H.Modal(t.message)})}},{key:"createCard",value:function(){var e=this,t=this.state.detailInfo,a=[];return t.length>0&&t.map(function(t,n){var o=["未发车","配送中","配送完成"],r=o[t.today_status/10];e.state.currentStatus!=t.today_status&&"-1"!=e.state.currentStatus||a.push(React.createElement("div",{key:n,className:"col-lg-3"},React.createElement("div",{className:"thumbnail","data-index":n,"data-uid":t.uid},React.createElement("div",{className:"caption"},React.createElement("div",{className:"row"},React.createElement("p",{className:"col-lg-7"},t.car_no),React.createElement("p",{className:"col-lg-5"},t.capacity)),React.createElement("div",{className:"row"},React.createElement("p",{className:"col-lg-7"},t.name+"["+t.mobile+"]"),React.createElement("p",{className:"col-lg-5"},"状态：",r)),React.createElement("hr",null),t.statics[0]?React.createElement("div",{className:"row"},React.createElement("span",{className:"col-lg-3"},"待揽货"),React.createElement("span",{className:"col-lg-4"},t.statics[0].customs,"户，",t.statics[0].volume,"件"),React.createElement("a",{href:"javascript:;",className:"col-lg-4",onClick:e.openDetailPanel.bind(e)},"待揽货名单")):null,t.statics[10]?React.createElement("div",{className:"row"},React.createElement("span",{className:"col-lg-3"},"待装车"),React.createElement("span",{className:"col-lg-4"},t.statics[10].customs,"户，",t.statics[10].volume,"件"),React.createElement("a",{href:"javascript:;",className:"col-lg-4",onClick:e.openDetailPanel.bind(e)},"待装车名单")):null,t.statics[20]?React.createElement("div",{className:"row"},React.createElement("span",{className:"col-lg-3"},"已装车"),React.createElement("span",{className:"col-lg-4"},t.statics[20].customs,"户，",t.statics[20].volume,"件"),React.createElement("a",{href:"javascript:;",className:"col-lg-4",onClick:e.openDetailPanel.bind(e)},"已装车名单")):null,t.statics[30]?React.createElement("div",{className:"row"},React.createElement("span",{className:"col-lg-3"},"配送中"),React.createElement("span",{className:"col-lg-4"},t.statics[30].customs,"户，",t.statics[30].volume,"件"),React.createElement("a",{href:"javascript:;",className:"col-lg-4",onClick:e.openDetailPanel.bind(e)},"配送中名单")):null,t.statics[40]?React.createElement("div",{className:"row"},React.createElement("span",{className:"col-lg-3"},"已送达"),React.createElement("span",{className:"col-lg-4"},t.statics[40].customs,"户，",t.statics[40].volume,"件"),React.createElement("a",{href:"javascript:;",className:"col-lg-4",onClick:e.openDetailPanel.bind(e)},"已送达名单")):null,t.statics[41]?React.createElement("div",{className:"row"},React.createElement("span",{className:"col-lg-3"},"被拒单"),React.createElement("span",{className:"col-lg-4"},t.statics[41].customs,"户，",t.statics[41].volume,"件"),React.createElement("a",{href:"javascript:;",className:"col-lg-4",onClick:e.openDetailPanel.bind(e)},"被拒单名单")):null,React.createElement("hr",null),React.createElement("div",{onClick:e.print.bind(e),className:"row",style:{marginLeft:"10px"}},React.createElement("button",{"data-uid":t.uid,className:"btn btn-sm btn-default",style:{marginRight:"10px"}},"打印K单"),React.createElement("button",{"data-uid":t.uid,className:"btn btn-sm btn-default"},"打印清货单"))))))}),React.createElement("div",{className:"row"},a)}},{key:"createStatus",value:function(){var e=["全部","未发车","配送中","已结束"],t=["-1",0,10,20];return React.createElement(c.default,{btnNames:e,bindData:t,clickCallback:this.toggleStatus.bind(this),style:"btn btn-lg",activeStyle:"btn btn-lg btn-default",status:this.state.currentStatus})}},{key:"toggleStatus",value:function(e){var t=e.target.dataset.index;t!==this.state.currentStatus&&this.setState({currentStatus:t})}},{key:"toggleWaybillStatus",value:function(e){var t=e.target.dataset.index;t!==this.state.waybillStatus&&this.setState({waybillStatus:t})}},{key:"createDetail",value:function(){var e=["待揽货","待装车","已装车","配送中","已送达","被拒单"],t=[0,10,20,30,40,41],a=this.state.detail;if(!a)return null;var n=["未发车","配送中","配送完成"],o=n[a.today_status/10];return React.createElement("div",{id:"detail",className:"detail"},React.createElement("div",{className:"btn-slide",onClick:this.closeDetail.bind(this)},"收起"),React.createElement("div",{className:"detail-content"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6"},a.car_no+" "+a.capacity),React.createElement("div",{className:"col-lg-4 pull-right"},"状态：",o)),React.createElement("div",{className:"row"},React.createElement("p",{className:"col-lg-12"},a.name," [",a.mobile,"]")),React.createElement("div",{className:"row",style:{marginBottom:"30px"}},React.createElement(c.default,{btnNames:e,bindData:t,clickCallback:this.toggleWaybillStatus.bind(this),style:"btn btn-xs",activeStyle:"btn btn-xs btn-default",status:this.state.waybillStatus})),React.createElement("div",{style:{height:"450px",overflowY:"scroll"}},this.createTable())))}},{key:"closeDetail",value:function(){$("#detail").removeClass("active")}},{key:"openDetailPanel",value:function(e){var t=this,a=$(e.target).html(),n=this.state.waybillStatus,o=e.target.parentNode.parentNode.parentNode.dataset.uid,r={"待揽货名单":0,"待装车名单":10,"已装车名单":20,"配送中名单":30,"已送达名单":40,"被拒单名单":41};for(var i in r)i==a&&(n=r[i]);H.server.get_real_time_detail({id:o},function(e){0==e.code?t.setState({waybillStatus:n,detail:e.data},function(){$("#detail").addClass("active")}):10106==e.code?H.overdue():H.Modal(e.message)})}},{key:"createTable",value:function(){var e=this,t=["运单号","提货码","件量","发货方"],a=["day_no","codes","volume","sender"],n={},o={},r={},i=[];return this.state.detail.deliveries.map(function(t){t.codes=H.getLadingCode(t.code,[2,3,4]),t.sender=t.shop.name,e.state.waybillStatus==t.status&&i.push(t)}),React.createElement(u.default,{values:i,headlines:t,order:a,bodyOperate:n,id:"InTimeInfo",statusOperate:r,status:o})}},{key:"refresh",value:function(){this.setState({currentStatus:"-1"},this.getRealTimeList)}},{key:"print",value:function(e){var t=e.target.innerHTML,a=e.target.dataset.uid?e.target.dataset.uid:0;switch(t){case"打印K单":this.printK(a);break;case"打印清货单":this.printDriver(a)}}},{key:"printK",value:function(e){var t=this,a=[],n="";new Promise(function(a){H.server.get_real_time_detail({id:e},function(e){0==e.code?t.setState({waybillList:e.data.deliveries},function(){a("ok")}):10106==e.code?H.overdue():H.Modal(e.message)})}).then(function(){for(var e=0;e<t.state.waybillList.length;e++)H.server.get_current_waybill({id:t.state.waybillList[e].id},function(e){0==e.code?e.data.kno&&"-10"!=e.data.status&&"-11"!=e.data.status&&"-12"!=e.data.status&&a.push(e.data):10106==e.code?H.overdue():H.Modal(e.message)});var o=setInterval(function(){a.length>0&&(clearInterval(o),H.Modal({title:"确认打印",content:"确认批量打印K单？",cancel:!0,okText:"开始打印",okCallback:function(){localStorage.getItem("print")&&(n=JSON.parse(localStorage.getItem("print")).waybillPrinter),t.createWaybillModal(a);var e=getLodop();e.SET_PRINT_PAGESIZE(0,2200,1405,"bills"),e.SET_PRINTER_INDEX(t.confirmPrinter(n)),e.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","bills"),e.PRINT()}}))},0)})}},{key:"printDriver",value:function(e){var t=this;console.log("打印清货单："+e);var a=[],n=0,o=0,r="";H.server.get_all_points({},function(t){if(0==t.code){var r=t.data,i=!1;r.map(function(t){i&&(n+=t.customs.length,i=!1),t.customs.map(function(n){n.deliveries.map(function(n){n.driver&&(n.area=t.area.parent+"-"+t.area.name,e==n.driver.uid&&(i=!0,o+=n.volume,a.push(n)))})})}),a.map(function(e){e.allHouse=n,e.allVolume=o})}else 10106==t.code?H.overdue():H.Modal(t.message)}),H.Modal({title:"确认打印",content:"确认司机清货单？",cancel:!0,okText:"开始打印",okCallback:function(){localStorage.getItem("print")&&(r=JSON.parse(localStorage.getItem("print")).driverPrinter),t.createPrintTable(a);var e=getLodop();e.SET_PRINT_PAGESIZE(0,2100,2970,"driver"),e.SET_PRINTER_INDEX(t.confirmPrinter(r)),e.SET_PRINT_MODE("CREATE_CUSTOM_PAGE_NAME","driver"),e.PRINT()}})}},{key:"createPrintTable",value:function(e){var t=[],a={};console.log(e),a=e[0].driver,a.allVolume=e[0].allVolume,a.allHouse=e[0].allHouse,a.allBills=e.length,a.deliveries={},e.length<=1&&(a.deliveries[H.getLadingCode(e[0].code,[2,3,4])]=[e[0]]);for(var n=0;n<e.length-1;n++)if(e.length>1){var o=H.getLadingCode(e[n].code,[2,3,4]),r=H.getLadingCode(e[n+1].code,[2,3,4]);a.deliveries[o]||(a.deliveries[o]=[]),a.deliveries[r]||(a.deliveries[r]=[]),o==r?a.deliveries[o].length>0?a.deliveries[o].push(e[n+1]):(a.deliveries[o].push(e[n]),a.deliveries[o].push(e[n+1])):a.deliveries[o].length>0?a.deliveries[r].push(e[n+1]):(a.deliveries[o].push(e[n]),a.deliveries[r].push(e[n+1]));
}else a.deliveries[H.getLadingCode(e[n].code,[2,3,4])].push(e[n]);a.goods=e,t.push(a);var i="",l=new Date,s="",c=[],d=[],u=H.getSouroundDate(0)+" "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds();t.map(function(e){c=Object.keys(e.deliveries).sort(),c.map(function(t){d.push(e.deliveries[t])}),d.map(function(e){for(var t=H.getLadingCode(e[0].code,[2,3,4]),a=H.getLadingCode(e[0].code,[2,3],"-"),n=0,o=e.length;n<o;n++){var r=0==n?'<td rowspan="'+o+'">'+t+"</td>":"",l=0==n?'<td rowspan="'+o+'">'+a+"</td>":"",s=0==n?'<td rowspan="'+o+'">'+e[0].area+"</td>":"",c=0==n?'<td rowspan="'+o+'"></td>':"";i+="<tr>"+r+l+"<td>"+e[n].day_no+"</td><td>"+e[n].volume+"</td><td>"+e[n].custom.name+"</td>"+s+c+"</tr>"}}),s='<style> table,td,th {border: 1px solid black;border-style: solid;border-collapse: collapse;line-height: 20px; text-align: center; font-size: 14px}</style><table border="1" width="705px"><thead><tr> <th wdith="15%">提货码</th><th width="10%">货架号</th><th width="20%">运单号</th><th width="10%">数量</th><th width="20%">收货人</th><th width="20%">物流线</th><th width="10%">排序</th></tr></thead><tbody>'+i+"</tbody></table>",LODOP.NewPage(),LODOP.ADD_PRINT_TABLE(111,27,710,920,s),LODOP.ADD_PRINT_TEXT(35,313,118,31,"司机清货单"),LODOP.SET_PRINT_STYLEA(0,"FontSize",15),LODOP.SET_PRINT_STYLEA(0,"Alignment",2),LODOP.SET_PRINT_STYLEA(0,"Horient",2),LODOP.ADD_PRINT_TEXT(80,30,211,26,"司机："+e.car_no+" "+e.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(79,242,173,25,"合计："+e.allHouse+"户，"+e.allBills+"票，"+e.allVolume+"件"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(81,512,221,25,"打印时间："+u),LODOP.SET_PRINT_STYLEA(0,"FontSize",10)})}},{key:"createWaybillModal",value:function(e){LODOP=getLodop();for(var t=0;t<e.length;t++){var a=null!==e[t].info?e[t].info.note:"";LODOP.NewPage(),LODOP.ADD_PRINT_TEXT(32,218,179,40,"大鱼物流配送单"),LODOP.SET_PRINT_STYLEA(0,"FontSize",18),LODOP.ADD_PRINT_TEXT(47,44,151,22,"服务、投诉电话：173 1300 6160"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.ADD_PRINT_TEXT(64,42,155,20,"网点：成都海霸王冻品区16栋外"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.ADD_PRINT_RECT(97,46,330,160,0,1),LODOP.ADD_PRINT_RECT(97,419,330,160,0,1),LODOP.ADD_PRINT_TEXT(10,520,90,25,"运 单 号："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(29,520,90,26,"配送日期："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(47,520,90,30,"配送司机："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(65,520,90,30,"运单Ｋ值："),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(10,608,156,30,e[t].day_no),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.SET_PRINT_STYLEA(0,"FontColor","#FF0000"),LODOP.ADD_PRINT_TEXT(29,608,156,30,e[t].day),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(47,608,156,31,e[t].driver?e[t].driver.name+" "+e[t].driver.car_no:""),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(65,608,156,31,e[t].kno?"K"+e[t].kno:"-"),LODOP.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),LODOP.SET_PRINT_STYLEA(0,"FontSize",12),LODOP.ADD_PRINT_TEXT(136,64,305,25,"发货人："+e[t].shop.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(160,64,305,25,"发货人电话："+e[t].shop.mobile),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(103,258,141,25,"发货地：海霸王"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(109,602,168,30,"提货码："+H.getLadingCode(e[t].code,[2,3,4])),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(162,436,305,25,"物流区域："+e[t].address.area.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(211,436,305,45,"提货地址："+e[t].address.full),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(137,436,305,25,"提货人："+e[t].custom.name),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(186,436,305,25,"提货电话："+e[t].custom.mobile),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_RECT(277,47,330,135,0,1),LODOP.ADD_PRINT_RECT(278,419,330,135,0,1),LODOP.ADD_PRINT_TEXT(292,65,40,25,"货物"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(317,65,305,25,"货物件数（袋、箱）："+e[t].volume),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(342,65,305,25,"备注："+a),LODOP.ADD_PRINT_RECT(370,226,142,37,0,1),LODOP.ADD_PRINT_TEXT(383,233,43,24,"签字"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(292,437,61,24,"代收货款"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(317,438,305,25,"货款："+e[t].amount+"元"),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(380,438,100,25,"客户签字："),LODOP.SET_PRINT_STYLEA(0,"FontSize",10),LODOP.ADD_PRINT_TEXT(447,59,38,21,"说明："),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.SET_PRINT_STYLEA(0,"FontColor","#C0C0C0"),LODOP.ADD_PRINT_TEXT(459,84,529,31,"1、第一联（白单）公司存档，第二联（红单）发货方存档，第三联（蓝单）司机存档，第四联（黄单）提货方存档；\r\n2、本物流公司对货品质量概不负责，退货请双方沟通后联系司机取货，退货费10元起（小件8元，大件10元，泡沫箱20元）；"),LODOP.SET_PRINT_STYLEA(0,"FontSize",7),LODOP.SET_PRINT_STYLEA(0,"FontColor","#C0C0C0")}}},{key:"confirmPrinter",value:function(e){for(var t=getLodop(),a=t.GET_PRINTER_COUNT(),n=0;n<a;n++)if(t.GET_PRINTER_NAME(n)===e)return n}},{key:"render",value:function(){return React.createElement("div",{className:"section-warp"},React.createElement("div",{className:"section-table"},React.createElement("div",{className:"section-filter"},React.createElement("form",{className:"form-inline"},React.createElement("div",{className:"filter-row"},this.createStatus(),React.createElement("a",{href:"javascript:;",className:"form-control-static",style:{marginLeft:"50px"},onClick:this.refresh.bind(this)},"刷新")))),React.createElement("div",{className:"col-lg-12"},this.createCard(),this.createDetail())))}}]),t}(React.Component);t.default=p},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(e){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),r(t,[{key:"componentWillMount",value:function(){if($("#printScript").length<=0){var e='<script id="printScript" type="text/javascript" src="/js/LodopFuncs.js">';$("body").append(e)}}},{key:"componentDidMount",value:function(){var e=this;H.Modal({title:"警告",content:"每次更换电脑或清除浏览器缓存之后，需重新至本页面配置打印机。",okText:"我知道了",okCallback:function(){e.createPrinter(),e.setPrinter()}})}},{key:"createPrinter",value:function(){LODOP=getLodop();for(var e=LODOP.GET_PRINTER_COUNT(),t=0;t<e;t++){var a=$("<option></option>");a.html(LODOP.GET_PRINTER_NAME(t)),a.val(t),$("#waybill, #tag, #bill, #driver, #label").append(a)}}},{key:"setPrinter",value:function(){if(localStorage.getItem("print")){var e=JSON.parse(localStorage.getItem("print"));console.log(e);for(var t=0;t<LODOP.GET_PRINTER_COUNT();t++)LODOP.GET_PRINTER_NAME(t)==e.waybillPrinter&&($("#waybill").get(0).selectedIndex=t),LODOP.GET_PRINTER_NAME(t)==e.tagPrinter&&($("#tag").get(0).selectedIndex=t),LODOP.GET_PRINTER_NAME(t)==e.billPrinter&&($("#bill").get(0).selectedIndex=t),LODOP.GET_PRINTER_NAME(t)==e.driverPrinter&&($("#driver").get(0).selectedIndex=t),LODOP.GET_PRINTER_NAME(t)==e.labelPrinter&&($("#label").get(0).selectedIndex=t)}}},{key:"savePrint",value:function(){var e={waybillPrinter:$("#waybill").find("option:selected").text(),tagPrinter:$("#tag").find("option:selected").text(),billPrinter:$("#bill").find("option:selected").text(),driverPrinter:$("#driver").find("option:selected").text(),labelPrinter:$("#label").find("option:selected").text()};H.Modal({content:"确认保存打印机配置？",cancel:!0,okText:"确认保存",okCallback:function(){localStorage.setItem("print",JSON.stringify(e))}})}},{key:"render",value:function(){return React.createElement("div",{className:"goods-info-ctrl"},React.createElement("div",{className:"goods-info container-fluid"},React.createElement("h3",{className:"title"},"打印机配置"),React.createElement("hr",null),React.createElement("div",{className:"goods-info-content"},React.createElement("h4",{className:"text-left text-warning"},"警告：每次更换电脑或清除浏览器缓存之后，需重新至本页面配置打印机。"),React.createElement("div",{className:"panel panel-default col-lg-6",style:{padding:0}},React.createElement("div",{className:"panel-body col-lg-12"},React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-lg-2 text-right form-control-static"},"配送单"),React.createElement("div",{className:"col-lg-8"},React.createElement("select",{id:"waybill",className:"form-control"}))),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-lg-2 text-right form-control-static"},"货品标签"),React.createElement("div",{className:"col-lg-8"},React.createElement("select",{id:"tag",className:"form-control"}))),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-lg-2 text-right form-control-static"},"收据"),React.createElement("div",{className:"col-lg-8"},React.createElement("select",{id:"bill",className:"form-control"}))),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-lg-2 text-right form-control-static"},"司机单"),React.createElement("div",{className:"col-lg-8"},React.createElement("select",{id:"driver",className:"form-control"}))),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-lg-2 text-right form-control-static"},"运单标签"),React.createElement("div",{className:"col-lg-8"},React.createElement("select",{id:"label",className:"form-control"})))),React.createElement("div",{className:"panel-footer col-lg-12"},React.createElement("a",{href:"javascript:;",className:"btn btn-default btn-lg",onClick:this.savePrint.bind(this)},"保存配置"))))))}}]),t}(React.Component);t.default=i},function(e,t){"use strict";!function(){var e=H.namespace("server"),t="",a=function(e,a,n,o,r){"function"==typeof o||(o=function(){});var i=r?{"Cache-Control":"no-cache",Accept:"application/json","Content-Type":r}:{"Cache-Control":"no-cache",Accept:"application/json"},l=$.ajax({url:a+"?r="+Math.random(),data:n,type:e,dataType:"json",async:!0,cache:!1,headers:i,timeout:3e5,success:function(e,t,a){o.call(this,e,t,a)},error:function(e,a,n){if(401==e.status)location.href=t;else{if(!n)return!1;var r={101:"网络不稳定或不畅通，请检查网络设置",403:"服务器禁止此操作！",500:"服务器遭遇异常阻止了当前请求的执行<br/><br/><br/>"},i=null;switch(a){case"timeout":i="网络连接超时，请检查网络是否畅通！";break;case"error":if(r[e.status]){var l=null;try{l=jQuery.parseJSON(e.responseText)}catch(e){}i=l&&l.message?l.message:r[e.status]}else i="服务器响应异常<br/><br/>"+(0==e.status?"":e.status)+"&nbsp;"+n;break;case"abort":i=null;break;case"parsererror":i="数据解析错误！";break;default:i="出现错误:"+a+"！"}null==n.code||null==n.message||r[n.code]||(i+="</br>[code:"+n.code+"][message:"+n.message+"]"+(null==n.stack?"":n.stack)),null==i&&(i=""),o.call(this,{code:e.status,message:i},a,e,n)}}});return l};e.login=function(e,n){return a("post",t+"/user/login",e,n)},e.logout=function(e,n){return a("post",t+"/user/logout",e,n)},e.user_navigate=function(e,n){return a("get",t+"/user/navigate",e,n)},e.user_info=function(e,n){return a("get",t+"/user/info",e,n)},e.user_list=function(e,n){return a("get",t+"/user/list",e,n)},e.user_info_update=function(e,n){return a("post",t+"/user/info/update",e,n)},e.user_add=function(e,n){return a("post",t+"/user/add",e,n)},e.user_status_update=function(e,n){return a("post",t+"/user/status/update",e,n)},e.user_privilege=function(e,n){return a("get",t+"/user/privilege",e,n)},e.user_privilege_update=function(e,n){return a("post",t+"/user/privilege/update",e,n)},e.department_list=function(e,n){return a("get",t+"/department/list",e,n)},e.department_add=function(e,n){return a("post",t+"/department/add",e,n)},e.department_info_update=function(e,n){return a("post",t+"/department/info/update",e,n)},e.department_status_update=function(e,n){return a("post",t+"/department/status/update",e,n)},e.privilege_list=function(e,n){return a("get",t+"/privilege/list",e,n)},e.privilege_add=function(e,n){return a("post",t+"/privilege/add",e,n)},e.privilege_update=function(e,n){return a("post",t+"/privilege/update",e,n)},e.privilege_info=function(e,n){return a("get",t+"/privilege/info",e,n)},e.privilege_status_update=function(e,n){return a("post",t+"/privilege/status/update",e,n)},e.trade_list=function(e,n){return a("get",t+"/logistics/list",e,n)},e.trade_add=function(e,n){return a("post",t+"/logistics/add",e,n)},e.trade_info=function(e,n){return a("get",t+"/logistics/info",e,n)},e.trade_info_update=function(e,n){return a("post",t+"/logistics/info/update",e,n)},e.trade_status_update=function(e,n){return a("post",t+"/logistics/status/update",e,n)},e.trade_fees_list=function(e,n){return a("get",t+"/logistics/fees/list",e,n)},e.shop_type_list=function(e,n){return a("get",t+"/shop/type/list",e,n)},e.other_area_list=function(e,n){return a("get",t+"/other/area/list",e,n)},e.other_customArea_list=function(e,n){return a("get",t+"/other/custom-area/list",e,n)},e.operate_dailyNews_receiveUser_list=function(e,n){return a("get",t+"/operate/daily-news/receive-user/list",e,n)},e.operate_todayArticle_list=function(e,n){return a("get",t+"/operate/today-article/list",e,n)},e.other_todayArticle_type=function(e,n){return a("get",t+"/other/today-article/type",e,n)},e.operate_todayArticle_edit=function(e,n){return a("post",t+"/operate/today-article/edit",e,n)},e.operate_todayArticle_delete=function(e,n){return a("post",t+"/operate/today-article/delete",e,n)},e.operate_dailyNews_goods_list=function(e,n){return a("get",t+"/operate/daily-news/goods/list",e,n)},e.operate_dailyNews_goods_shield=function(e,n){return a("post",t+"/operate/daily-news/goods/shield",e,n)},e.other_oss_signature=function(e,n){return a("get",t+"/other/oss/signature",e,n)},e.other_oss_identity_data=function(e,n){return a("get",t+"/other/oss/identity/data",e,n)},e.operate_dailyNews_log_list=function(e,n){return a("get",t+"/operate/daily-news/log/list",e,n)},e.operate_dailyNews_manage_list=function(e,n){return a("get",t+"/operate/daily-news/manage/list",e,n)},e.operate_dailyNews_manage_edit=function(e,n){return a("post",t+"/operate/daily-news/manage/edit",e,n)},e.shop_type_info=function(e,n){return a("get",t+"/shop/type/info",e,n)},e.activities_list=function(e,n){return a("get",t+"/activities/list",e,n)},e.activities_add=function(e,n){return a("post",t+"/activities/add",e,n,"application/json")},e.activities_update=function(e,n){return a("post",t+"/activities/update",e,n,"application/json")},e.activities_goods_list=function(e,n){return a("get",t+"/activities/goods/list",e,n)},e.activities_goods_add=function(e,n){return a("post",t+"/activities/goods/add",e,n)},e.activities_goods_del=function(e,n){return a("post",t+"/activities/goods/del",e,n)},e.activities_goods_clear=function(e,n){return a("post",t+"/activities/goods/clear",e,n)},e.activities_goods_sort=function(e,n){return a("post",t+"/activities/goods/sort",e,n)},e.operate_dailyNews_goods_recommend=function(e,n){return a("post",t+"/operate/daily-news/goods/recommend",e,n)},e.operate_dailyNews_recommend_goods_remove=function(e,n){return a("post",t+"/operate/daily-news/recommend/goods/remove",e,n)},e.operate_dailyNews_recommend_goods_removeAll=function(e,n){return a("post",t+"/operate/daily-news/recommend/goods/remove-all",e,n)},e.operate_dailyNews_recommend_goods_sort=function(e,n){return a("post",t+"/operate/daily-news/recommend/goods/sort",e,n)},e.goods_type_add=function(e,n){return a("post",t+"/goods/type/add",e,n)},e.goods_type_list=function(e,n){return a("get",t+"/goods/type/list",e,n)},e.goods_type_update=function(e,n){return a("post",t+"/goods/type/update",e,n)},e.goods_type_delete=function(e,n){return a("post",t+"/goods/type/delete",e,n)},e.goods_type_sort=function(e,n){return a("post",t+"/goods/type/sort",e,n,"application/json")},e.goods_type_info=function(e,n){return a("get",t+"/goods/type/info",e,n)},e.other_goods_type_attr_inputFormat_list=function(e,n){return a("get",t+"/other/goods/type/attr/input-format/list",e,n)},e.goods_type_basicAttr_get=function(e,n){return a("get",t+"/goods/type/basic-attr/get",e,n)},e.goods_type_basicAttr_update=function(e,n){return a("post",t+"/goods/type/basic-attr/update",e,n,"application/json")},e.goods_type_specialAttr_update=function(e,n){return a("post",t+"/goods/type/special-attr/update",e,n,"application/json")},e.goods_type_specialAttr_list=function(e,n){return a("get",t+"/goods/type/special-attr/list",e,n)},e.goods_type_specialAttr_delete=function(e,n){return a("post",t+"/goods/type/special-attr/delete",e,n,"application/json")},e.goods_brands_list=function(e,n){return a("get",t+"/goods/brands/list",e,n)},e.goods_brands_delete=function(e,n){return a("post",t+"/goods/brands/delete",e,n)},e.goods_brands_add=function(e,n){return a("post",t+"/goods/brands/add",e,n)},e.goods_brands_update=function(e,n){return a("post",t+"/goods/brands/update",e,n)},e.goods_transfer_shop_list=function(e,n){return a("get",t+"/goods/transfer/shop/list",e,n)},e.goods_transfer_list=function(e,n){return a("get",t+"/goods/transfer/list",e,n)},e.goods_shop_info=function(e,n){return a("get",t+"/goods/shop/info",e,n)},e.goods_transfer_shielding=function(e,n){return a("post",t+"/goods/transfer/shielding",e,n,"application/json")},e.goods_transfer_oldGoods_del=function(e,n){return a("post",t+"\t/goods/transfer/old-goods/del",e,n,"application/json")},e.activities_type=function(e,n){return a("get",t+"/activities/type",e,n)},e.other_goods_units=function(e,n){return a("get",t+"/other/goods/units",e,n)},e.other_goods_smuggles=function(e,n){return a("get",t+"/other/goods/smuggles",e,n)},e.goods_picture_del=function(e,n){return a("post",t+"/goods/picture/del",e,n,"application/json")},e.goods_picture_list=function(e,n){return a("get",t+"/goods/picture/list",e,n)},e.goods_inspectionReport_picture_del=function(e,n){return a("post",t+"/goods/inspection-report/picture/del",e,n,"application/json")},e.goods_add=function(e,n){return a("post",t+"/goods/add",e,n,"application/json")},e.goods_ordinary_list=function(e,n){return a("get",t+"/goods/ordinary/list",e,n)},e.goods_ordinary_soldOut=function(e,n){return a("post",t+"/goods/ordinary/sold-out",e,n)},e.goods_ordinary_priceRefresh=function(e,n){return a("post",t+"/goods/ordinary/price-refresh",e,n)},e.goods_ordinary_delete=function(e,n){return a("post",t+"\t/goods/ordinary/delete",e,n)},e.goods_ordinary_onSale=function(e,n){return a("post",t+"/goods/ordinary/on-sale",e,n)},e.goods_ordinary_undelete=function(e,n){return a("post",t+"/goods/ordinary/undelete",e,n)},e.shop_newGoods_market_list=function(e,n){return a("get",t+"/shop/new-goods/market/list",e,n)},e.goods_newGoods_list=function(e,n){return a("get",t+"/goods/new-goods/list",e,n)},e.goods_audit_pass=function(e,n){return a("post",t+"/goods/audit/pass",e,n,"application/json")},e.goods_audit_refused=function(e,n){return a("post",t+"/goods/audit/refused",e,n,"application/json")},e.shop_customArea_shipmentMarket_list=function(e,n){return a("get",t+"/shop/custom-area/shipment-market/list",e,n)},e.goods_logs_list=function(e,n){return a("get",t+"/goods/logs/list",e,n)},e.goods_historyPrices_list=function(e,n){return a("get",t+"/goods/history-prices/list",e,n)},e.goods_info=function(e,n){return a("get",t+"/goods/info",e,n)},e.goods_update=function(e,n){return a("post",t+"/goods/update",e,n,"application/json")},e.goods_price_rules=function(e,n){return a("get",t+"/goods/price-rules",e,n)},e.get_access_config=function(e,n){return a("get",t+"/search/boost",e,n)},e.push_access_config=function(e,n){return a("post",t+"/search/boost",e,n)},e.search_synonym=function(e,t){var a="https://idongpin.oss-cn-qingdao.aliyuncs.com/events/search/synonym.txt";window.location.href.indexOf("test.oa.zdongpin")==-1&&(a="https://idongpin.oss-cn-qingdao.aliyuncs.com/Public/search/synonym.txt"),$.ajax({url:a+"?v="+Math.random(),success:function(e){t(e)}})},e.search_custom=function(e,t){var a="https://idongpin.oss-cn-qingdao.aliyuncs.com/events/search/dict/custom.txt";window.location.href.indexOf("test.oa.zdongpin")==-1&&(a="https://idongpin.oss-cn-qingdao.aliyuncs.com/Public/search/dict/custom.txt"),$.ajax({url:a+"?v="+Math.random(),success:function(e){t(e)}})},e.search_synonym_update=function(e,n){return a("post",t+"/search/synonym/update",e,n)},e.search_dict_update=function(e,n){return a("post",t+"/search/dict/update",e,n)},e.search_index_init=function(e,n){return a("post",t+"/search/index/init",e,n)},e.get_all_area=function(e,n){var o="";return o=e.id?"/logistics/area/map/"+e.id:"/logistics/area/map",a("get",t+o,e,n)},e.get_logistic_street=function(e,n){var o="";return o=e.id?"/logistics/area/street/"+e.id:"/logistics/area/street",a("get",t+o,e,n)},e.change_street_state=function(e,n){return a("post",t+"/logistics/area/street/status",e,n)},e.get_capacity_info=function(e,n){return a("get",t+"/logistics/capacity/"+e.display,e,n)},e.modify_capacity=function(e,n){return a("post",t+"/logistics/capacity/update",e,n)},e.add_capacity=function(e,n){return a("post",t+"/logistics/capacity/add",e,n)},e.delete_capacity=function(e,n){return a("post",t+"/logistics/capacity/delete",e,n)},e.get_driver_info=function(e,n){return a("get",t+"/logistics/driver",e,n)},e.modify_driver_state=function(e,n){return a("post",t+"/logistics/driver/status",e,n)},e.modify_driver=function(e,n){return a("post",t+"/logistics/driver/update",e,n)},e.delete_driver=function(e,n){return a("post",t+"/logistics/driver/delete",e,n)},e.get_work_driver=function(e,n){return a("get",t+"/logistics/capacity/available",e,n)},e.get_all_waybill=function(e,n){return a("post",t+"/logistics/delivery",e,n)},e.cancel_waybill=function(e,n){return a("post",t+"/logistics/delivery/cancel/"+e.id,e,n)},e.get_current_waybill=function(e,n){return a("get",t+"/logistics/delivery/"+e.id,e,n)},e.update_waybill_detail=function(e,n){return a("post",t+"/logistics/delivery/update/"+e.method+"/"+e.id,e,n)},e.waybill_buy_over=function(e,n){return a("post",t+"/logistics/delivery/received/"+e.id,e,n)},e.get_real_time_waybill=function(e,n){return a("get",t+"/logistics/intime",e,n)},e.get_real_time_detail=function(e,n){return a("get",t+"/logistics/intime/"+e.id,e,n)},e.get_today_waybill=function(e,n){return a("get",t+"/logistics/delivery/statics",e,n)},e.get_all_points=function(e,n){return a("get",t+"/logistics/delivery/points",e,n)},e.assign_delivery=function(e,n){return a("post",t+"/logistics/delivery/assign",e,n)},e.shop_search=function(e,n){return a("get",t+"/logistics/shop/search",e,n)},e.sign_shop=function(e,n){return a("post",t+"/logistics/shop/sign",e,n)},e.get_address=function(e,n){return a("get",t+"/logistics/shop/address/"+e.id,e,n)},e.send_order=function(e,n){return a("post",t+"/logistics/shop/order/"+e.id,e,n)},e.update_custom_address=function(e,n){return a("post",t+"/logistics/shop/address/update/"+e.id,e,n)},e.add_custom_address=function(e,n){return a("post",t+"/logistics/shop/address/add/"+e.id,e,n)},e.get_all_customer=function(e,n){return a("get",t+"/logistics/custom",e,n)},e.get_custom_by_id=function(e,n){return a("get",t+"/logistics/custom/"+e.id,e,n)},e.update_custom=function(e,n){return a("post",t+"/logistics/custom/"+e.id,e,n)},e.get_unpaid_waybill=function(e,n){return a("get",t+"/logistics/charge/unpaid",e,n)},e.get_paid_waybill=function(e,n){return a("get",t+"/logistics/charge/paid",e,n)},e.get_canceled_waybill=function(e,n){return a("get",t+"/logistics/charge/canceled",e,n)},e.cancel_charge=function(e,n){return a("post",t+"/logistics/charge/cancel/"+e.id,e,n)},e.create_charge=function(e,n){return a("post",t+"/logistics/charge/create",e,n)},e.send_code=function(e,n){return a("post",t+"/verify/mobile",e,n)},e.unpay_waybill=function(e,n){return a("post",t+"/logistics/charge/free",e,n)},e.logistics_charge_config_get=function(e,n){return a("get",t+"/logistics/charge/getconfig",e,n)},e.logistics_charge_config_set=function(e,n){return a("post",t+"/logistics/charge/setconfig",e,n,"application/json")},e.get_all_address=function(e,n){return a("post",t+"/map/search/hint",e,n)},e.gecode_address=function(e,n){return a("post",t+"/map/geocode/regeo",e,n)},e.version_log_add=function(e,n){return a("post",t+"/system/version/log/add",e,n)},e.version_log_list=function(e,n){return a("get",t+"/system/version/log/list",e,n)},e.version_log_update=function(e,n){return a("post",t+"/system/version/log/update",e,n)},e.get_area_list=function(e,n){return a("get",t+"/other/custom-area/list",e,n)},e.get_brand_house_list=function(e,n){return a("get",t+"/operation-manage/index-manage/brands-house/list",e,n)},e.sold_out_brand=function(e,n){return a("post",t+"/operation-manage/index-manage/brands-house/pull-off",e,n)},e.search_brand=function(e,n){return a("get",t+"/operation-manage/index-manage/brand-name",e,n)},e.add_brand_house=function(e,n){return a("post",t+"\t/operation-manage/index-manage/brands-house/add",e,n)},e.indexManage_recommendGoods_list=function(e,n){return a("get",t+"/operation-manage/index-manage/recommend-goods/list",e,n)},e.indexManage_recommendGoods_add=function(e,n){return a("post",t+"\t/operation-manage/index-manage/recommend-goods/add",e,n)},e.indexManage_recommendGoods_pullOff=function(e,n){return a("post",t+"/operation-manage/index-manage/recommend-goods/pull-off",e,n)},e.indexManage_highQualitySuppliers_list=function(e,n){return a("get",t+"/operation-manage/index-manage/high-quality-suppliers/list",e,n)},e.indexManage_highQualitySuppliers_add=function(e,n){return a("post",t+"/operation-manage/index-manage/high-quality-suppliers/add",e,n)},e.indexManage_highQualitySuppliers_pullOff=function(e,n){return a("post",t+"/operation-manage/index-manage/high-quality-suppliers/pull-off",e,n)},e.indexManage_get_highQualitySuppliers_byId=function(e,n){return a("get",t+"/operation-manage/index-manage/shop-name",e,n)},e.indexManage_newGoods_add=function(e,n){return a("post",t+"/operation-manage/index-manage/new-goods/add",e,n)},e.indexManage_newGoods_list=function(e,n){return a("get",t+"/operation-manage/index-manage/new-goods/list",e,n)},e.indexManage_newGoods_pullOff=function(e,n){return a("post",t+"/operation-manage/index-manage/new-goods/pull-off",e,n)},e.indexManage_newGoods_move=function(e,n){return a("post",t+"/operation-manage/index-manage/new-goods/move",e,n)},e.indexManage_highQualitySuppliers_move=function(e,n){return a("post",t+"/operation-manage/index-manage/high-quality-suppliers/move",e,n)},e.indexManage_recommendGoods_move=function(e,n){return a("post",t+"/operation-manage/index-manage/recommend-goods/move",e,n)},e.indexManage_banner_list=function(e,n){return a("get",t+"/operation-manage/buyer-index/banner/list",e,n)},e.indexManage_update_banner=function(e,n){return a("post",t+"/common/banner/show-time/update",e,n)},e.indexManage_banner_position=function(e,n){return a("post",t+"/common/banner/position/update",e,n)},e.indexManage_banner_add=function(e,n){return a("post",t+"/operation-manage/buyer-index/banner/add",e,n)},e.indexManage_ad_list=function(e,n){return a("get",t+"/operation-manage/index-manage/popup-ads/list",e,n)},e.indexManage_pulloff_ad=function(e,n){return a("post",t+"/operation-manage/index-manage/popup-ads/pull-off",e,n)},e.indexManage_add_ad=function(e,n){return a("post",t+"/operation-manage/index-manage/popup-ads/add",e,n)},e.bi_order=function(e,n){return a("post",t+"/bi/order",e,n)},e.bi_order_filter=function(e,n){return a("post",t+"/bi/order/filter",e,n)},e.service_list=function(e,n){return a("get",t+"/provider/",e,n)},e.show_service=function(e,n){return a("get",t+"/provider/show",e,n)},e.update_service=function(e,n){return a("post",t+"/provider/sp/update",e,n)},e.search_service=function(e,n){return a("post",t+"/provider/search",e,n)},e.service_log_list=function(e,n){return a("get",t+"/provider/log",e,n)},e.handle_service=function(e,n){return a("post",t+"/provider/handle",e,n)},e.update_wechat_service=function(e,n){return a("post",t+"/provider/wechat-config",e,n)},e.category_list=function(e,n){return a("get",t+"/provider/sort",e,n)},e.add_category=function(e,n){return a("post",t+"/provider/sort/add",e,n)},e.wechat_tag_list=function(e,n){return a("get",t+"/provider/wechat-tags",e,n)},e.update_tag=function(e,n){return a("post",t+"/provider/wechat-tag/update",e,n)},e.del_tag=function(e,n){return a("post",t+"/provider/wechat-tag/del",e,n)},e.wechat_menu_list=function(e,n){return a("get",t+"/provider/wechat-menus",e,n)},e.del_menu=function(e,n){return a("post",t+"/provider/wechat-menu/del",e,n)},e.update_menu=function(e,n){return a("post",t+"/provider/wechat-menu/edit",e,n)},e.get_menu_type=function(e,n){return a("get",t+"/provider/wechat-menu-types",e,n)},e.customer_statistics=function(e,n){return a("post",t+"/bi/provider/customers",e,n,"application/json")},e.order_statistics=function(e,n){return a("post",t+"/bi/provider/order",e,n,"application/json")},e.get_provider_province=function(e,n){return a("get",t+"/provider/province",e,n)},e.get_provider_children=function(e,n){return a("get",t+"/provider/children/"+e.id,e,n)},e.rank_order=function(e,n){return a("post",t+"/bi/provider/rank-order",e,n,"application/json")},e.rank_goods=function(e,n){return a("post",t+"/bi/provider/rank-goods",e,n,"application/json")}}()},function(e,t,a){(function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,n){"object"===t(e)&&"object"===t(e.exports)?e.exports=a.document?n(a,!0):function(e){if(!e.document)throw new Error("I required a window with a document");return n(e)}:n(a)}("undefined"!=typeof window?window:void 0,function(e,a){Function.prototype.method=function(e,t){return this.prototype[e]=t,this},Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var a,n;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+"is not a function");for(arguments.length>1&&(a=t),n=0;n<r;){var i;n in o&&(i=o[n],e.call(a,i,n,o)),n++}}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var n={},o={},r=o.toString,i=/\S+/g,l=/[\t\r\n\f]/g,s={eachVarType:function(e){var t="Boolean Number String Function Array Date RegExp Object Error".split(" ");return t.forEach(function(t){e["[object "+t+"]"]=t.toLowerCase()}),e},type:function(e){return null==e?e+"":"object"===("undefined"==typeof e?"undefined":t(e))||"function"==typeof e?o[r.call(e)]||"object":"undefined"==typeof e?"undefined":t(e)}};s.eachVarType(o),n.isFunction=function(e){return"function"===s.type(e)},n.isArray=function(e){return"array"===s.type(e)},n.isString=function(e){return"string"===s.type(e)},n.getId=function(e){return document.getElementById(e)},n.getClass=function(e){return document.getElementsByClassName(e)},n.namespace=function(e){function t(e){var t=e.split("."),a=n;for(var o in t)a[t[o]]||(a[t[o]]={}),a=a[t[o]];return a}if(n.isString(e))return t(e);if(n.isFunction(e)){var a=e.call(this);if(n.isString(a))return t(a);throw"必须返回一个有效的字符串。"}throw"not strings in "},n.addClass=function(e,t){var a,o,r,s,c,d,u=0,p=e.length||1;n.isFunction(t)&&(t=t.call(this,e.className));var m="string"==typeof t&&t;if(m)for(a=(t||"").match(i)||[];u<p;u++)if(o=e[u]||e,
r=1===o.nodeType&&(o.className?(" "+o.className+" ").replace(l," "):" ")){for(c=0;s=a[c++];)r.indexOf(" "+s+" ")<0&&(r+=s+" ");d=r.trim(),o.className!==d&&(o.className=d)}return this},n.removeClass=function(e,t){var a,o,r,s,c,d,u=0,p=e.length||1;n.isFunction(t)&&(t=t.call(this,e.className));var m="undefined"==typeof t||"string"==typeof t&&t;if(m)for(a=(t||"").match(i)||[];u<p;u++)if(o=e[u]||e,r=1===o.nodeType&&(o.className?(" "+o.className+" ").replace(l," "):"")){for(c=0;s=a[c++];)for(;r.indexOf(" "+s+" ")>=0;)r=r.replace(" "+s+" "," ");d=t?r.trim():"",o.className!==d&&(o.className=d)}return this},n.Modal=function(){var e=null,t=function(e){this.settings={},this.init(e)};return t.method("init",function(t){if(!e){e=this;var a={width:"350",height:"600",title:"提示",titlePostion:"center",content:"",autoClose:!0,closeBtn:!1,closeCallback:null,cancel:!1,cancelCallback:null,cancelText:"关闭",ok:!0,okText:"确定",okCallback:null,maskClose:!1,init:null};n.isString(t)&&(t={content:t}),this.settings=$.extend(!0,a,t||{}),this.render(this.settings)}}),t.method("render",function(e){var t=this,a=null;this.createDom(e),a=$(".modal-body"),a.on("click",".modal-close",function(a){e.closeCallback&&e.closeCallback(t.destroy,$("#modal-content")),t.destroy()}),a.on("click",".modal-ok",function(a){e.okCallback&&e.okCallback(t.destroy,$("#modal-content"),{hideOkBtn:t.hideOkBtn,showCancelBtn:t.showCancelBtn.bind(t)}),t.settings.autoClose&&t.destroy()}),a.on("click",".modal-cancel",function(a){e.cancelCallback&&e.cancelCallback(t.destroy,$("#modal-content")),t.settings.autoClose&&t.destroy()}),$("body").on("click","#modal-mask",function(){if(e.maskClose){if(!t.settings.autoClose)return;t.destroy()}})}),t.method("createDom",function(e){var t='<div class="modal-mask" id="modal-mask" style="position: fixed;width: 100%;height: 100%;top: 0; left: 0;z-index: 1000;background: rgba(0,0,0,0.4);"></div>',a='<div id="modal-body" class="modal-body" style="position: fixed;padding-bottom: 20px;width: '+e.width+"px;max-height: "+e.height+'px;top: 50%;left: 50%;-webkit-transform: translate(-50%,-50%);-moz-transform: translate(-50%,-50%);-ms-transform: translate(-50%,-50%);-o-transform: translate(-50%,-50%);transform: translate(-50%,-50%);overflow: hidden;background: #fff;z-index: 1001;"><h4 class="modal-title" style="position: relative;margin: 0;padding-left: 20px;border-top: 4px solid #38b7f6;line-height: 42px;font-size: 14px;border-bottom: 1px solid #d0d0d0;">'+e.title+'<i id="modal-close" class="modal-close" style="display: '+(e.closeBtn?"inline-block":"none")+';position: absolute;top: 3px;right: 3px;width: 20px;height: 20px;line-height: 16px;text-align: center;border-radius: 50%;font-style: normal;cursor: pointer">x</i></h4><div class="modal-content" id="modal-content" style="width: 96%;padding: 20px;color: #666;overflow: auto;word-break: break-all;">'+e.content+'</div><div class="modal-btn-group" style="text-align: center; padding: 0;"><button id="modal-ok" class="modal-ok btn btn-warning" style="display: '+(e.ok?"inline-block":"none")+';width: 106px;height: 32px;border: 1px solid #38b7f6;margin: 0 5px; margin: 0 20px; font-size: 14px; color:#fff;background-color: #38b7f6;">'+e.okText+'</button><button id="modal-cancel" class="modal-cancel btn btn-warning" style="display: '+(e.cancel?"inline-block":"none")+'; width: 106px;height: 32px;border: 1px solid #38b7f6; margin: 0 5px; margin: 0 20px; font-size: 14px; color: #38b7f6;background-color: #fff;">'+e.cancelText+"</button></div></div>";$("body").append(t).append(a),e.init&&e.init()}),t.method("destroy",function(){$(".modal-body, .modal-close, .modal-ok, .modal-cancel").off(),$(".modal-mask").remove(),$(".modal-body").remove(),e=null}),t.method("hideOkBtn",function(){$(".modal-ok").hide()}),t.method("showCancelBtn",function(){this.settings.autoClose=!0,$(".modal-cancel").show()}),function(e){if(!e)throw"error: 没有传参数。";return new t(e)}}(),n.isPhone=function(e){var t=/^1[0-9]{10}$/;return t.test(e)},n.isEmail=function(e){var t=/^[^\[\]\(\)\\<>:;,@.]+[^\[\]\(\)\\<>:;,@]*@[a-z0-9A-Z]+(([.]?[a-z0-9A-Z]+)*[-]*)*[.]([a-z0-9A-Z]+[-]*)+$/g;return t.test(e)},n.isFloat=function(e){var t=/^((0|[1-9][0-9]*)(\.[0-9]{0,2})?)$/;return t.test(e)},n.isNumber=function(e,t){var a=0==t?/^(0|[1-9][0-9]*)$/:/^([1-9][0-9]*)$/;return a.test(e)},n.priceSwitch=function(e){var t=e||0==e?e/100:0;return t},n.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},n.Date=function(){var e=new Date;return{getFullYear:function(){return e.getFullYear()},getMonth:function(){var t=e.getMonth()+1;return t<10&&(t="0"+t),t},getCodeMonth:function(){return e.getMonth()+1},getDate:function(){var t=e.getDate();return t<10&&(t="0"+t),t},getCodeDate:function(){return e.getDate()}}}(),n.GetDateStr=function(e){var t=new Date;t.setDate(t.getDate()+e);var a=t.getFullYear(),n=t.getMonth()+1,o=t.getDate();n<10&&(n="0"+n),o<10&&(o="0"+o);var r={time1:a+"-"+n+"-"+o,time2:n+"月"+o+"日",time3:t.getTime()};return r},n.getSouroundDate=function(e){var t=n.Date.getCodeDate(),a=n.Date.getCodeMonth(),o=n.Date.getFullYear(),r=n.Date.getMonth(),i=Number(t)-Math.min(e,14);if(i>=10){if(0===a)return o+"-01-01";if(2===a)return o%4==0&&o%100!=0||o%400==0?i>=30&&(a+=1,i="01"):i>=29&&(a+=1,i="01"),o+"-0"+a+"-"+i;if(a%2===1&&a<8)return i>=32&&(a+=1,i="01"),o+"-0"+a+"-"+i;if(a%2===1&&a>8){if(i>=31&&(a+=1,i="01"),9===a)return o+"-0"+a+"-"+i;if(11===a)return o+"-"+a+"-"+i}else{if(a%2===0&&a<8)return i>=31&&(a+=1,i="01"),o+"-0"+a+"-"+i;if(a%2===0&&a>=8)return i>=32&&(a+=1,a>=13&&(a="01",o+=1),i="01"),8===a?o+"-0"+a+"-"+i:o+"-"+a+"-"+i}}else{if(i<10&&i>0)return o+"-"+r+"-0"+i;if(i<=0){if(a-=1,i=Math.abs(i),a=0)return o+"-01-01";if(a=2)return i=29-i,o+"-0"+a+"-"+i;if(a%2===1&&a<8)return console.log(i),i=31-i,o+"-0"+a+"-"+i;if(a%2===1&&a>8)return i=30-i,9===a?o+"-0"+a+"-"+i:o+"-"+a+"-"+i;if(a%2===0&&a<8)return i=30-i,o+"-0"+a+"-"+i;if(a%2===0&&a>=8)return i=31-i,8===a?o+"-0"+a+"-"+i:o+"-"+a+"-"+i}}},n.getLadingCode=function(e,t,a){var n=[];a||(a="");for(var o=0;o<e.length;o++)for(var r=0;r<t.length;r++)o==t[r]&&n.push(e[o]<10?"0"+e[o]:e[o]);return n.join(a)},n.objKeySort=function(e){for(var t=Object.keys(e).sort(function(e,t){return t-e}),a={},n=0;n<t.length;n++)a[t[n]]=e[t[n]];return a},n.overdue=function(){this.Modal({content:"登录已过期，请重新登录",okCallback:function(){e.location.href="/"}})},n.Calendar={_today:new Date,_date:(new Date).getDate(),_day:(new Date).getDay(),_month:(new Date).getMonth()+1,_year:(new Date).getFullYear(),setDate:function(){this._date=new Date(this._today).getDate()},setDay:function(){this._day=new Date(this._today).getDay()},setMonth:function(){this._month=new Date(this._today).getMonth()+1},setYear:function(){this._year=new Date(this._today).getFullYear()},init:function(e){this._today=new Date(e),this.setDate(),this.setDay(),this.setMonth(),this.setYear()},isLeap:function(){var e=this._year;return e%4==0&&e%100>0||e%400==0&&e%3200>0},getLen:function(){return 2==this._month?this.isLeap()?29:28:this._month<8?this._month%2>0?31:30:this._month%2>0?30:31},getCalendar:function(e){for(var t=this.getLen(),a=new Date(this._year,this._month-1,1),n=a.getDay(),o=new Array,r=0,i="",l=0;l<6;l++){o[l]=new Array;for(var s=0;s<7;s++)r++,r-n>0&&r-n<=t?o[l][s]=r-n:o[l][s]=""}i+='<table class="sign_tab" border="0px" cellpadding="0px" cellspacing="0px">',i+="<thread><tr><th>日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th></tr></thread>",i+="<tbody>";for(var c=0;c<6;c++)if(5!=c||""!=o[c][0]){i+="<tr>";for(var d=0;d<o[c].length;d++)if(this.contains(e,o[c][d]))i+='<td class="red_tbg" data-num="'+o[c][d]+'">'+o[c][d]+'<span class="tbg_num"></span></td>';else{if(o[c][d]==this._date){i+='<td class="cur_day">'+o[c][d]+"</td>";continue}if(""==o[c][d]){i+='<td class="over">'+o[c][d]+"</td>";continue}i+="<td>"+o[c][d]+"</td>"}i+="</tr>"}return i+="</tbody>",i+="</table>"},nextMonth:function(){return 12==this._month&&(this._year++,this._month=0),this._month++,{year:this._year,month:this._month<10?"0"+this._month:this._month}},nextYear:function(){this._year++},previousMonth:function(){return 1==this._month&&(this._year--,this._month=13),this._month--,{year:this._year,month:this._month<10?"0"+this._month:this._month}},previousYear:function(){this._year--},contains:function(e,t){for(var a=0;a<e.length;a++)if(e[a]==t)return!0;return!1}},n.getUrlParam=function(t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=e.location.search.substr(1).match(a);return null!=n?unescape(n[2]):null},n.cookie=function(){function e(e,t,a){var n=new Date;n.setTime(n.getTime()+60*a*60*1e3),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()}function t(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null}return{setCookie:e,getCookie:t}}(),n.cdn="http://img.idongpin.com/",e.H=n})}).call(t,a(35)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}]);